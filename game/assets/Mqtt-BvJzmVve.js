var u=Object.defineProperty;var p=(i,s,e)=>s in i?u(i,s,{enumerable:!0,configurable:!0,writable:!0,value:e}):i[s]=e;var n=(i,s,e)=>(p(i,typeof s!="symbol"?s+"":s,e),e);(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))o(t);new MutationObserver(t=>{for(const r of t)if(r.type==="childList")for(const l of r.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&o(l)}).observe(document,{childList:!0,subtree:!0});function e(t){const r={};return t.integrity&&(r.integrity=t.integrity),t.referrerPolicy&&(r.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?r.credentials="include":t.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function o(t){if(t.ep)return;t.ep=!0;const r=e(t);fetch(t.href,r)}})();class d{constructor(s,e,o){n(this,"client");n(this,"broadcast","broadcast");n(this,"mainTopic","built2last");n(this,"sessionId");this.sessionId=o,this.client=s,this.client.on("connect",()=>{e&&this.client.subscribe(`${this.mainTopic}/${this.sessionId}/#`)})}subscribe(s){this.client.subscribe(`${s}`)}on(s,e){this.client.on(s,e)}publish(s,e,o){this.client.publish(`${this.mainTopic}/${this.sessionId}/${s}/${e}`,o)}publishClientSpecific(s,e,o,t){this.client.publish(`${this.mainTopic}/${this.sessionId}/${s}/${o}/${e}`,t)}eventToTopic(s,e){return`${this.mainTopic}/${this.sessionId}/${s}/${e}`}eventToClientTopic(s,e,o){return`${this.mainTopic}/${this.sessionId}/${s}/${o}/${e}`}parseTopic(s){const e=s.split("/");let o="UNDEFINED",t="",r=0;if(e[r]!==this.mainTopic)return["UNDEFINED","UNDEFINED",""];if(r++,e[r]!==this.sessionId)return["UNDEFINED","UNDEFINED",""];if(r++,r<e.length&&Object.values(a).includes(e[r])){if(o=e[r],r++,r<e.length&&Object.values(c).includes(e[r]))return[o,e[r],t];if(t=e[r],r++,r<e.length&&Object.values(c).includes(e[r]))return[o,e[r],t]}return[o,"UNDEFINED",""]}}function h(i,s,e){return`${i}:${s}:${e}`}function m(i){let s=i.split(":"),e=0,o=0,t=0;return s.length>2&&(t=parseFloat(s[2])),s.length>1&&(o=parseFloat(s[1])),s.length>0&&(e=parseFloat(s[0])),[e,o,t]}var a=(i=>(i.PlayerAction="player_action",i.ControllerMessage="controller_message",i.Undefined="UNDEFINED",i))(a||{}),c=(i=>(i.XMovement="x",i.YMovement="y",i.ZMovement="z",i.Movement="move",i.Init="init",i.Drop="drop",i.Scale="scale",i.ColorResponse="color_response",i.Start="start",i.RotatePayload="rotate_payload",i.Stop="stop",i.Reset="reset",i.All="#",i.GameFullResponse="full_response",i.Undefined="UNDEFINED",i))(c||{});export{d as M,a,c as b,m,h as v};
