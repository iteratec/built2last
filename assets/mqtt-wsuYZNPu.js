var Ce=Object.defineProperty;var ke=(le,ue,I)=>ue in le?Ce(le,ue,{enumerable:!0,configurable:!0,writable:!0,value:I}):le[ue]=I;var _e=(le,ue,I)=>(ke(le,typeof ue!="symbol"?ue+"":ue,I),I);(function(){const ue=document.createElement("link").relList;if(ue&&ue.supports&&ue.supports("modulepreload"))return;for(const j of document.querySelectorAll('link[rel="modulepreload"]'))F(j);new MutationObserver(j=>{for(const w of j)if(w.type==="childList")for(const g of w.addedNodes)g.tagName==="LINK"&&g.rel==="modulepreload"&&F(g)}).observe(document,{childList:!0,subtree:!0});function I(j){const w={};return j.integrity&&(w.integrity=j.integrity),j.referrerPolicy&&(w.referrerPolicy=j.referrerPolicy),j.crossOrigin==="use-credentials"?w.credentials="include":j.crossOrigin==="anonymous"?w.credentials="omit":w.credentials="same-origin",w}function F(j){if(j.ep)return;j.ep=!0;const w=I(j);fetch(j.href,w)}})();const we="built2last";class Ie{constructor(ue,I){_e(this,"client");_e(this,"broadcast","broadcast");this.client=ue,this.client.on("connect",()=>{I&&this.client.subscribe(`${we}/#`)})}subscribe(ue){this.client.subscribe(`${ue}`)}on(ue,I){this.client.on(ue,I)}publish(ue,I,F){this.client.publish(`${we}/${ue}/${I}`,F)}publishClientSpecific(ue,I,F,j){this.client.publish(`${we}/${ue}/${F}/${I}`,j)}eventToTopic(ue,I){return`${we}/${ue}/${I}`}eventToClientTopic(ue,I,F){return`${we}/${ue}/${F}/${I}`}parseTopic(ue){const I=ue.split("/");let F,j="",w=0;if(I[w]!==we)return["UNDEFINED","UNDEFINED",""];if(w++,w<I.length&&Object.values(Se).includes(I[w])){if(F=I[w],w++,w<I.length&&Object.values(Ee).includes(I[w]))return[F,I[w],j];if(j=I[w],w++,w<I.length&&Object.values(Ee).includes(I[w]))return[F,I[w],j]}return["UNDEFINED","UNDEFINED",""]}}var Se=(le=>(le.PlayerAction="player_action",le.ControllerMessage="controller_message",le.Undefined="UNDEFINED",le))(Se||{}),Ee=(le=>(le.XMovement="x",le.YMovement="y",le.ZMovement="z",le.Init="init",le.Drop="drop",le.Scale="scale",le.ColorResponse="color_response",le.Start="start",le.RotatePayload="rotate_payload",le.All="#",le.Undefined="UNDEFINED",le))(Ee||{}),de=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function xe(le){return le&&le.__esModule&&Object.prototype.hasOwnProperty.call(le,"default")?le.default:le}function Re(le){if(le.__esModule)return le;var ue=le.default;if(typeof ue=="function"){var I=function F(){return this instanceof F?Reflect.construct(ue,arguments,this.constructor):ue.apply(this,arguments)};I.prototype=ue.prototype}else I={};return Object.defineProperty(I,"__esModule",{value:!0}),Object.keys(le).forEach(function(F){var j=Object.getOwnPropertyDescriptor(le,F);Object.defineProperty(I,F,j.get?j:{enumerable:!0,get:function(){return le[F]}})}),I}function me(le){throw new Error('Could not dynamically require "'+le+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Te={exports:{}};(function(le,ue){(function(I){le.exports=I()})(function(){return function(){function I(F,j,w){function g(s,t){if(!j[s]){if(!F[s]){var r=typeof me=="function"&&me;if(!t&&r)return r(s,!0);if(p)return p(s,!0);var e=new Error("Cannot find module '"+s+"'");throw e.code="MODULE_NOT_FOUND",e}var n=j[s]={exports:{}};F[s][0].call(n.exports,function(f){var o=F[s][1][f];return g(o||f)},n,n.exports,I,F,j,w)}return j[s].exports}for(var p=typeof me=="function"&&me,h=0;h<w.length;h++)g(w[h]);return g}return I}()({1:[function(I,F,j){(function(w,g){(function(){const p=I("events").EventEmitter,h=I("./store"),s=I("./topic-alias-recv"),t=I("./topic-alias-send"),r=I("mqtt-packet"),e=I("./default-message-id-provider"),n=I("readable-stream").Writable,f=I("inherits"),o=I("reinterval"),y=I("rfdc/default"),d=I("./validations"),u=I("xtend"),i=I("debug")("mqttjs:client"),v=w?w.nextTick:function(T){setTimeout(T,0)},E=g.setImmediate||function(T){v(T)},k={keepalive:60,reschedulePings:!0,protocolId:"MQTT",protocolVersion:4,reconnectPeriod:1e3,connectTimeout:30*1e3,clean:!0,resubscribe:!0},P=["ECONNREFUSED","EADDRINUSE","ECONNRESET","ENOTFOUND"],L={0:"",1:"Unacceptable protocol version",2:"Identifier rejected",3:"Server unavailable",4:"Bad username or password",5:"Not authorized",16:"No matching subscribers",17:"No subscription existed",128:"Unspecified error",129:"Malformed Packet",130:"Protocol Error",131:"Implementation specific error",132:"Unsupported Protocol Version",133:"Client Identifier not valid",134:"Bad User Name or Password",135:"Not authorized",136:"Server unavailable",137:"Server busy",138:"Banned",139:"Server shutting down",140:"Bad authentication method",141:"Keep Alive timeout",142:"Session taken over",143:"Topic Filter invalid",144:"Topic Name invalid",145:"Packet identifier in use",146:"Packet Identifier not found",147:"Receive Maximum exceeded",148:"Topic Alias invalid",149:"Packet too large",150:"Message rate too high",151:"Quota exceeded",152:"Administrative action",153:"Payload format invalid",154:"Retain not supported",155:"QoS not supported",156:"Use another server",157:"Server moved",158:"Shared Subscriptions not supported",159:"Connection rate exceeded",160:"Maximum connect time",161:"Subscription Identifiers not supported",162:"Wildcard Subscriptions not supported"};function R(){return"mqttjs_"+Math.random().toString(16).substr(2,8)}function q(T,x){if(T.options.protocolVersion===5&&x.cmd==="publish"){let D;x.properties&&(D=x.properties.topicAlias);const G=x.topic.toString();if(T.topicAliasSend)if(D){if(G.length!==0&&(i("applyTopicAlias :: register topic: %s - alias: %d",G,D),!T.topicAliasSend.put(G,D)))return i("applyTopicAlias :: error out of range. topic: %s - alias: %d",G,D),new Error("Sending Topic Alias out of range")}else G.length!==0&&(T.options.autoAssignTopicAlias?(D=T.topicAliasSend.getAliasByTopic(G),D?(x.topic="",x.properties={...x.properties,topicAlias:D},i("applyTopicAlias :: auto assign(use) topic: %s - alias: %d",G,D)):(D=T.topicAliasSend.getLruAlias(),T.topicAliasSend.put(G,D),x.properties={...x.properties,topicAlias:D},i("applyTopicAlias :: auto assign topic: %s - alias: %d",G,D))):T.options.autoUseTopicAlias&&(D=T.topicAliasSend.getAliasByTopic(G),D&&(x.topic="",x.properties={...x.properties,topicAlias:D},i("applyTopicAlias :: auto use topic: %s - alias: %d",G,D))));else if(D)return i("applyTopicAlias :: error out of range. topic: %s - alias: %d",G,D),new Error("Sending Topic Alias out of range")}}function l(T,x){let D;x.properties&&(D=x.properties.topicAlias);let G=x.topic.toString();if(G.length===0){if(typeof D>"u")return new Error("Unregistered Topic Alias");if(G=T.topicAliasSend.getTopicByAlias(D),typeof G>"u")return new Error("Unregistered Topic Alias");x.topic=G}D&&delete x.properties.topicAlias}function _(T,x,D){i("sendPacket :: packet: %O",x),i("sendPacket :: emitting `packetsend`"),T.emit("packetsend",x),i("sendPacket :: writing to stream");const G=r.writeToStream(x,T.stream,T.options);i("sendPacket :: writeToStream result %s",G),!G&&D&&D!==W?(i("sendPacket :: handle events on `drain` once through callback."),T.stream.once("drain",D)):D&&(i("sendPacket :: invoking cb"),D())}function b(T){T&&(i("flush: queue exists? %b",!!T),Object.keys(T).forEach(function(x){typeof T[x].cb=="function"&&(T[x].cb(new Error("Connection closed")),delete T[x])}))}function B(T){T&&(i("flushVolatile :: deleting volatile messages from the queue and setting their callbacks as error function"),Object.keys(T).forEach(function(x){T[x].volatile&&typeof T[x].cb=="function"&&(T[x].cb(new Error("Connection closed")),delete T[x])}))}function V(T,x,D,G){i("storeAndSend :: store packet with cmd %s to outgoingStore",x.cmd);let oe=x,ne;if(oe.cmd==="publish"&&(oe=y(x),ne=l(T,oe),ne))return D&&D(ne);T.outgoingStore.put(oe,function(Q){if(Q)return D&&D(Q);G(),_(T,x,D)})}function W(T){i("nop ::",T)}function Y(T,x){let D;const G=this;if(!(this instanceof Y))return new Y(T,x);this.options=x||{};for(D in k)typeof this.options[D]>"u"?this.options[D]=k[D]:this.options[D]=x[D];i("MqttClient :: options.protocol",x.protocol),i("MqttClient :: options.protocolVersion",x.protocolVersion),i("MqttClient :: options.username",x.username),i("MqttClient :: options.keepalive",x.keepalive),i("MqttClient :: options.reconnectPeriod",x.reconnectPeriod),i("MqttClient :: options.rejectUnauthorized",x.rejectUnauthorized),i("MqttClient :: options.topicAliasMaximum",x.topicAliasMaximum),this.options.clientId=typeof x.clientId=="string"?x.clientId:R(),i("MqttClient :: clientId",this.options.clientId),this.options.customHandleAcks=x.protocolVersion===5&&x.customHandleAcks?x.customHandleAcks:function(){arguments[3](0)},this.streamBuilder=T,this.messageIdProvider=typeof this.options.messageIdProvider>"u"?new e:this.options.messageIdProvider,this.outgoingStore=x.outgoingStore||new h,this.incomingStore=x.incomingStore||new h,this.queueQoSZero=x.queueQoSZero===void 0?!0:x.queueQoSZero,this._resubscribeTopics={},this.messageIdToTopic={},this.pingTimer=null,this.connected=!1,this.disconnecting=!1,this.queue=[],this.connackTimer=null,this.reconnectTimer=null,this._storeProcessing=!1,this._packetIdsDuringStoreProcessing={},this._storeProcessingQueue=[],this.outgoing={},this._firstConnection=!0,x.topicAliasMaximum>0&&(x.topicAliasMaximum>65535?i("MqttClient :: options.topicAliasMaximum is out of range"):this.topicAliasRecv=new s(x.topicAliasMaximum)),this.on("connect",function(){const oe=this.queue;function ne(){const K=oe.shift();i("deliver :: entry %o",K);let Q=null;if(!K){G._resubscribe();return}Q=K.packet,i("deliver :: call _sendPacket for %o",Q);let re=!0;Q.messageId&&Q.messageId!==0&&(G.messageIdProvider.register(Q.messageId)||(re=!1)),re?G._sendPacket(Q,function(ee){K.cb&&K.cb(ee),ne()}):(i("messageId: %d has already used. The message is skipped and removed.",Q.messageId),ne())}i("connect :: sending queued packets"),ne()}),this.on("close",function(){i("close :: connected set to `false`"),this.connected=!1,i("close :: clearing connackTimer"),clearTimeout(this.connackTimer),i("close :: clearing ping timer"),G.pingTimer!==null&&(G.pingTimer.clear(),G.pingTimer=null),this.topicAliasRecv&&this.topicAliasRecv.clear(),i("close :: calling _setupReconnect"),this._setupReconnect()}),p.call(this),i("MqttClient :: setting up stream"),this._setupStream()}f(Y,p),Y.prototype._setupStream=function(){const T=this,x=new n,D=r.parser(this.options);let G=null;const oe=[];i("_setupStream :: calling method to clear reconnect"),this._clearReconnect(),i("_setupStream :: using streamBuilder provided to client to create stream"),this.stream=this.streamBuilder(this),D.on("packet",function(ee){i("parser :: on packet push to packets array."),oe.push(ee)});function ne(){if(oe.length)v(K);else{const ee=G;G=null,ee()}}function K(){i("work :: getting next packet in queue");const ee=oe.shift();if(ee)i("work :: packet pulled from queue"),T._handlePacket(ee,ne);else{i("work :: no packets in queue");const se=G;G=null,i("work :: done flag is %s",!!se),se&&se()}}x._write=function(ee,se,ie){G=ie,i("writable stream :: parsing buffer"),D.parse(ee),K()};function Q(ee){i("streamErrorHandler :: error",ee.message),P.includes(ee.code)?(i("streamErrorHandler :: emitting error"),T.emit("error",ee)):W(ee)}i("_setupStream :: pipe stream to writable stream"),this.stream.pipe(x),this.stream.on("error",Q),this.stream.on("close",function(){i("(%s)stream :: on close",T.options.clientId),B(T.outgoing),i("stream: emit close to MqttClient"),T.emit("close")}),i("_setupStream: sending packet `connect`");const re=Object.create(this.options);if(re.cmd="connect",this.topicAliasRecv&&(re.properties||(re.properties={}),this.topicAliasRecv&&(re.properties.topicAliasMaximum=this.topicAliasRecv.max)),_(this,re),D.on("error",this.emit.bind(this,"error")),this.options.properties){if(!this.options.properties.authenticationMethod&&this.options.properties.authenticationData)return T.end(()=>this.emit("error",new Error("Packet has no Authentication Method"))),this;if(this.options.properties.authenticationMethod&&this.options.authPacket&&typeof this.options.authPacket=="object"){const ee=u({cmd:"auth",reasonCode:0},this.options.authPacket);_(this,ee)}}this.stream.setMaxListeners(1e3),clearTimeout(this.connackTimer),this.connackTimer=setTimeout(function(){i("!!connectTimeout hit!! Calling _cleanUp with force `true`"),T._cleanUp(!0)},this.options.connectTimeout)},Y.prototype._handlePacket=function(T,x){const D=this.options;if(D.protocolVersion===5&&D.properties&&D.properties.maximumPacketSize&&D.properties.maximumPacketSize<T.length)return this.emit("error",new Error("exceeding packets size "+T.cmd)),this.end({reasonCode:149,properties:{reasonString:"Maximum packet size was exceeded"}}),this;switch(i("_handlePacket :: emitting packetreceive"),this.emit("packetreceive",T),T.cmd){case"publish":this._handlePublish(T,x);break;case"puback":case"pubrec":case"pubcomp":case"suback":case"unsuback":this._handleAck(T),x();break;case"pubrel":this._handlePubrel(T,x);break;case"connack":this._handleConnack(T),x();break;case"auth":this._handleAuth(T),x();break;case"pingresp":this._handlePingresp(T),x();break;case"disconnect":this._handleDisconnect(T),x();break}},Y.prototype._checkDisconnecting=function(T){return this.disconnecting&&(T&&T!==W?T(new Error("client disconnecting")):this.emit("error",new Error("client disconnecting"))),this.disconnecting},Y.prototype.publish=function(T,x,D,G){i("publish :: message `%s` to topic `%s`",x,T);const oe=this.options;if(typeof D=="function"&&(G=D,D=null),D=u({qos:0,retain:!1,dup:!1},D),this._checkDisconnecting(G))return this;const K=this,Q=function(){let re=0;if((D.qos===1||D.qos===2)&&(re=K._nextId(),re===null))return i("No messageId left"),!1;const ee={cmd:"publish",topic:T,payload:x,qos:D.qos,retain:D.retain,messageId:re,dup:D.dup};switch(oe.protocolVersion===5&&(ee.properties=D.properties),i("publish :: qos",D.qos),D.qos){case 1:case 2:K.outgoing[ee.messageId]={volatile:!1,cb:G||W},i("MqttClient:publish: packet cmd: %s",ee.cmd),K._sendPacket(ee,void 0,D.cbStorePut);break;default:i("MqttClient:publish: packet cmd: %s",ee.cmd),K._sendPacket(ee,G,D.cbStorePut);break}return!0};return(this._storeProcessing||this._storeProcessingQueue.length>0||!Q())&&this._storeProcessingQueue.push({invoke:Q,cbStorePut:D.cbStorePut,callback:G}),this},Y.prototype.subscribe=function(){const T=this,x=new Array(arguments.length);for(let ie=0;ie<arguments.length;ie++)x[ie]=arguments[ie];const D=[];let G=x.shift();const oe=G.resubscribe;let ne=x.pop()||W,K=x.pop();const Q=this.options.protocolVersion;delete G.resubscribe,typeof G=="string"&&(G=[G]),typeof ne!="function"&&(K=ne,ne=W);const re=d.validateTopics(G);if(re!==null)return E(ne,new Error("Invalid topic "+re)),this;if(this._checkDisconnecting(ne))return i("subscribe: discconecting true"),this;const ee={qos:0};if(Q===5&&(ee.nl=!1,ee.rap=!1,ee.rh=0),K=u(ee,K),Array.isArray(G)?G.forEach(function(ie){if(i("subscribe: array topic %s",ie),!Object.prototype.hasOwnProperty.call(T._resubscribeTopics,ie)||T._resubscribeTopics[ie].qos<K.qos||oe){const H={topic:ie,qos:K.qos};Q===5&&(H.nl=K.nl,H.rap=K.rap,H.rh=K.rh,H.properties=K.properties),i("subscribe: pushing topic `%s` and qos `%s` to subs list",H.topic,H.qos),D.push(H)}}):Object.keys(G).forEach(function(ie){if(i("subscribe: object topic %s",ie),!Object.prototype.hasOwnProperty.call(T._resubscribeTopics,ie)||T._resubscribeTopics[ie].qos<G[ie].qos||oe){const H={topic:ie,qos:G[ie].qos};Q===5&&(H.nl=G[ie].nl,H.rap=G[ie].rap,H.rh=G[ie].rh,H.properties=K.properties),i("subscribe: pushing `%s` to subs list",H),D.push(H)}}),!D.length)return ne(null,[]),this;const se=function(){const ie=T._nextId();if(ie===null)return i("No messageId left"),!1;const H={cmd:"subscribe",subscriptions:D,qos:1,retain:!1,dup:!1,messageId:ie};if(K.properties&&(H.properties=K.properties),T.options.resubscribe){i("subscribe :: resubscribe true");const U=[];D.forEach(function(Z){if(T.options.reconnectPeriod>0){const O={qos:Z.qos};Q===5&&(O.nl=Z.nl||!1,O.rap=Z.rap||!1,O.rh=Z.rh||0,O.properties=Z.properties),T._resubscribeTopics[Z.topic]=O,U.push(Z.topic)}}),T.messageIdToTopic[H.messageId]=U}return T.outgoing[H.messageId]={volatile:!0,cb:function(U,Z){if(!U){const O=Z.granted;for(let M=0;M<O.length;M+=1)D[M].qos=O[M]}ne(U,D)}},i("subscribe :: call _sendPacket"),T._sendPacket(H),!0};return(this._storeProcessing||this._storeProcessingQueue.length>0||!se())&&this._storeProcessingQueue.push({invoke:se,callback:ne}),this},Y.prototype.unsubscribe=function(){const T=this,x=new Array(arguments.length);for(let Q=0;Q<arguments.length;Q++)x[Q]=arguments[Q];let D=x.shift(),G=x.pop()||W,oe=x.pop();typeof D=="string"&&(D=[D]),typeof G!="function"&&(oe=G,G=W);const ne=d.validateTopics(D);if(ne!==null)return E(G,new Error("Invalid topic "+ne)),this;if(T._checkDisconnecting(G))return this;const K=function(){const Q=T._nextId();if(Q===null)return i("No messageId left"),!1;const re={cmd:"unsubscribe",qos:1,messageId:Q};return typeof D=="string"?re.unsubscriptions=[D]:Array.isArray(D)&&(re.unsubscriptions=D),T.options.resubscribe&&re.unsubscriptions.forEach(function(ee){delete T._resubscribeTopics[ee]}),typeof oe=="object"&&oe.properties&&(re.properties=oe.properties),T.outgoing[re.messageId]={volatile:!0,cb:G},i("unsubscribe: call _sendPacket"),T._sendPacket(re),!0};return(this._storeProcessing||this._storeProcessingQueue.length>0||!K())&&this._storeProcessingQueue.push({invoke:K,callback:G}),this},Y.prototype.end=function(T,x,D){const G=this;i("end :: (%s)",this.options.clientId),(T==null||typeof T!="boolean")&&(D=x||W,x=T,T=!1,typeof x!="object"&&(D=x,x=null,typeof D!="function"&&(D=W))),typeof x!="object"&&(D=x,x=null),i("end :: cb? %s",!!D),D=D||W;function oe(){i("end :: closeStores: closing incoming and outgoing stores"),G.disconnected=!0,G.incomingStore.close(function(K){G.outgoingStore.close(function(Q){if(i("end :: closeStores: emitting end"),G.emit("end"),D){const re=K||Q;i("end :: closeStores: invoking callback with args"),D(re)}})}),G._deferredReconnect&&G._deferredReconnect()}function ne(){i("end :: (%s) :: finish :: calling _cleanUp with force %s",G.options.clientId,T),G._cleanUp(T,()=>{i("end :: finish :: calling process.nextTick on closeStores"),v(oe.bind(G))},x)}return this.disconnecting?(D(),this):(this._clearReconnect(),this.disconnecting=!0,!T&&Object.keys(this.outgoing).length>0?(i("end :: (%s) :: calling finish in 10ms once outgoing is empty",G.options.clientId),this.once("outgoingEmpty",setTimeout.bind(null,ne,10))):(i("end :: (%s) :: immediately calling finish",G.options.clientId),ne()),this)},Y.prototype.removeOutgoingMessage=function(T){const x=this.outgoing[T]?this.outgoing[T].cb:null;return delete this.outgoing[T],this.outgoingStore.del({messageId:T},function(){x(new Error("Message removed"))}),this},Y.prototype.reconnect=function(T){i("client reconnect");const x=this,D=function(){T?(x.options.incomingStore=T.incomingStore,x.options.outgoingStore=T.outgoingStore):(x.options.incomingStore=null,x.options.outgoingStore=null),x.incomingStore=x.options.incomingStore||new h,x.outgoingStore=x.options.outgoingStore||new h,x.disconnecting=!1,x.disconnected=!1,x._deferredReconnect=null,x._reconnect()};return this.disconnecting&&!this.disconnected?this._deferredReconnect=D:D(),this},Y.prototype._reconnect=function(){i("_reconnect: emitting reconnect to client"),this.emit("reconnect"),this.connected?(this.end(()=>{this._setupStream()}),i("client already connected. disconnecting first.")):(i("_reconnect: calling _setupStream"),this._setupStream())},Y.prototype._setupReconnect=function(){const T=this;!T.disconnecting&&!T.reconnectTimer&&T.options.reconnectPeriod>0?(this.reconnecting||(i("_setupReconnect :: emit `offline` state"),this.emit("offline"),i("_setupReconnect :: set `reconnecting` to `true`"),this.reconnecting=!0),i("_setupReconnect :: setting reconnectTimer for %d ms",T.options.reconnectPeriod),T.reconnectTimer=setInterval(function(){i("reconnectTimer :: reconnect triggered!"),T._reconnect()},T.options.reconnectPeriod)):i("_setupReconnect :: doing nothing...")},Y.prototype._clearReconnect=function(){i("_clearReconnect : clearing reconnect timer"),this.reconnectTimer&&(clearInterval(this.reconnectTimer),this.reconnectTimer=null)},Y.prototype._cleanUp=function(T,x){const D=arguments[2];if(x&&(i("_cleanUp :: done callback provided for on stream close"),this.stream.on("close",x)),i("_cleanUp :: forced? %s",T),T)this.options.reconnectPeriod===0&&this.options.clean&&b(this.outgoing),i("_cleanUp :: (%s) :: destroying stream",this.options.clientId),this.stream.destroy();else{const G=u({cmd:"disconnect"},D);i("_cleanUp :: (%s) :: call _sendPacket with disconnect packet",this.options.clientId),this._sendPacket(G,E.bind(null,this.stream.end.bind(this.stream)))}this.disconnecting||(i("_cleanUp :: client not disconnecting. Clearing and resetting reconnect."),this._clearReconnect(),this._setupReconnect()),this.pingTimer!==null&&(i("_cleanUp :: clearing pingTimer"),this.pingTimer.clear(),this.pingTimer=null),x&&!this.connected&&(i("_cleanUp :: (%s) :: removing stream `done` callback `close` listener",this.options.clientId),this.stream.removeListener("close",x),x())},Y.prototype._sendPacket=function(T,x,D){i("_sendPacket :: (%s) ::  start",this.options.clientId),D=D||W,x=x||W;const G=q(this,T);if(G){x(G);return}if(!this.connected){if(T.cmd==="auth"){this._shiftPingInterval(),_(this,T,x);return}i("_sendPacket :: client not connected. Storing packet offline."),this._storePacket(T,x,D);return}switch(this._shiftPingInterval(),T.cmd){case"publish":break;case"pubrel":V(this,T,x,D);return;default:_(this,T,x);return}switch(T.qos){case 2:case 1:V(this,T,x,D);break;case 0:default:_(this,T,x);break}i("_sendPacket :: (%s) ::  end",this.options.clientId)},Y.prototype._storePacket=function(T,x,D){i("_storePacket :: packet: %o",T),i("_storePacket :: cb? %s",!!x),D=D||W;let G=T;if(G.cmd==="publish"){G=y(T);const oe=l(this,G);if(oe)return x&&x(oe)}(G.qos||0)===0&&this.queueQoSZero||G.cmd!=="publish"?this.queue.push({packet:G,cb:x}):G.qos>0?(x=this.outgoing[G.messageId]?this.outgoing[G.messageId].cb:null,this.outgoingStore.put(G,function(oe){if(oe)return x&&x(oe);D()})):x&&x(new Error("No connection to broker"))},Y.prototype._setupPingTimer=function(){i("_setupPingTimer :: keepalive %d (seconds)",this.options.keepalive);const T=this;!this.pingTimer&&this.options.keepalive&&(this.pingResp=!0,this.pingTimer=o(function(){T._checkPing()},this.options.keepalive*1e3))},Y.prototype._shiftPingInterval=function(){this.pingTimer&&this.options.keepalive&&this.options.reschedulePings&&this.pingTimer.reschedule(this.options.keepalive*1e3)},Y.prototype._checkPing=function(){i("_checkPing :: checking ping..."),this.pingResp?(i("_checkPing :: ping response received. Clearing flag and sending `pingreq`"),this.pingResp=!1,this._sendPacket({cmd:"pingreq"})):(i("_checkPing :: calling _cleanUp with force true"),this._cleanUp(!0))},Y.prototype._handlePingresp=function(){this.pingResp=!0},Y.prototype._handleConnack=function(T){i("_handleConnack");const x=this.options,G=x.protocolVersion===5?T.reasonCode:T.returnCode;if(clearTimeout(this.connackTimer),delete this.topicAliasSend,T.properties){if(T.properties.topicAliasMaximum){if(T.properties.topicAliasMaximum>65535){this.emit("error",new Error("topicAliasMaximum from broker is out of range"));return}T.properties.topicAliasMaximum>0&&(this.topicAliasSend=new t(T.properties.topicAliasMaximum))}T.properties.serverKeepAlive&&x.keepalive&&(x.keepalive=T.properties.serverKeepAlive,this._shiftPingInterval()),T.properties.maximumPacketSize&&(x.properties||(x.properties={}),x.properties.maximumPacketSize=T.properties.maximumPacketSize)}if(G===0)this.reconnecting=!1,this._onConnect(T);else if(G>0){const oe=new Error("Connection refused: "+L[G]);oe.code=G,this.emit("error",oe)}},Y.prototype._handleAuth=function(T){const D=this.options.protocolVersion,G=D===5?T.reasonCode:T.returnCode;if(D!==5){const ne=new Error("Protocol error: Auth packets are only supported in MQTT 5. Your version:"+D);ne.code=G,this.emit("error",ne);return}const oe=this;this.handleAuth(T,function(ne,K){if(ne){oe.emit("error",ne);return}if(G===24)oe.reconnecting=!1,oe._sendPacket(K);else{const Q=new Error("Connection refused: "+L[G]);ne.code=G,oe.emit("error",Q)}})},Y.prototype.handleAuth=function(T,x){x()},Y.prototype._handlePublish=function(T,x){i("_handlePublish: packet %o",T),x=typeof x<"u"?x:W;let D=T.topic.toString();const G=T.payload,oe=T.qos,ne=T.messageId,K=this,Q=this.options,re=[0,16,128,131,135,144,145,151,153];if(this.options.protocolVersion===5){let ee;if(T.properties&&(ee=T.properties.topicAlias),typeof ee<"u")if(D.length===0)if(ee>0&&ee<=65535){const se=this.topicAliasRecv.getTopicByAlias(ee);if(se)D=se,i("_handlePublish :: topic complemented by alias. topic: %s - alias: %d",D,ee);else{i("_handlePublish :: unregistered topic alias. alias: %d",ee),this.emit("error",new Error("Received unregistered Topic Alias"));return}}else{i("_handlePublish :: topic alias out of range. alias: %d",ee),this.emit("error",new Error("Received Topic Alias is out of range"));return}else if(this.topicAliasRecv.put(D,ee))i("_handlePublish :: registered topic: %s - alias: %d",D,ee);else{i("_handlePublish :: topic alias out of range. alias: %d",ee),this.emit("error",new Error("Received Topic Alias is out of range"));return}}switch(i("_handlePublish: qos %d",oe),oe){case 2:{Q.customHandleAcks(D,G,T,function(ee,se){if(ee instanceof Error||(se=ee,ee=null),ee)return K.emit("error",ee);if(re.indexOf(se)===-1)return K.emit("error",new Error("Wrong reason code for pubrec"));se?K._sendPacket({cmd:"pubrec",messageId:ne,reasonCode:se},x):K.incomingStore.put(T,function(){K._sendPacket({cmd:"pubrec",messageId:ne},x)})});break}case 1:{Q.customHandleAcks(D,G,T,function(ee,se){if(ee instanceof Error||(se=ee,ee=null),ee)return K.emit("error",ee);if(re.indexOf(se)===-1)return K.emit("error",new Error("Wrong reason code for puback"));se||K.emit("message",D,G,T),K.handleMessage(T,function(ie){if(ie)return x&&x(ie);K._sendPacket({cmd:"puback",messageId:ne,reasonCode:se},x)})});break}case 0:this.emit("message",D,G,T),this.handleMessage(T,x);break;default:i("_handlePublish: unknown QoS. Doing nothing.");break}},Y.prototype.handleMessage=function(T,x){x()},Y.prototype._handleAck=function(T){const x=T.messageId,D=T.cmd;let G=null;const oe=this.outgoing[x]?this.outgoing[x].cb:null,ne=this;let K;if(!oe){i("_handleAck :: Server sent an ack in error. Ignoring.");return}switch(i("_handleAck :: packet type",D),D){case"pubcomp":case"puback":{const Q=T.reasonCode;Q&&Q>0&&Q!==16&&(K=new Error("Publish error: "+L[Q]),K.code=Q,oe(K,T)),delete this.outgoing[x],this.outgoingStore.del(T,oe),this.messageIdProvider.deallocate(x),this._invokeStoreProcessingQueue();break}case"pubrec":{G={cmd:"pubrel",qos:2,messageId:x};const Q=T.reasonCode;Q&&Q>0&&Q!==16?(K=new Error("Publish error: "+L[Q]),K.code=Q,oe(K,T)):this._sendPacket(G);break}case"suback":{delete this.outgoing[x],this.messageIdProvider.deallocate(x);for(let Q=0;Q<T.granted.length;Q++)if(T.granted[Q]&128){const re=this.messageIdToTopic[x];re&&re.forEach(function(ee){delete ne._resubscribeTopics[ee]})}this._invokeStoreProcessingQueue(),oe(null,T);break}case"unsuback":{delete this.outgoing[x],this.messageIdProvider.deallocate(x),this._invokeStoreProcessingQueue(),oe(null);break}default:ne.emit("error",new Error("unrecognized packet type"))}this.disconnecting&&Object.keys(this.outgoing).length===0&&this.emit("outgoingEmpty")},Y.prototype._handlePubrel=function(T,x){i("handling pubrel packet"),x=typeof x<"u"?x:W;const D=T.messageId,G=this,oe={cmd:"pubcomp",messageId:D};G.incomingStore.get(T,function(ne,K){ne?G._sendPacket(oe,x):(G.emit("message",K.topic,K.payload,K),G.handleMessage(K,function(Q){if(Q)return x(Q);G.incomingStore.del(K,W),G._sendPacket(oe,x)}))})},Y.prototype._handleDisconnect=function(T){this.emit("disconnect",T)},Y.prototype._nextId=function(){return this.messageIdProvider.allocate()},Y.prototype.getLastMessageId=function(){return this.messageIdProvider.getLastAllocated()},Y.prototype._resubscribe=function(){i("_resubscribe");const T=Object.keys(this._resubscribeTopics);if(!this._firstConnection&&(this.options.clean||this.options.protocolVersion===5&&!this.connackPacket.sessionPresent)&&T.length>0)if(this.options.resubscribe)if(this.options.protocolVersion===5){i("_resubscribe: protocolVersion 5");for(let x=0;x<T.length;x++){const D={};D[T[x]]=this._resubscribeTopics[T[x]],D.resubscribe=!0,this.subscribe(D,{properties:D[T[x]].properties})}}else this._resubscribeTopics.resubscribe=!0,this.subscribe(this._resubscribeTopics);else this._resubscribeTopics={};this._firstConnection=!1},Y.prototype._onConnect=function(T){if(this.disconnected){this.emit("connect",T);return}const x=this;this.connackPacket=T,this.messageIdProvider.clear(),this._setupPingTimer(),this.connected=!0;function D(){let G=x.outgoingStore.createStream();function oe(){x._storeProcessing=!1,x._packetIdsDuringStoreProcessing={}}x.once("close",ne),G.on("error",function(Q){oe(),x._flushStoreProcessingQueue(),x.removeListener("close",ne),x.emit("error",Q)});function ne(){G.destroy(),G=null,x._flushStoreProcessingQueue(),oe()}function K(){if(!G)return;x._storeProcessing=!0;const Q=G.read(1);let re;if(!Q){G.once("readable",K);return}if(x._packetIdsDuringStoreProcessing[Q.messageId]){K();return}!x.disconnecting&&!x.reconnectTimer?(re=x.outgoing[Q.messageId]?x.outgoing[Q.messageId].cb:null,x.outgoing[Q.messageId]={volatile:!1,cb:function(ee,se){re&&re(ee,se),K()}},x._packetIdsDuringStoreProcessing[Q.messageId]=!0,x.messageIdProvider.register(Q.messageId)?x._sendPacket(Q):i("messageId: %d has already used.",Q.messageId)):G.destroy&&G.destroy()}G.on("end",function(){let Q=!0;for(const re in x._packetIdsDuringStoreProcessing)if(!x._packetIdsDuringStoreProcessing[re]){Q=!1;break}Q?(oe(),x.removeListener("close",ne),x._invokeAllStoreProcessingQueue(),x.emit("connect",T)):D()}),K()}D()},Y.prototype._invokeStoreProcessingQueue=function(){if(this._storeProcessingQueue.length>0){const T=this._storeProcessingQueue[0];if(T&&T.invoke())return this._storeProcessingQueue.shift(),!0}return!1},Y.prototype._invokeAllStoreProcessingQueue=function(){for(;this._invokeStoreProcessingQueue(););},Y.prototype._flushStoreProcessingQueue=function(){for(const T of this._storeProcessingQueue)T.cbStorePut&&T.cbStorePut(new Error("Connection closed")),T.callback&&T.callback(new Error("Connection closed"));this._storeProcessingQueue.splice(0)},F.exports=Y}).call(this)}).call(this,I("_process"),typeof de<"u"?de:typeof self<"u"?self:typeof window<"u"?window:{})},{"./default-message-id-provider":7,"./store":8,"./topic-alias-recv":9,"./topic-alias-send":10,"./validations":11,_process:50,debug:18,events:22,inherits:24,"mqtt-packet":40,"readable-stream":69,reinterval:70,"rfdc/default":71,xtend:81}],2:[function(I,F,j){const{Buffer:w}=I("buffer"),g=I("readable-stream").Transform,p=I("duplexify");let h,s,t,r=!1;function e(){const d=new g;return d._write=function(u,i,v){h.sendSocketMessage({data:u.buffer,success:function(){v()},fail:function(){v(new Error)}})},d._flush=function(i){h.closeSocket({success:function(){i()}})},d}function n(d){d.hostname||(d.hostname="localhost"),d.path||(d.path="/"),d.wsOptions||(d.wsOptions={})}function f(d,u){const i=d.protocol==="alis"?"wss":"ws";let v=i+"://"+d.hostname+d.path;return d.port&&d.port!==80&&d.port!==443&&(v=i+"://"+d.hostname+":"+d.port+d.path),typeof d.transformWsUrl=="function"&&(v=d.transformWsUrl(v,d,u)),v}function o(){r||(r=!0,h.onSocketOpen(function(){t.setReadable(s),t.setWritable(s),t.emit("connect")}),h.onSocketMessage(function(d){if(typeof d.data=="string"){const u=w.from(d.data,"base64");s.push(u)}else{const u=new FileReader;u.addEventListener("load",function(){let i=u.result;i instanceof ArrayBuffer?i=w.from(i):i=w.from(i,"utf8"),s.push(i)}),u.readAsArrayBuffer(d.data)}}),h.onSocketClose(function(){t.end(),t.destroy()}),h.onSocketError(function(d){t.destroy(d)}))}function y(d,u){if(u.hostname=u.hostname||u.host,!u.hostname)throw new Error("Could not determine host. Specify host manually.");const i=u.protocolId==="MQIsdp"&&u.protocolVersion===3?"mqttv3.1":"mqtt";n(u);const v=f(u,d);return h=u.my,h.connectSocket({url:v,protocols:i}),s=e(),t=p.obj(),o(),t}F.exports=y},{buffer:17,duplexify:20,"readable-stream":69}],3:[function(I,F,j){const w=I("net"),g=I("debug")("mqttjs:tcp");function p(h,s){s.port=s.port||1883,s.hostname=s.hostname||s.host||"localhost";const t=s.port,r=s.hostname;return g("port %d and host %s",t,r),w.createConnection(t,r)}F.exports=p},{debug:18,net:16}],4:[function(I,F,j){const w=I("tls"),g=I("net"),p=I("debug")("mqttjs:tls");function h(s,t){t.port=t.port||8883,t.host=t.hostname||t.host||"localhost",g.isIP(t.host)===0&&(t.servername=t.host),t.rejectUnauthorized=t.rejectUnauthorized!==!1,delete t.path,p("port %d host %s rejectUnauthorized %b",t.port,t.host,t.rejectUnauthorized);const r=w.connect(t);r.on("secureConnect",function(){t.rejectUnauthorized&&!r.authorized?r.emit("error",new Error("TLS not authorized")):r.removeListener("error",e)});function e(n){t.rejectUnauthorized&&s.emit("error",n),r.end()}return r.on("error",e),r}F.exports=h},{debug:18,net:16,tls:16}],5:[function(I,F,j){(function(w){(function(){const{Buffer:g}=I("buffer"),p=I("ws"),h=I("debug")("mqttjs:ws"),s=I("duplexify"),t=I("readable-stream").Transform,r=["rejectUnauthorized","ca","cert","key","pfx","passphrase"],e=typeof w<"u"&&w.title==="browser"||typeof __webpack_require__=="function";function n(v,E){let k=v.protocol+"://"+v.hostname+":"+v.port+v.path;return typeof v.transformWsUrl=="function"&&(k=v.transformWsUrl(k,v,E)),k}function f(v){const E=v;return v.hostname||(E.hostname="localhost"),v.port||(v.protocol==="wss"?E.port=443:E.port=80),v.path||(E.path="/"),v.wsOptions||(E.wsOptions={}),!e&&v.protocol==="wss"&&r.forEach(function(k){Object.prototype.hasOwnProperty.call(v,k)&&!Object.prototype.hasOwnProperty.call(v.wsOptions,k)&&(E.wsOptions[k]=v[k])}),E}function o(v){const E=f(v);if(E.hostname||(E.hostname=E.host),!E.hostname){if(typeof document>"u")throw new Error("Could not determine host. Specify host manually.");const k=new URL(document.URL);E.hostname=k.hostname,E.port||(E.port=k.port)}return E.objectMode===void 0&&(E.objectMode=!(E.binary===!0||E.binary===void 0)),E}function y(v,E,k){h("createWebSocket"),h("protocol: "+k.protocolId+" "+k.protocolVersion);const P=k.protocolId==="MQIsdp"&&k.protocolVersion===3?"mqttv3.1":"mqtt";return h("creating new Websocket for url: "+E+" and protocol: "+P),new p(E,[P],k.wsOptions)}function d(v,E){const k=E.protocolId==="MQIsdp"&&E.protocolVersion===3?"mqttv3.1":"mqtt",P=n(E,v),L=new WebSocket(P,[k]);return L.binaryType="arraybuffer",L}function u(v,E){h("streamBuilder");const k=f(E),P=n(k,v),L=y(v,P,k),R=p.createWebSocketStream(L,k.wsOptions);return R.url=P,L.on("close",()=>{R.destroy()}),R}function i(v,E){h("browserStreamBuilder");let k;const L=o(E).browserBufferSize||1024*512,R=E.browserBufferTimeout||1e3,q=!E.objectMode,l=d(v,E),_=B(E,D,G);E.objectMode||(_._writev=x),_.on("close",()=>{l.close()});const b=typeof l.addEventListener<"u";l.readyState===l.OPEN?k=_:(k=k=s(void 0,void 0,E),E.objectMode||(k._writev=x),b?l.addEventListener("open",V):l.onopen=V),k.socket=l,b?(l.addEventListener("close",W),l.addEventListener("error",Y),l.addEventListener("message",T)):(l.onclose=W,l.onerror=Y,l.onmessage=T);function B(oe,ne,K){const Q=new t({objectModeMode:oe.objectMode});return Q._write=ne,Q._flush=K,Q}function V(){k.setReadable(_),k.setWritable(_),k.emit("connect")}function W(){k.end(),k.destroy()}function Y(oe){k.destroy(oe)}function T(oe){let ne=oe.data;ne instanceof ArrayBuffer?ne=g.from(ne):ne=g.from(ne,"utf8"),_.push(ne)}function x(oe,ne){const K=new Array(oe.length);for(let Q=0;Q<oe.length;Q++)typeof oe[Q].chunk=="string"?K[Q]=g.from(oe[Q],"utf8"):K[Q]=oe[Q].chunk;this._write(g.concat(K),"binary",ne)}function D(oe,ne,K){l.bufferedAmount>L&&setTimeout(D,R,oe,ne,K),q&&typeof oe=="string"&&(oe=g.from(oe,"utf8"));try{l.send(oe)}catch(Q){return K(Q)}K()}function G(oe){l.close(),oe()}return k}e?F.exports=i:F.exports=u}).call(this)}).call(this,I("_process"))},{_process:50,buffer:17,debug:18,duplexify:20,"readable-stream":69,ws:80}],6:[function(I,F,j){const{Buffer:w}=I("buffer"),g=I("readable-stream").Transform,p=I("duplexify");let h,s,t;function r(){const y=new g;return y._write=function(d,u,i){h.send({data:d.buffer,success:function(){i()},fail:function(v){i(new Error(v))}})},y._flush=function(u){h.close({success:function(){u()}})},y}function e(y){y.hostname||(y.hostname="localhost"),y.path||(y.path="/"),y.wsOptions||(y.wsOptions={})}function n(y,d){const u=y.protocol==="wxs"?"wss":"ws";let i=u+"://"+y.hostname+y.path;return y.port&&y.port!==80&&y.port!==443&&(i=u+"://"+y.hostname+":"+y.port+y.path),typeof y.transformWsUrl=="function"&&(i=y.transformWsUrl(i,y,d)),i}function f(){h.onOpen(function(){t.setReadable(s),t.setWritable(s),t.emit("connect")}),h.onMessage(function(y){let d=y.data;d instanceof ArrayBuffer?d=w.from(d):d=w.from(d,"utf8"),s.push(d)}),h.onClose(function(){t.end(),t.destroy()}),h.onError(function(y){t.destroy(new Error(y.errMsg))})}function o(y,d){if(d.hostname=d.hostname||d.host,!d.hostname)throw new Error("Could not determine host. Specify host manually.");const u=d.protocolId==="MQIsdp"&&d.protocolVersion===3?"mqttv3.1":"mqtt";e(d);const i=n(d,y);h=wx.connectSocket({url:i,protocols:[u]}),s=r(),t=p.obj(),t._destroy=function(E,k){h.close({success:function(){k&&k(E)}})};const v=t.destroy;return t.destroy=(function(){t.destroy=v;const E=this;setTimeout(function(){h.close({fail:function(){E._destroy(new Error)}})},0)}).bind(t),f(),t}F.exports=o},{buffer:17,duplexify:20,"readable-stream":69}],7:[function(I,F,j){function w(){if(!(this instanceof w))return new w;this.nextId=Math.max(1,Math.floor(Math.random()*65535))}w.prototype.allocate=function(){const g=this.nextId++;return this.nextId===65536&&(this.nextId=1),g},w.prototype.getLastAllocated=function(){return this.nextId===1?65535:this.nextId-1},w.prototype.register=function(g){return!0},w.prototype.deallocate=function(g){},w.prototype.clear=function(){},F.exports=w},{}],8:[function(I,F,j){const w=I("xtend"),g=I("readable-stream").Readable,p={objectMode:!0},h={clean:!0};function s(t){if(!(this instanceof s))return new s(t);this.options=t||{},this.options=w(h,t),this._inflights=new Map}s.prototype.put=function(t,r){return this._inflights.set(t.messageId,t),r&&r(),this},s.prototype.createStream=function(){const t=new g(p),r=[];let e=!1,n=0;return this._inflights.forEach(function(f,o){r.push(f)}),t._read=function(){!e&&n<r.length?this.push(r[n++]):this.push(null)},t.destroy=function(){if(e)return;const f=this;e=!0,setTimeout(function(){f.emit("close")},0)},t},s.prototype.del=function(t,r){return t=this._inflights.get(t.messageId),t?(this._inflights.delete(t.messageId),r(null,t)):r&&r(new Error("missing packet")),this},s.prototype.get=function(t,r){return t=this._inflights.get(t.messageId),t?r(null,t):r&&r(new Error("missing packet")),this},s.prototype.close=function(t){this.options.clean&&(this._inflights=null),t&&t()},F.exports=s},{"readable-stream":69,xtend:81}],9:[function(I,F,j){function w(g){if(!(this instanceof w))return new w(g);this.aliasToTopic={},this.max=g}w.prototype.put=function(g,p){return p===0||p>this.max?!1:(this.aliasToTopic[p]=g,this.length=Object.keys(this.aliasToTopic).length,!0)},w.prototype.getTopicByAlias=function(g){return this.aliasToTopic[g]},w.prototype.clear=function(){this.aliasToTopic={}},F.exports=w},{}],10:[function(I,F,j){const w=I("lru-cache"),g=I("number-allocator").NumberAllocator;function p(h){if(!(this instanceof p))return new p(h);h>0&&(this.aliasToTopic=new w({max:h}),this.topicToAlias={},this.numberAllocator=new g(1,h),this.max=h,this.length=0)}p.prototype.put=function(h,s){if(s===0||s>this.max)return!1;const t=this.aliasToTopic.get(s);return t&&delete this.topicToAlias[t],this.aliasToTopic.set(s,h),this.topicToAlias[h]=s,this.numberAllocator.use(s),this.length=this.aliasToTopic.length,!0},p.prototype.getTopicByAlias=function(h){return this.aliasToTopic.get(h)},p.prototype.getAliasByTopic=function(h){const s=this.topicToAlias[h];return typeof s<"u"&&this.aliasToTopic.get(s),s},p.prototype.clear=function(){this.aliasToTopic.reset(),this.topicToAlias={},this.numberAllocator.clear(),this.length=0},p.prototype.getLruAlias=function(){const h=this.numberAllocator.firstVacant();return h||this.aliasToTopic.keys()[this.aliasToTopic.length-1]},F.exports=p},{"lru-cache":37,"number-allocator":46}],11:[function(I,F,j){function w(p){const h=p.split("/");for(let s=0;s<h.length;s++)if(h[s]!=="+"){if(h[s]==="#")return s===h.length-1;if(h[s].indexOf("+")!==-1||h[s].indexOf("#")!==-1)return!1}return!0}function g(p){if(p.length===0)return"empty_topic_list";for(let h=0;h<p.length;h++)if(!w(p[h]))return p[h];return null}F.exports={validateTopics:g}},{}],12:[function(I,F,j){(function(w){(function(){const g=I("../client"),p=I("../store"),h=I("url"),s=I("xtend"),t=I("debug")("mqttjs"),r={};typeof w<"u"&&w.title!=="browser"||typeof __webpack_require__!="function"?(r.mqtt=I("./tcp"),r.tcp=I("./tcp"),r.ssl=I("./tls"),r.tls=I("./tls"),r.mqtts=I("./tls")):(r.wx=I("./wx"),r.wxs=I("./wx"),r.ali=I("./ali"),r.alis=I("./ali")),r.ws=I("./ws"),r.wss=I("./ws");function e(f){let o;f.auth&&(o=f.auth.match(/^(.+):(.+)$/),o?(f.username=o[1],f.password=o[2]):f.username=f.auth)}function n(f,o){if(t("connecting to an MQTT broker..."),typeof f=="object"&&!o&&(o=f,f=null),o=o||{},f){const u=h.parse(f,!0);if(u.port!=null&&(u.port=Number(u.port)),o=s(u,o),o.protocol===null)throw new Error("Missing protocol");o.protocol=o.protocol.replace(/:$/,"")}if(e(o),o.query&&typeof o.query.clientId=="string"&&(o.clientId=o.query.clientId),o.cert&&o.key)if(o.protocol){if(["mqtts","wss","wxs","alis"].indexOf(o.protocol)===-1)switch(o.protocol){case"mqtt":o.protocol="mqtts";break;case"ws":o.protocol="wss";break;case"wx":o.protocol="wxs";break;case"ali":o.protocol="alis";break;default:throw new Error('Unknown protocol for secure connection: "'+o.protocol+'"!')}}else throw new Error("Missing secure protocol key");if(!r[o.protocol]){const u=["mqtts","wss"].indexOf(o.protocol)!==-1;o.protocol=["mqtt","mqtts","ws","wss","wx","wxs","ali","alis"].filter(function(i,v){return u&&v%2===0?!1:typeof r[i]=="function"})[0]}if(o.clean===!1&&!o.clientId)throw new Error("Missing clientId for unclean clients");o.protocol&&(o.defaultProtocol=o.protocol);function y(u){return o.servers&&((!u._reconnectCount||u._reconnectCount===o.servers.length)&&(u._reconnectCount=0),o.host=o.servers[u._reconnectCount].host,o.port=o.servers[u._reconnectCount].port,o.protocol=o.servers[u._reconnectCount].protocol?o.servers[u._reconnectCount].protocol:o.defaultProtocol,o.hostname=o.host,u._reconnectCount++),t("calling streambuilder for",o.protocol),r[o.protocol](u,o)}const d=new g(y,o);return d.on("error",function(){}),d}F.exports=n,F.exports.connect=n,F.exports.MqttClient=g,F.exports.Store=p}).call(this)}).call(this,I("_process"))},{"../client":1,"../store":8,"./ali":2,"./tcp":3,"./tls":4,"./ws":5,"./wx":6,_process:50,debug:18,url:76,xtend:81}],13:[function(I,F,j){j.byteLength=e,j.toByteArray=f,j.fromByteArray=d;for(var w=[],g=[],p=typeof Uint8Array<"u"?Uint8Array:Array,h="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0,t=h.length;s<t;++s)w[s]=h[s],g[h.charCodeAt(s)]=s;g[45]=62,g[95]=63;function r(u){var i=u.length;if(i%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var v=u.indexOf("=");v===-1&&(v=i);var E=v===i?0:4-v%4;return[v,E]}function e(u){var i=r(u),v=i[0],E=i[1];return(v+E)*3/4-E}function n(u,i,v){return(i+v)*3/4-v}function f(u){var i,v=r(u),E=v[0],k=v[1],P=new p(n(u,E,k)),L=0,R=k>0?E-4:E,q;for(q=0;q<R;q+=4)i=g[u.charCodeAt(q)]<<18|g[u.charCodeAt(q+1)]<<12|g[u.charCodeAt(q+2)]<<6|g[u.charCodeAt(q+3)],P[L++]=i>>16&255,P[L++]=i>>8&255,P[L++]=i&255;return k===2&&(i=g[u.charCodeAt(q)]<<2|g[u.charCodeAt(q+1)]>>4,P[L++]=i&255),k===1&&(i=g[u.charCodeAt(q)]<<10|g[u.charCodeAt(q+1)]<<4|g[u.charCodeAt(q+2)]>>2,P[L++]=i>>8&255,P[L++]=i&255),P}function o(u){return w[u>>18&63]+w[u>>12&63]+w[u>>6&63]+w[u&63]}function y(u,i,v){for(var E,k=[],P=i;P<v;P+=3)E=(u[P]<<16&16711680)+(u[P+1]<<8&65280)+(u[P+2]&255),k.push(o(E));return k.join("")}function d(u){for(var i,v=u.length,E=v%3,k=[],P=16383,L=0,R=v-E;L<R;L+=P)k.push(y(u,L,L+P>R?R:L+P));return E===1?(i=u[v-1],k.push(w[i>>2]+w[i<<4&63]+"==")):E===2&&(i=(u[v-2]<<8)+u[v-1],k.push(w[i>>10]+w[i>>4&63]+w[i<<2&63]+"=")),k.join("")}},{}],14:[function(I,F,j){const{Buffer:w}=I("buffer"),g=Symbol.for("BufferList");function p(h){if(!(this instanceof p))return new p(h);p._init.call(this,h)}p._init=function(s){Object.defineProperty(this,g,{value:!0}),this._bufs=[],this.length=0,s&&this.append(s)},p.prototype._new=function(s){return new p(s)},p.prototype._offset=function(s){if(s===0)return[0,0];let t=0;for(let r=0;r<this._bufs.length;r++){const e=t+this._bufs[r].length;if(s<e||r===this._bufs.length-1)return[r,s-t];t=e}},p.prototype._reverseOffset=function(h){const s=h[0];let t=h[1];for(let r=0;r<s;r++)t+=this._bufs[r].length;return t},p.prototype.get=function(s){if(s>this.length||s<0)return;const t=this._offset(s);return this._bufs[t[0]][t[1]]},p.prototype.slice=function(s,t){return typeof s=="number"&&s<0&&(s+=this.length),typeof t=="number"&&t<0&&(t+=this.length),this.copy(null,0,s,t)},p.prototype.copy=function(s,t,r,e){if((typeof r!="number"||r<0)&&(r=0),(typeof e!="number"||e>this.length)&&(e=this.length),r>=this.length||e<=0)return s||w.alloc(0);const n=!!s,f=this._offset(r),o=e-r;let y=o,d=n&&t||0,u=f[1];if(r===0&&e===this.length){if(!n)return this._bufs.length===1?this._bufs[0]:w.concat(this._bufs,this.length);for(let i=0;i<this._bufs.length;i++)this._bufs[i].copy(s,d),d+=this._bufs[i].length;return s}if(y<=this._bufs[f[0]].length-u)return n?this._bufs[f[0]].copy(s,t,u,u+y):this._bufs[f[0]].slice(u,u+y);n||(s=w.allocUnsafe(o));for(let i=f[0];i<this._bufs.length;i++){const v=this._bufs[i].length-u;if(y>v)this._bufs[i].copy(s,d,u),d+=v;else{this._bufs[i].copy(s,d,u,u+y),d+=v;break}y-=v,u&&(u=0)}return s.length>d?s.slice(0,d):s},p.prototype.shallowSlice=function(s,t){if(s=s||0,t=typeof t!="number"?this.length:t,s<0&&(s+=this.length),t<0&&(t+=this.length),s===t)return this._new();const r=this._offset(s),e=this._offset(t),n=this._bufs.slice(r[0],e[0]+1);return e[1]===0?n.pop():n[n.length-1]=n[n.length-1].slice(0,e[1]),r[1]!==0&&(n[0]=n[0].slice(r[1])),this._new(n)},p.prototype.toString=function(s,t,r){return this.slice(t,r).toString(s)},p.prototype.consume=function(s){if(s=Math.trunc(s),Number.isNaN(s)||s<=0)return this;for(;this._bufs.length;)if(s>=this._bufs[0].length)s-=this._bufs[0].length,this.length-=this._bufs[0].length,this._bufs.shift();else{this._bufs[0]=this._bufs[0].slice(s),this.length-=s;break}return this},p.prototype.duplicate=function(){const s=this._new();for(let t=0;t<this._bufs.length;t++)s.append(this._bufs[t]);return s},p.prototype.append=function(s){if(s==null)return this;if(s.buffer)this._appendBuffer(w.from(s.buffer,s.byteOffset,s.byteLength));else if(Array.isArray(s))for(let t=0;t<s.length;t++)this.append(s[t]);else if(this._isBufferList(s))for(let t=0;t<s._bufs.length;t++)this.append(s._bufs[t]);else typeof s=="number"&&(s=s.toString()),this._appendBuffer(w.from(s));return this},p.prototype._appendBuffer=function(s){this._bufs.push(s),this.length+=s.length},p.prototype.indexOf=function(h,s,t){if(t===void 0&&typeof s=="string"&&(t=s,s=void 0),typeof h=="function"||Array.isArray(h))throw new TypeError('The "value" argument must be one of type string, Buffer, BufferList, or Uint8Array.');if(typeof h=="number"?h=w.from([h]):typeof h=="string"?h=w.from(h,t):this._isBufferList(h)?h=h.slice():Array.isArray(h.buffer)?h=w.from(h.buffer,h.byteOffset,h.byteLength):w.isBuffer(h)||(h=w.from(h)),s=Number(s||0),isNaN(s)&&(s=0),s<0&&(s=this.length+s),s<0&&(s=0),h.length===0)return s>this.length?this.length:s;const r=this._offset(s);let e=r[0],n=r[1];for(;e<this._bufs.length;e++){const f=this._bufs[e];for(;n<f.length;)if(f.length-n>=h.length){const y=f.indexOf(h,n);if(y!==-1)return this._reverseOffset([e,y]);n=f.length-h.length+1}else{const y=this._reverseOffset([e,n]);if(this._match(y,h))return y;n++}n=0}return-1},p.prototype._match=function(h,s){if(this.length-h<s.length)return!1;for(let t=0;t<s.length;t++)if(this.get(h+t)!==s[t])return!1;return!0},function(){const h={readDoubleBE:8,readDoubleLE:8,readFloatBE:4,readFloatLE:4,readInt32BE:4,readInt32LE:4,readUInt32BE:4,readUInt32LE:4,readInt16BE:2,readInt16LE:2,readUInt16BE:2,readUInt16LE:2,readInt8:1,readUInt8:1,readIntBE:null,readIntLE:null,readUIntBE:null,readUIntLE:null};for(const s in h)(function(t){h[t]===null?p.prototype[t]=function(r,e){return this.slice(r,r+e)[t](0,e)}:p.prototype[t]=function(r=0){return this.slice(r,r+h[t])[t](0)}})(s)}(),p.prototype._isBufferList=function(s){return s instanceof p||p.isBufferList(s)},p.isBufferList=function(s){return s!=null&&s[g]},F.exports=p},{buffer:17}],15:[function(I,F,j){const w=I("readable-stream").Duplex,g=I("inherits"),p=I("./BufferList");function h(s){if(!(this instanceof h))return new h(s);if(typeof s=="function"){this._callback=s;const t=(function(e){this._callback&&(this._callback(e),this._callback=null)}).bind(this);this.on("pipe",function(e){e.on("error",t)}),this.on("unpipe",function(e){e.removeListener("error",t)}),s=null}p._init.call(this,s),w.call(this)}g(h,w),Object.assign(h.prototype,p.prototype),h.prototype._new=function(t){return new h(t)},h.prototype._write=function(t,r,e){this._appendBuffer(t),typeof e=="function"&&e()},h.prototype._read=function(t){if(!this.length)return this.push(null);t=Math.min(t,this.length),this.push(this.slice(0,t)),this.consume(t)},h.prototype.end=function(t){w.prototype.end.call(this,t),this._callback&&(this._callback(null,this.slice()),this._callback=null)},h.prototype._destroy=function(t,r){this._bufs.length=0,this.length=0,r(t)},h.prototype._isBufferList=function(t){return t instanceof h||t instanceof p||h.isBufferList(t)},h.isBufferList=p.isBufferList,F.exports=h,F.exports.BufferListStream=h,F.exports.BufferList=p},{"./BufferList":14,inherits:24,"readable-stream":69}],16:[function(I,F,j){},{}],17:[function(I,F,j){(function(w){(function(){var g=I("base64-js"),p=I("ieee754");j.Buffer=r,j.SlowBuffer=E,j.INSPECT_MAX_BYTES=50;var h=2147483647;j.kMaxLength=h,r.TYPED_ARRAY_SUPPORT=s(),!r.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function s(){try{var m=new Uint8Array(1);return m.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},m.foo()===42}catch{return!1}}Object.defineProperty(r.prototype,"parent",{enumerable:!0,get:function(){if(r.isBuffer(this))return this.buffer}}),Object.defineProperty(r.prototype,"offset",{enumerable:!0,get:function(){if(r.isBuffer(this))return this.byteOffset}});function t(m){if(m>h)throw new RangeError('The value "'+m+'" is invalid for option "size"');var a=new Uint8Array(m);return a.__proto__=r.prototype,a}function r(m,a,c){if(typeof m=="number"){if(typeof a=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return o(m)}return e(m,a,c)}typeof Symbol<"u"&&Symbol.species!=null&&r[Symbol.species]===r&&Object.defineProperty(r,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),r.poolSize=8192;function e(m,a,c){if(typeof m=="string")return y(m,a);if(ArrayBuffer.isView(m))return d(m);if(m==null)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof m);if(S(m,ArrayBuffer)||m&&S(m.buffer,ArrayBuffer))return u(m,a,c);if(typeof m=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');var C=m.valueOf&&m.valueOf();if(C!=null&&C!==m)return r.from(C,a,c);var N=i(m);if(N)return N;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof m[Symbol.toPrimitive]=="function")return r.from(m[Symbol.toPrimitive]("string"),a,c);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof m)}r.from=function(m,a,c){return e(m,a,c)},r.prototype.__proto__=Uint8Array.prototype,r.__proto__=Uint8Array;function n(m){if(typeof m!="number")throw new TypeError('"size" argument must be of type number');if(m<0)throw new RangeError('The value "'+m+'" is invalid for option "size"')}function f(m,a,c){return n(m),m<=0?t(m):a!==void 0?typeof c=="string"?t(m).fill(a,c):t(m).fill(a):t(m)}r.alloc=function(m,a,c){return f(m,a,c)};function o(m){return n(m),t(m<0?0:v(m)|0)}r.allocUnsafe=function(m){return o(m)},r.allocUnsafeSlow=function(m){return o(m)};function y(m,a){if((typeof a!="string"||a==="")&&(a="utf8"),!r.isEncoding(a))throw new TypeError("Unknown encoding: "+a);var c=k(m,a)|0,C=t(c),N=C.write(m,a);return N!==c&&(C=C.slice(0,N)),C}function d(m){for(var a=m.length<0?0:v(m.length)|0,c=t(a),C=0;C<a;C+=1)c[C]=m[C]&255;return c}function u(m,a,c){if(a<0||m.byteLength<a)throw new RangeError('"offset" is outside of buffer bounds');if(m.byteLength<a+(c||0))throw new RangeError('"length" is outside of buffer bounds');var C;return a===void 0&&c===void 0?C=new Uint8Array(m):c===void 0?C=new Uint8Array(m,a):C=new Uint8Array(m,a,c),C.__proto__=r.prototype,C}function i(m){if(r.isBuffer(m)){var a=v(m.length)|0,c=t(a);return c.length===0||m.copy(c,0,0,a),c}if(m.length!==void 0)return typeof m.length!="number"||A(m.length)?t(0):d(m);if(m.type==="Buffer"&&Array.isArray(m.data))return d(m.data)}function v(m){if(m>=h)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+h.toString(16)+" bytes");return m|0}function E(m){return+m!=m&&(m=0),r.alloc(+m)}r.isBuffer=function(a){return a!=null&&a._isBuffer===!0&&a!==r.prototype},r.compare=function(a,c){if(S(a,Uint8Array)&&(a=r.from(a,a.offset,a.byteLength)),S(c,Uint8Array)&&(c=r.from(c,c.offset,c.byteLength)),!r.isBuffer(a)||!r.isBuffer(c))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(a===c)return 0;for(var C=a.length,N=c.length,J=0,te=Math.min(C,N);J<te;++J)if(a[J]!==c[J]){C=a[J],N=c[J];break}return C<N?-1:N<C?1:0},r.isEncoding=function(a){switch(String(a).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},r.concat=function(a,c){if(!Array.isArray(a))throw new TypeError('"list" argument must be an Array of Buffers');if(a.length===0)return r.alloc(0);var C;if(c===void 0)for(c=0,C=0;C<a.length;++C)c+=a[C].length;var N=r.allocUnsafe(c),J=0;for(C=0;C<a.length;++C){var te=a[C];if(S(te,Uint8Array)&&(te=r.from(te)),!r.isBuffer(te))throw new TypeError('"list" argument must be an Array of Buffers');te.copy(N,J),J+=te.length}return N};function k(m,a){if(r.isBuffer(m))return m.length;if(ArrayBuffer.isView(m)||S(m,ArrayBuffer))return m.byteLength;if(typeof m!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof m);var c=m.length,C=arguments.length>2&&arguments[2]===!0;if(!C&&c===0)return 0;for(var N=!1;;)switch(a){case"ascii":case"latin1":case"binary":return c;case"utf8":case"utf-8":return O(m).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return c*2;case"hex":return c>>>1;case"base64":return $(m).length;default:if(N)return C?-1:O(m).length;a=(""+a).toLowerCase(),N=!0}}r.byteLength=k;function P(m,a,c){var C=!1;if((a===void 0||a<0)&&(a=0),a>this.length||((c===void 0||c>this.length)&&(c=this.length),c<=0)||(c>>>=0,a>>>=0,c<=a))return"";for(m||(m="utf8");;)switch(m){case"hex":return ne(this,a,c);case"utf8":case"utf-8":return T(this,a,c);case"ascii":return G(this,a,c);case"latin1":case"binary":return oe(this,a,c);case"base64":return Y(this,a,c);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return K(this,a,c);default:if(C)throw new TypeError("Unknown encoding: "+m);m=(m+"").toLowerCase(),C=!0}}r.prototype._isBuffer=!0;function L(m,a,c){var C=m[a];m[a]=m[c],m[c]=C}r.prototype.swap16=function(){var a=this.length;if(a%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var c=0;c<a;c+=2)L(this,c,c+1);return this},r.prototype.swap32=function(){var a=this.length;if(a%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var c=0;c<a;c+=4)L(this,c,c+3),L(this,c+1,c+2);return this},r.prototype.swap64=function(){var a=this.length;if(a%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var c=0;c<a;c+=8)L(this,c,c+7),L(this,c+1,c+6),L(this,c+2,c+5),L(this,c+3,c+4);return this},r.prototype.toString=function(){var a=this.length;return a===0?"":arguments.length===0?T(this,0,a):P.apply(this,arguments)},r.prototype.toLocaleString=r.prototype.toString,r.prototype.equals=function(a){if(!r.isBuffer(a))throw new TypeError("Argument must be a Buffer");return this===a?!0:r.compare(this,a)===0},r.prototype.inspect=function(){var a="",c=j.INSPECT_MAX_BYTES;return a=this.toString("hex",0,c).replace(/(.{2})/g,"$1 ").trim(),this.length>c&&(a+=" ... "),"<Buffer "+a+">"},r.prototype.compare=function(a,c,C,N,J){if(S(a,Uint8Array)&&(a=r.from(a,a.offset,a.byteLength)),!r.isBuffer(a))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof a);if(c===void 0&&(c=0),C===void 0&&(C=a?a.length:0),N===void 0&&(N=0),J===void 0&&(J=this.length),c<0||C>a.length||N<0||J>this.length)throw new RangeError("out of range index");if(N>=J&&c>=C)return 0;if(N>=J)return-1;if(c>=C)return 1;if(c>>>=0,C>>>=0,N>>>=0,J>>>=0,this===a)return 0;for(var te=J-N,ae=C-c,fe=Math.min(te,ae),ce=this.slice(N,J),pe=a.slice(c,C),he=0;he<fe;++he)if(ce[he]!==pe[he]){te=ce[he],ae=pe[he];break}return te<ae?-1:ae<te?1:0};function R(m,a,c,C,N){if(m.length===0)return-1;if(typeof c=="string"?(C=c,c=0):c>2147483647?c=2147483647:c<-2147483648&&(c=-2147483648),c=+c,A(c)&&(c=N?0:m.length-1),c<0&&(c=m.length+c),c>=m.length){if(N)return-1;c=m.length-1}else if(c<0)if(N)c=0;else return-1;if(typeof a=="string"&&(a=r.from(a,C)),r.isBuffer(a))return a.length===0?-1:q(m,a,c,C,N);if(typeof a=="number")return a=a&255,typeof Uint8Array.prototype.indexOf=="function"?N?Uint8Array.prototype.indexOf.call(m,a,c):Uint8Array.prototype.lastIndexOf.call(m,a,c):q(m,[a],c,C,N);throw new TypeError("val must be string, number or Buffer")}function q(m,a,c,C,N){var J=1,te=m.length,ae=a.length;if(C!==void 0&&(C=String(C).toLowerCase(),C==="ucs2"||C==="ucs-2"||C==="utf16le"||C==="utf-16le")){if(m.length<2||a.length<2)return-1;J=2,te/=2,ae/=2,c/=2}function fe(ve,ye){return J===1?ve[ye]:ve.readUInt16BE(ye*J)}var ce;if(N){var pe=-1;for(ce=c;ce<te;ce++)if(fe(m,ce)===fe(a,pe===-1?0:ce-pe)){if(pe===-1&&(pe=ce),ce-pe+1===ae)return pe*J}else pe!==-1&&(ce-=ce-pe),pe=-1}else for(c+ae>te&&(c=te-ae),ce=c;ce>=0;ce--){for(var he=!0,ge=0;ge<ae;ge++)if(fe(m,ce+ge)!==fe(a,ge)){he=!1;break}if(he)return ce}return-1}r.prototype.includes=function(a,c,C){return this.indexOf(a,c,C)!==-1},r.prototype.indexOf=function(a,c,C){return R(this,a,c,C,!0)},r.prototype.lastIndexOf=function(a,c,C){return R(this,a,c,C,!1)};function l(m,a,c,C){c=Number(c)||0;var N=m.length-c;C?(C=Number(C),C>N&&(C=N)):C=N;var J=a.length;C>J/2&&(C=J/2);for(var te=0;te<C;++te){var ae=parseInt(a.substr(te*2,2),16);if(A(ae))return te;m[c+te]=ae}return te}function _(m,a,c,C){return X(O(a,m.length-c),m,c,C)}function b(m,a,c,C){return X(M(a),m,c,C)}function B(m,a,c,C){return b(m,a,c,C)}function V(m,a,c,C){return X($(a),m,c,C)}function W(m,a,c,C){return X(z(a,m.length-c),m,c,C)}r.prototype.write=function(a,c,C,N){if(c===void 0)N="utf8",C=this.length,c=0;else if(C===void 0&&typeof c=="string")N=c,C=this.length,c=0;else if(isFinite(c))c=c>>>0,isFinite(C)?(C=C>>>0,N===void 0&&(N="utf8")):(N=C,C=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var J=this.length-c;if((C===void 0||C>J)&&(C=J),a.length>0&&(C<0||c<0)||c>this.length)throw new RangeError("Attempt to write outside buffer bounds");N||(N="utf8");for(var te=!1;;)switch(N){case"hex":return l(this,a,c,C);case"utf8":case"utf-8":return _(this,a,c,C);case"ascii":return b(this,a,c,C);case"latin1":case"binary":return B(this,a,c,C);case"base64":return V(this,a,c,C);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return W(this,a,c,C);default:if(te)throw new TypeError("Unknown encoding: "+N);N=(""+N).toLowerCase(),te=!0}},r.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function Y(m,a,c){return a===0&&c===m.length?g.fromByteArray(m):g.fromByteArray(m.slice(a,c))}function T(m,a,c){c=Math.min(m.length,c);for(var C=[],N=a;N<c;){var J=m[N],te=null,ae=J>239?4:J>223?3:J>191?2:1;if(N+ae<=c){var fe,ce,pe,he;switch(ae){case 1:J<128&&(te=J);break;case 2:fe=m[N+1],(fe&192)===128&&(he=(J&31)<<6|fe&63,he>127&&(te=he));break;case 3:fe=m[N+1],ce=m[N+2],(fe&192)===128&&(ce&192)===128&&(he=(J&15)<<12|(fe&63)<<6|ce&63,he>2047&&(he<55296||he>57343)&&(te=he));break;case 4:fe=m[N+1],ce=m[N+2],pe=m[N+3],(fe&192)===128&&(ce&192)===128&&(pe&192)===128&&(he=(J&15)<<18|(fe&63)<<12|(ce&63)<<6|pe&63,he>65535&&he<1114112&&(te=he))}}te===null?(te=65533,ae=1):te>65535&&(te-=65536,C.push(te>>>10&1023|55296),te=56320|te&1023),C.push(te),N+=ae}return D(C)}var x=4096;function D(m){var a=m.length;if(a<=x)return String.fromCharCode.apply(String,m);for(var c="",C=0;C<a;)c+=String.fromCharCode.apply(String,m.slice(C,C+=x));return c}function G(m,a,c){var C="";c=Math.min(m.length,c);for(var N=a;N<c;++N)C+=String.fromCharCode(m[N]&127);return C}function oe(m,a,c){var C="";c=Math.min(m.length,c);for(var N=a;N<c;++N)C+=String.fromCharCode(m[N]);return C}function ne(m,a,c){var C=m.length;(!a||a<0)&&(a=0),(!c||c<0||c>C)&&(c=C);for(var N="",J=a;J<c;++J)N+=Z(m[J]);return N}function K(m,a,c){for(var C=m.slice(a,c),N="",J=0;J<C.length;J+=2)N+=String.fromCharCode(C[J]+C[J+1]*256);return N}r.prototype.slice=function(a,c){var C=this.length;a=~~a,c=c===void 0?C:~~c,a<0?(a+=C,a<0&&(a=0)):a>C&&(a=C),c<0?(c+=C,c<0&&(c=0)):c>C&&(c=C),c<a&&(c=a);var N=this.subarray(a,c);return N.__proto__=r.prototype,N};function Q(m,a,c){if(m%1!==0||m<0)throw new RangeError("offset is not uint");if(m+a>c)throw new RangeError("Trying to access beyond buffer length")}r.prototype.readUIntLE=function(a,c,C){a=a>>>0,c=c>>>0,C||Q(a,c,this.length);for(var N=this[a],J=1,te=0;++te<c&&(J*=256);)N+=this[a+te]*J;return N},r.prototype.readUIntBE=function(a,c,C){a=a>>>0,c=c>>>0,C||Q(a,c,this.length);for(var N=this[a+--c],J=1;c>0&&(J*=256);)N+=this[a+--c]*J;return N},r.prototype.readUInt8=function(a,c){return a=a>>>0,c||Q(a,1,this.length),this[a]},r.prototype.readUInt16LE=function(a,c){return a=a>>>0,c||Q(a,2,this.length),this[a]|this[a+1]<<8},r.prototype.readUInt16BE=function(a,c){return a=a>>>0,c||Q(a,2,this.length),this[a]<<8|this[a+1]},r.prototype.readUInt32LE=function(a,c){return a=a>>>0,c||Q(a,4,this.length),(this[a]|this[a+1]<<8|this[a+2]<<16)+this[a+3]*16777216},r.prototype.readUInt32BE=function(a,c){return a=a>>>0,c||Q(a,4,this.length),this[a]*16777216+(this[a+1]<<16|this[a+2]<<8|this[a+3])},r.prototype.readIntLE=function(a,c,C){a=a>>>0,c=c>>>0,C||Q(a,c,this.length);for(var N=this[a],J=1,te=0;++te<c&&(J*=256);)N+=this[a+te]*J;return J*=128,N>=J&&(N-=Math.pow(2,8*c)),N},r.prototype.readIntBE=function(a,c,C){a=a>>>0,c=c>>>0,C||Q(a,c,this.length);for(var N=c,J=1,te=this[a+--N];N>0&&(J*=256);)te+=this[a+--N]*J;return J*=128,te>=J&&(te-=Math.pow(2,8*c)),te},r.prototype.readInt8=function(a,c){return a=a>>>0,c||Q(a,1,this.length),this[a]&128?(255-this[a]+1)*-1:this[a]},r.prototype.readInt16LE=function(a,c){a=a>>>0,c||Q(a,2,this.length);var C=this[a]|this[a+1]<<8;return C&32768?C|4294901760:C},r.prototype.readInt16BE=function(a,c){a=a>>>0,c||Q(a,2,this.length);var C=this[a+1]|this[a]<<8;return C&32768?C|4294901760:C},r.prototype.readInt32LE=function(a,c){return a=a>>>0,c||Q(a,4,this.length),this[a]|this[a+1]<<8|this[a+2]<<16|this[a+3]<<24},r.prototype.readInt32BE=function(a,c){return a=a>>>0,c||Q(a,4,this.length),this[a]<<24|this[a+1]<<16|this[a+2]<<8|this[a+3]},r.prototype.readFloatLE=function(a,c){return a=a>>>0,c||Q(a,4,this.length),p.read(this,a,!0,23,4)},r.prototype.readFloatBE=function(a,c){return a=a>>>0,c||Q(a,4,this.length),p.read(this,a,!1,23,4)},r.prototype.readDoubleLE=function(a,c){return a=a>>>0,c||Q(a,8,this.length),p.read(this,a,!0,52,8)},r.prototype.readDoubleBE=function(a,c){return a=a>>>0,c||Q(a,8,this.length),p.read(this,a,!1,52,8)};function re(m,a,c,C,N,J){if(!r.isBuffer(m))throw new TypeError('"buffer" argument must be a Buffer instance');if(a>N||a<J)throw new RangeError('"value" argument is out of bounds');if(c+C>m.length)throw new RangeError("Index out of range")}r.prototype.writeUIntLE=function(a,c,C,N){if(a=+a,c=c>>>0,C=C>>>0,!N){var J=Math.pow(2,8*C)-1;re(this,a,c,C,J,0)}var te=1,ae=0;for(this[c]=a&255;++ae<C&&(te*=256);)this[c+ae]=a/te&255;return c+C},r.prototype.writeUIntBE=function(a,c,C,N){if(a=+a,c=c>>>0,C=C>>>0,!N){var J=Math.pow(2,8*C)-1;re(this,a,c,C,J,0)}var te=C-1,ae=1;for(this[c+te]=a&255;--te>=0&&(ae*=256);)this[c+te]=a/ae&255;return c+C},r.prototype.writeUInt8=function(a,c,C){return a=+a,c=c>>>0,C||re(this,a,c,1,255,0),this[c]=a&255,c+1},r.prototype.writeUInt16LE=function(a,c,C){return a=+a,c=c>>>0,C||re(this,a,c,2,65535,0),this[c]=a&255,this[c+1]=a>>>8,c+2},r.prototype.writeUInt16BE=function(a,c,C){return a=+a,c=c>>>0,C||re(this,a,c,2,65535,0),this[c]=a>>>8,this[c+1]=a&255,c+2},r.prototype.writeUInt32LE=function(a,c,C){return a=+a,c=c>>>0,C||re(this,a,c,4,4294967295,0),this[c+3]=a>>>24,this[c+2]=a>>>16,this[c+1]=a>>>8,this[c]=a&255,c+4},r.prototype.writeUInt32BE=function(a,c,C){return a=+a,c=c>>>0,C||re(this,a,c,4,4294967295,0),this[c]=a>>>24,this[c+1]=a>>>16,this[c+2]=a>>>8,this[c+3]=a&255,c+4},r.prototype.writeIntLE=function(a,c,C,N){if(a=+a,c=c>>>0,!N){var J=Math.pow(2,8*C-1);re(this,a,c,C,J-1,-J)}var te=0,ae=1,fe=0;for(this[c]=a&255;++te<C&&(ae*=256);)a<0&&fe===0&&this[c+te-1]!==0&&(fe=1),this[c+te]=(a/ae>>0)-fe&255;return c+C},r.prototype.writeIntBE=function(a,c,C,N){if(a=+a,c=c>>>0,!N){var J=Math.pow(2,8*C-1);re(this,a,c,C,J-1,-J)}var te=C-1,ae=1,fe=0;for(this[c+te]=a&255;--te>=0&&(ae*=256);)a<0&&fe===0&&this[c+te+1]!==0&&(fe=1),this[c+te]=(a/ae>>0)-fe&255;return c+C},r.prototype.writeInt8=function(a,c,C){return a=+a,c=c>>>0,C||re(this,a,c,1,127,-128),a<0&&(a=255+a+1),this[c]=a&255,c+1},r.prototype.writeInt16LE=function(a,c,C){return a=+a,c=c>>>0,C||re(this,a,c,2,32767,-32768),this[c]=a&255,this[c+1]=a>>>8,c+2},r.prototype.writeInt16BE=function(a,c,C){return a=+a,c=c>>>0,C||re(this,a,c,2,32767,-32768),this[c]=a>>>8,this[c+1]=a&255,c+2},r.prototype.writeInt32LE=function(a,c,C){return a=+a,c=c>>>0,C||re(this,a,c,4,2147483647,-2147483648),this[c]=a&255,this[c+1]=a>>>8,this[c+2]=a>>>16,this[c+3]=a>>>24,c+4},r.prototype.writeInt32BE=function(a,c,C){return a=+a,c=c>>>0,C||re(this,a,c,4,2147483647,-2147483648),a<0&&(a=4294967295+a+1),this[c]=a>>>24,this[c+1]=a>>>16,this[c+2]=a>>>8,this[c+3]=a&255,c+4};function ee(m,a,c,C,N,J){if(c+C>m.length)throw new RangeError("Index out of range");if(c<0)throw new RangeError("Index out of range")}function se(m,a,c,C,N){return a=+a,c=c>>>0,N||ee(m,a,c,4),p.write(m,a,c,C,23,4),c+4}r.prototype.writeFloatLE=function(a,c,C){return se(this,a,c,!0,C)},r.prototype.writeFloatBE=function(a,c,C){return se(this,a,c,!1,C)};function ie(m,a,c,C,N){return a=+a,c=c>>>0,N||ee(m,a,c,8),p.write(m,a,c,C,52,8),c+8}r.prototype.writeDoubleLE=function(a,c,C){return ie(this,a,c,!0,C)},r.prototype.writeDoubleBE=function(a,c,C){return ie(this,a,c,!1,C)},r.prototype.copy=function(a,c,C,N){if(!r.isBuffer(a))throw new TypeError("argument should be a Buffer");if(C||(C=0),!N&&N!==0&&(N=this.length),c>=a.length&&(c=a.length),c||(c=0),N>0&&N<C&&(N=C),N===C||a.length===0||this.length===0)return 0;if(c<0)throw new RangeError("targetStart out of bounds");if(C<0||C>=this.length)throw new RangeError("Index out of range");if(N<0)throw new RangeError("sourceEnd out of bounds");N>this.length&&(N=this.length),a.length-c<N-C&&(N=a.length-c+C);var J=N-C;if(this===a&&typeof Uint8Array.prototype.copyWithin=="function")this.copyWithin(c,C,N);else if(this===a&&C<c&&c<N)for(var te=J-1;te>=0;--te)a[te+c]=this[te+C];else Uint8Array.prototype.set.call(a,this.subarray(C,N),c);return J},r.prototype.fill=function(a,c,C,N){if(typeof a=="string"){if(typeof c=="string"?(N=c,c=0,C=this.length):typeof C=="string"&&(N=C,C=this.length),N!==void 0&&typeof N!="string")throw new TypeError("encoding must be a string");if(typeof N=="string"&&!r.isEncoding(N))throw new TypeError("Unknown encoding: "+N);if(a.length===1){var J=a.charCodeAt(0);(N==="utf8"&&J<128||N==="latin1")&&(a=J)}}else typeof a=="number"&&(a=a&255);if(c<0||this.length<c||this.length<C)throw new RangeError("Out of range index");if(C<=c)return this;c=c>>>0,C=C===void 0?this.length:C>>>0,a||(a=0);var te;if(typeof a=="number")for(te=c;te<C;++te)this[te]=a;else{var ae=r.isBuffer(a)?a:r.from(a,N),fe=ae.length;if(fe===0)throw new TypeError('The value "'+a+'" is invalid for argument "value"');for(te=0;te<C-c;++te)this[te+c]=ae[te%fe]}return this};var H=/[^+/0-9A-Za-z-_]/g;function U(m){if(m=m.split("=")[0],m=m.trim().replace(H,""),m.length<2)return"";for(;m.length%4!==0;)m=m+"=";return m}function Z(m){return m<16?"0"+m.toString(16):m.toString(16)}function O(m,a){a=a||1/0;for(var c,C=m.length,N=null,J=[],te=0;te<C;++te){if(c=m.charCodeAt(te),c>55295&&c<57344){if(!N){if(c>56319){(a-=3)>-1&&J.push(239,191,189);continue}else if(te+1===C){(a-=3)>-1&&J.push(239,191,189);continue}N=c;continue}if(c<56320){(a-=3)>-1&&J.push(239,191,189),N=c;continue}c=(N-55296<<10|c-56320)+65536}else N&&(a-=3)>-1&&J.push(239,191,189);if(N=null,c<128){if((a-=1)<0)break;J.push(c)}else if(c<2048){if((a-=2)<0)break;J.push(c>>6|192,c&63|128)}else if(c<65536){if((a-=3)<0)break;J.push(c>>12|224,c>>6&63|128,c&63|128)}else if(c<1114112){if((a-=4)<0)break;J.push(c>>18|240,c>>12&63|128,c>>6&63|128,c&63|128)}else throw new Error("Invalid code point")}return J}function M(m){for(var a=[],c=0;c<m.length;++c)a.push(m.charCodeAt(c)&255);return a}function z(m,a){for(var c,C,N,J=[],te=0;te<m.length&&!((a-=2)<0);++te)c=m.charCodeAt(te),C=c>>8,N=c%256,J.push(N),J.push(C);return J}function $(m){return g.toByteArray(U(m))}function X(m,a,c,C){for(var N=0;N<C&&!(N+c>=a.length||N>=m.length);++N)a[N+c]=m[N];return N}function S(m,a){return m instanceof a||m!=null&&m.constructor!=null&&m.constructor.name!=null&&m.constructor.name===a.name}function A(m){return m!==m}}).call(this)}).call(this,I("buffer").Buffer)},{"base64-js":13,buffer:17,ieee754:23}],18:[function(I,F,j){(function(w){(function(){j.formatArgs=p,j.save=h,j.load=s,j.useColors=g,j.storage=t(),j.destroy=(()=>{let e=!1;return()=>{e||(e=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),j.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function g(){return typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function p(e){if(e[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+e[0]+(this.useColors?"%c ":" ")+"+"+F.exports.humanize(this.diff),!this.useColors)return;const n="color: "+this.color;e.splice(1,0,n,"color: inherit");let f=0,o=0;e[0].replace(/%[a-zA-Z%]/g,y=>{y!=="%%"&&(f++,y==="%c"&&(o=f))}),e.splice(o,0,n)}j.log=console.debug||console.log||(()=>{});function h(e){try{e?j.storage.setItem("debug",e):j.storage.removeItem("debug")}catch{}}function s(){let e;try{e=j.storage.getItem("debug")}catch{}return!e&&typeof w<"u"&&"env"in w&&(e=w.env.DEBUG),e}function t(){try{return localStorage}catch{}}F.exports=I("./common")(j);const{formatters:r}=F.exports;r.j=function(e){try{return JSON.stringify(e)}catch(n){return"[UnexpectedJSONParseError]: "+n.message}}}).call(this)}).call(this,I("_process"))},{"./common":19,_process:50}],19:[function(I,F,j){function w(g){h.debug=h,h.default=h,h.coerce=f,h.disable=r,h.enable=t,h.enabled=e,h.humanize=I("ms"),h.destroy=o,Object.keys(g).forEach(y=>{h[y]=g[y]}),h.names=[],h.skips=[],h.formatters={};function p(y){let d=0;for(let u=0;u<y.length;u++)d=(d<<5)-d+y.charCodeAt(u),d|=0;return h.colors[Math.abs(d)%h.colors.length]}h.selectColor=p;function h(y){let d,u=null,i,v;function E(...k){if(!E.enabled)return;const P=E,L=Number(new Date),R=L-(d||L);P.diff=R,P.prev=d,P.curr=L,d=L,k[0]=h.coerce(k[0]),typeof k[0]!="string"&&k.unshift("%O");let q=0;k[0]=k[0].replace(/%([a-zA-Z%])/g,(_,b)=>{if(_==="%%")return"%";q++;const B=h.formatters[b];if(typeof B=="function"){const V=k[q];_=B.call(P,V),k.splice(q,1),q--}return _}),h.formatArgs.call(P,k),(P.log||h.log).apply(P,k)}return E.namespace=y,E.useColors=h.useColors(),E.color=h.selectColor(y),E.extend=s,E.destroy=h.destroy,Object.defineProperty(E,"enabled",{enumerable:!0,configurable:!1,get:()=>u!==null?u:(i!==h.namespaces&&(i=h.namespaces,v=h.enabled(y)),v),set:k=>{u=k}}),typeof h.init=="function"&&h.init(E),E}function s(y,d){const u=h(this.namespace+(typeof d>"u"?":":d)+y);return u.log=this.log,u}function t(y){h.save(y),h.namespaces=y,h.names=[],h.skips=[];let d;const u=(typeof y=="string"?y:"").split(/[\s,]+/),i=u.length;for(d=0;d<i;d++)u[d]&&(y=u[d].replace(/\*/g,".*?"),y[0]==="-"?h.skips.push(new RegExp("^"+y.substr(1)+"$")):h.names.push(new RegExp("^"+y+"$")))}function r(){const y=[...h.names.map(n),...h.skips.map(n).map(d=>"-"+d)].join(",");return h.enable(""),y}function e(y){if(y[y.length-1]==="*")return!0;let d,u;for(d=0,u=h.skips.length;d<u;d++)if(h.skips[d].test(y))return!1;for(d=0,u=h.names.length;d<u;d++)if(h.names[d].test(y))return!0;return!1}function n(y){return y.toString().substring(2,y.toString().length-2).replace(/\.\*\?$/,"*")}function f(y){return y instanceof Error?y.stack||y.message:y}function o(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return h.enable(h.load()),h}F.exports=w},{ms:45}],20:[function(I,F,j){(function(w,g){(function(){var p=I("readable-stream"),h=I("end-of-stream"),s=I("inherits"),t=I("stream-shift"),r=g.from&&g.from!==Uint8Array.from?g.from([0]):new g([0]),e=function(i,v){i._corked?i.once("uncork",v):v()},n=function(i,v){i._autoDestroy&&i.destroy(v)},f=function(i,v){return function(E){E?n(i,E.message==="premature close"?null:E):v&&!i._ended&&i.end()}},o=function(i,v){if(!i||i._writableState&&i._writableState.finished)return v();if(i._writableState)return i.end(v);i.end(),v()},y=function(){},d=function(i){return new p.Readable({objectMode:!0,highWaterMark:16}).wrap(i)},u=function(i,v,E){if(!(this instanceof u))return new u(i,v,E);p.Duplex.call(this,E),this._writable=null,this._readable=null,this._readable2=null,this._autoDestroy=!E||E.autoDestroy!==!1,this._forwardDestroy=!E||E.destroy!==!1,this._forwardEnd=!E||E.end!==!1,this._corked=1,this._ondrain=null,this._drained=!1,this._forwarding=!1,this._unwrite=null,this._unread=null,this._ended=!1,this.destroyed=!1,i&&this.setWritable(i),v&&this.setReadable(v)};s(u,p.Duplex),u.obj=function(i,v,E){return E||(E={}),E.objectMode=!0,E.highWaterMark=16,new u(i,v,E)},u.prototype.cork=function(){++this._corked===1&&this.emit("cork")},u.prototype.uncork=function(){this._corked&&--this._corked===0&&this.emit("uncork")},u.prototype.setWritable=function(i){if(this._unwrite&&this._unwrite(),this.destroyed){i&&i.destroy&&i.destroy();return}if(i===null||i===!1){this.end();return}var v=this,E=h(i,{writable:!0,readable:!1},f(this,this._forwardEnd)),k=function(){var L=v._ondrain;v._ondrain=null,L&&L()},P=function(){v._writable.removeListener("drain",k),E()};this._unwrite&&w.nextTick(k),this._writable=i,this._writable.on("drain",k),this._unwrite=P,this.uncork()},u.prototype.setReadable=function(i){if(this._unread&&this._unread(),this.destroyed){i&&i.destroy&&i.destroy();return}if(i===null||i===!1){this.push(null),this.resume();return}var v=this,E=h(i,{writable:!1,readable:!0},f(this)),k=function(){v._forward()},P=function(){v.push(null)},L=function(){v._readable2.removeListener("readable",k),v._readable2.removeListener("end",P),E()};this._drained=!0,this._readable=i,this._readable2=i._readableState?i:d(i),this._readable2.on("readable",k),this._readable2.on("end",P),this._unread=L,this._forward()},u.prototype._read=function(){this._drained=!0,this._forward()},u.prototype._forward=function(){if(!(this._forwarding||!this._readable2||!this._drained)){this._forwarding=!0;for(var i;this._drained&&(i=t(this._readable2))!==null;)this.destroyed||(this._drained=this.push(i));this._forwarding=!1}},u.prototype.destroy=function(i,v){if(v||(v=y),this.destroyed)return v(null);this.destroyed=!0;var E=this;w.nextTick(function(){E._destroy(i),v(null)})},u.prototype._destroy=function(i){if(i){var v=this._ondrain;this._ondrain=null,v?v(i):this.emit("error",i)}this._forwardDestroy&&(this._readable&&this._readable.destroy&&this._readable.destroy(),this._writable&&this._writable.destroy&&this._writable.destroy()),this.emit("close")},u.prototype._write=function(i,v,E){if(!this.destroyed){if(this._corked)return e(this,this._write.bind(this,i,v,E));if(i===r)return this._finish(E);if(!this._writable)return E();this._writable.write(i)===!1?this._ondrain=E:this.destroyed||E()}},u.prototype._finish=function(i){var v=this;this.emit("preend"),e(this,function(){o(v._forwardEnd&&v._writable,function(){v._writableState.prefinished===!1&&(v._writableState.prefinished=!0),v.emit("prefinish"),e(v,i)})})},u.prototype.end=function(i,v,E){return typeof i=="function"?this.end(null,null,i):typeof v=="function"?this.end(i,null,v):(this._ended=!0,i&&this.write(i),!this._writableState.ending&&!this._writableState.destroyed&&this.write(r),p.Writable.prototype.end.call(this,E))},F.exports=u}).call(this)}).call(this,I("_process"),I("buffer").Buffer)},{_process:50,buffer:17,"end-of-stream":21,inherits:24,"readable-stream":69,"stream-shift":74}],21:[function(I,F,j){(function(w){(function(){var g=I("once"),p=function(){},h=function(r){return r.setHeader&&typeof r.abort=="function"},s=function(r){return r.stdio&&Array.isArray(r.stdio)&&r.stdio.length===3},t=function(r,e,n){if(typeof e=="function")return t(r,null,e);e||(e={}),n=g(n||p);var f=r._writableState,o=r._readableState,y=e.readable||e.readable!==!1&&r.readable,d=e.writable||e.writable!==!1&&r.writable,u=!1,i=function(){r.writable||v()},v=function(){d=!1,y||n.call(r)},E=function(){y=!1,d||n.call(r)},k=function(l){n.call(r,l?new Error("exited with error code: "+l):null)},P=function(l){n.call(r,l)},L=function(){w.nextTick(R)},R=function(){if(!u){if(y&&!(o&&o.ended&&!o.destroyed))return n.call(r,new Error("premature close"));if(d&&!(f&&f.ended&&!f.destroyed))return n.call(r,new Error("premature close"))}},q=function(){r.req.on("finish",v)};return h(r)?(r.on("complete",v),r.on("abort",L),r.req?q():r.on("request",q)):d&&!f&&(r.on("end",i),r.on("close",i)),s(r)&&r.on("exit",k),r.on("end",E),r.on("finish",v),e.error!==!1&&r.on("error",P),r.on("close",L),function(){u=!0,r.removeListener("complete",v),r.removeListener("abort",L),r.removeListener("request",q),r.req&&r.req.removeListener("finish",v),r.removeListener("end",i),r.removeListener("close",i),r.removeListener("finish",v),r.removeListener("exit",k),r.removeListener("end",E),r.removeListener("error",P),r.removeListener("close",L)}};F.exports=t}).call(this)}).call(this,I("_process"))},{_process:50,once:48}],22:[function(I,F,j){var w=Object.create||q,g=Object.keys||l,p=Function.prototype.bind||_;function h(){(!this._events||!Object.prototype.hasOwnProperty.call(this,"_events"))&&(this._events=w(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0}F.exports=h,h.EventEmitter=h,h.prototype._events=void 0,h.prototype._maxListeners=void 0;var s=10,t;try{var r={};Object.defineProperty&&Object.defineProperty(r,"x",{value:0}),t=r.x===0}catch{t=!1}t?Object.defineProperty(h,"defaultMaxListeners",{enumerable:!0,get:function(){return s},set:function(b){if(typeof b!="number"||b<0||b!==b)throw new TypeError('"defaultMaxListeners" must be a positive number');s=b}}):h.defaultMaxListeners=s,h.prototype.setMaxListeners=function(B){if(typeof B!="number"||B<0||isNaN(B))throw new TypeError('"n" argument must be a positive number');return this._maxListeners=B,this};function e(b){return b._maxListeners===void 0?h.defaultMaxListeners:b._maxListeners}h.prototype.getMaxListeners=function(){return e(this)};function n(b,B,V){if(B)b.call(V);else for(var W=b.length,Y=L(b,W),T=0;T<W;++T)Y[T].call(V)}function f(b,B,V,W){if(B)b.call(V,W);else for(var Y=b.length,T=L(b,Y),x=0;x<Y;++x)T[x].call(V,W)}function o(b,B,V,W,Y){if(B)b.call(V,W,Y);else for(var T=b.length,x=L(b,T),D=0;D<T;++D)x[D].call(V,W,Y)}function y(b,B,V,W,Y,T){if(B)b.call(V,W,Y,T);else for(var x=b.length,D=L(b,x),G=0;G<x;++G)D[G].call(V,W,Y,T)}function d(b,B,V,W){if(B)b.apply(V,W);else for(var Y=b.length,T=L(b,Y),x=0;x<Y;++x)T[x].apply(V,W)}h.prototype.emit=function(B){var V,W,Y,T,x,D,G=B==="error";if(D=this._events,D)G=G&&D.error==null;else if(!G)return!1;if(G){if(arguments.length>1&&(V=arguments[1]),V instanceof Error)throw V;var oe=new Error('Unhandled "error" event. ('+V+")");throw oe.context=V,oe}if(W=D[B],!W)return!1;var ne=typeof W=="function";switch(Y=arguments.length,Y){case 1:n(W,ne,this);break;case 2:f(W,ne,this,arguments[1]);break;case 3:o(W,ne,this,arguments[1],arguments[2]);break;case 4:y(W,ne,this,arguments[1],arguments[2],arguments[3]);break;default:for(T=new Array(Y-1),x=1;x<Y;x++)T[x-1]=arguments[x];d(W,ne,this,T)}return!0};function u(b,B,V,W){var Y,T,x;if(typeof V!="function")throw new TypeError('"listener" argument must be a function');if(T=b._events,T?(T.newListener&&(b.emit("newListener",B,V.listener?V.listener:V),T=b._events),x=T[B]):(T=b._events=w(null),b._eventsCount=0),!x)x=T[B]=V,++b._eventsCount;else if(typeof x=="function"?x=T[B]=W?[V,x]:[x,V]:W?x.unshift(V):x.push(V),!x.warned&&(Y=e(b),Y&&Y>0&&x.length>Y)){x.warned=!0;var D=new Error("Possible EventEmitter memory leak detected. "+x.length+' "'+String(B)+'" listeners added. Use emitter.setMaxListeners() to increase limit.');D.name="MaxListenersExceededWarning",D.emitter=b,D.type=B,D.count=x.length,typeof console=="object"&&console.warn&&console.warn("%s: %s",D.name,D.message)}return b}h.prototype.addListener=function(B,V){return u(this,B,V,!1)},h.prototype.on=h.prototype.addListener,h.prototype.prependListener=function(B,V){return u(this,B,V,!0)};function i(){if(!this.fired)switch(this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length){case 0:return this.listener.call(this.target);case 1:return this.listener.call(this.target,arguments[0]);case 2:return this.listener.call(this.target,arguments[0],arguments[1]);case 3:return this.listener.call(this.target,arguments[0],arguments[1],arguments[2]);default:for(var b=new Array(arguments.length),B=0;B<b.length;++B)b[B]=arguments[B];this.listener.apply(this.target,b)}}function v(b,B,V){var W={fired:!1,wrapFn:void 0,target:b,type:B,listener:V},Y=p.call(i,W);return Y.listener=V,W.wrapFn=Y,Y}h.prototype.once=function(B,V){if(typeof V!="function")throw new TypeError('"listener" argument must be a function');return this.on(B,v(this,B,V)),this},h.prototype.prependOnceListener=function(B,V){if(typeof V!="function")throw new TypeError('"listener" argument must be a function');return this.prependListener(B,v(this,B,V)),this},h.prototype.removeListener=function(B,V){var W,Y,T,x,D;if(typeof V!="function")throw new TypeError('"listener" argument must be a function');if(Y=this._events,!Y)return this;if(W=Y[B],!W)return this;if(W===V||W.listener===V)--this._eventsCount===0?this._events=w(null):(delete Y[B],Y.removeListener&&this.emit("removeListener",B,W.listener||V));else if(typeof W!="function"){for(T=-1,x=W.length-1;x>=0;x--)if(W[x]===V||W[x].listener===V){D=W[x].listener,T=x;break}if(T<0)return this;T===0?W.shift():P(W,T),W.length===1&&(Y[B]=W[0]),Y.removeListener&&this.emit("removeListener",B,D||V)}return this},h.prototype.removeAllListeners=function(B){var V,W,Y;if(W=this._events,!W)return this;if(!W.removeListener)return arguments.length===0?(this._events=w(null),this._eventsCount=0):W[B]&&(--this._eventsCount===0?this._events=w(null):delete W[B]),this;if(arguments.length===0){var T=g(W),x;for(Y=0;Y<T.length;++Y)x=T[Y],x!=="removeListener"&&this.removeAllListeners(x);return this.removeAllListeners("removeListener"),this._events=w(null),this._eventsCount=0,this}if(V=W[B],typeof V=="function")this.removeListener(B,V);else if(V)for(Y=V.length-1;Y>=0;Y--)this.removeListener(B,V[Y]);return this};function E(b,B,V){var W=b._events;if(!W)return[];var Y=W[B];return Y?typeof Y=="function"?V?[Y.listener||Y]:[Y]:V?R(Y):L(Y,Y.length):[]}h.prototype.listeners=function(B){return E(this,B,!0)},h.prototype.rawListeners=function(B){return E(this,B,!1)},h.listenerCount=function(b,B){return typeof b.listenerCount=="function"?b.listenerCount(B):k.call(b,B)},h.prototype.listenerCount=k;function k(b){var B=this._events;if(B){var V=B[b];if(typeof V=="function")return 1;if(V)return V.length}return 0}h.prototype.eventNames=function(){return this._eventsCount>0?Reflect.ownKeys(this._events):[]};function P(b,B){for(var V=B,W=V+1,Y=b.length;W<Y;V+=1,W+=1)b[V]=b[W];b.pop()}function L(b,B){for(var V=new Array(B),W=0;W<B;++W)V[W]=b[W];return V}function R(b){for(var B=new Array(b.length),V=0;V<B.length;++V)B[V]=b[V].listener||b[V];return B}function q(b){var B=function(){};return B.prototype=b,new B}function l(b){for(var B in b)Object.prototype.hasOwnProperty.call(b,B);return B}function _(b){var B=this;return function(){return B.apply(b,arguments)}}},{}],23:[function(I,F,j){/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */j.read=function(w,g,p,h,s){var t,r,e=s*8-h-1,n=(1<<e)-1,f=n>>1,o=-7,y=p?s-1:0,d=p?-1:1,u=w[g+y];for(y+=d,t=u&(1<<-o)-1,u>>=-o,o+=e;o>0;t=t*256+w[g+y],y+=d,o-=8);for(r=t&(1<<-o)-1,t>>=-o,o+=h;o>0;r=r*256+w[g+y],y+=d,o-=8);if(t===0)t=1-f;else{if(t===n)return r?NaN:(u?-1:1)*(1/0);r=r+Math.pow(2,h),t=t-f}return(u?-1:1)*r*Math.pow(2,t-h)},j.write=function(w,g,p,h,s,t){var r,e,n,f=t*8-s-1,o=(1<<f)-1,y=o>>1,d=s===23?Math.pow(2,-24)-Math.pow(2,-77):0,u=h?0:t-1,i=h?1:-1,v=g<0||g===0&&1/g<0?1:0;for(g=Math.abs(g),isNaN(g)||g===1/0?(e=isNaN(g)?1:0,r=o):(r=Math.floor(Math.log(g)/Math.LN2),g*(n=Math.pow(2,-r))<1&&(r--,n*=2),r+y>=1?g+=d/n:g+=d*Math.pow(2,1-y),g*n>=2&&(r++,n/=2),r+y>=o?(e=0,r=o):r+y>=1?(e=(g*n-1)*Math.pow(2,s),r=r+y):(e=g*Math.pow(2,y-1)*Math.pow(2,s),r=0));s>=8;w[p+u]=e&255,u+=i,e/=256,s-=8);for(r=r<<s|e,f+=s;f>0;w[p+u]=r&255,u+=i,r/=256,f-=8);w[p+u-i]|=v*128}},{}],24:[function(I,F,j){typeof Object.create=="function"?F.exports=function(g,p){p&&(g.super_=p,g.prototype=Object.create(p.prototype,{constructor:{value:g,enumerable:!1,writable:!0,configurable:!0}}))}:F.exports=function(g,p){if(p){g.super_=p;var h=function(){};h.prototype=p.prototype,g.prototype=new h,g.prototype.constructor=g}}},{}],25:[function(I,F,j){Object.defineProperty(j,"__esModule",{value:!0});var w=function(){function g(p,h){this.color=!0,this.key=void 0,this.value=void 0,this.parent=void 0,this.brother=void 0,this.leftChild=void 0,this.rightChild=void 0,this.key=p,this.value=h}return g.prototype.rotateLeft=function(){var p=this.parent,h=this.brother,s=this.leftChild,t=this.rightChild;if(!t)throw new Error("unknown error");var r=t.leftChild,e=t.rightChild;return p&&(p.leftChild===this?p.leftChild=t:p.rightChild===this&&(p.rightChild=t)),t.parent=p,t.brother=h,t.leftChild=this,t.rightChild=e,h&&(h.brother=t),this.parent=t,this.brother=e,this.leftChild=s,this.rightChild=r,e&&(e.parent=t,e.brother=this),s&&(s.parent=this,s.brother=r),r&&(r.parent=this,r.brother=s),t},g.prototype.rotateRight=function(){var p=this.parent,h=this.brother,s=this.leftChild;if(!s)throw new Error("unknown error");var t=this.rightChild,r=s.leftChild,e=s.rightChild;return p&&(p.leftChild===this?p.leftChild=s:p.rightChild===this&&(p.rightChild=s)),s.parent=p,s.brother=h,s.leftChild=r,s.rightChild=this,h&&(h.brother=s),r&&(r.parent=s,r.brother=this),this.parent=s,this.brother=r,this.leftChild=e,this.rightChild=t,e&&(e.parent=this,e.brother=t),t&&(t.parent=this,t.brother=e),s},g.prototype.remove=function(){if(this.leftChild||this.rightChild)throw new Error("can only remove leaf node");this.parent&&(this===this.parent.leftChild?this.parent.leftChild=void 0:this===this.parent.rightChild&&(this.parent.rightChild=void 0)),this.brother&&(this.brother.brother=void 0),this.key=void 0,this.value=void 0,this.parent=void 0,this.brother=void 0},g.TreeNodeColorType={red:!0,black:!1},g}();Object.freeze(w),j.default=w},{}],26:[function(I,F,j){var w=this&&this.__generator||function(p,h){var s={label:0,sent:function(){if(e[0]&1)throw e[1];return e[1]},trys:[],ops:[]},t,r,e,n;return n={next:f(0),throw:f(1),return:f(2)},typeof Symbol=="function"&&(n[Symbol.iterator]=function(){return this}),n;function f(y){return function(d){return o([y,d])}}function o(y){if(t)throw new TypeError("Generator is already executing.");for(;s;)try{if(t=1,r&&(e=y[0]&2?r.return:y[0]?r.throw||((e=r.return)&&e.call(r),0):r.next)&&!(e=e.call(r,y[1])).done)return e;switch(r=0,e&&(y=[y[0]&2,e.value]),y[0]){case 0:case 1:e=y;break;case 4:return s.label++,{value:y[1],done:!1};case 5:s.label++,r=y[1],y=[0];continue;case 7:y=s.ops.pop(),s.trys.pop();continue;default:if(e=s.trys,!(e=e.length>0&&e[e.length-1])&&(y[0]===6||y[0]===2)){s=0;continue}if(y[0]===3&&(!e||y[1]>e[0]&&y[1]<e[3])){s.label=y[1];break}if(y[0]===6&&s.label<e[1]){s.label=e[1],e=y;break}if(e&&s.label<e[2]){s.label=e[2],s.ops.push(y);break}e[2]&&s.ops.pop(),s.trys.pop();continue}y=h.call(p,s)}catch(d){y=[6,d],r=0}finally{t=e=0}if(y[0]&5)throw y[1];return{value:y[0]?y[1]:void 0,done:!0}}};Object.defineProperty(j,"__esModule",{value:!0}),g.sigma=3,g.bucketSize=5e3;function g(p){var h=this;p===void 0&&(p=[]);var s=[],t=0,r=0,e=0,n=0,f=0,o=0;this.size=function(){return o},this.empty=function(){return o===0},this.clear=function(){t=e=r=n=f=o=0,d.call(this,g.bucketSize),o=0},this.front=function(){return s[t][r]},this.back=function(){return s[e][n]},this.forEach=function(u){if(!this.empty()){var i=0;if(t===e){for(var v=r;v<=n;++v)u(s[t][v],i++);return}for(var v=r;v<g.bucketSize;++v)u(s[t][v],i++);for(var v=t+1;v<e;++v)for(var E=0;E<g.bucketSize;++E)u(s[v][E],i++);for(var v=0;v<=n;++v)u(s[e][v],i++)}};var y=function(u){var i=t*g.bucketSize+r,v=i+u,E=e*g.bucketSize+n;if(v<i||v>E)throw new Error("pos should more than 0 and less than queue's size");var k=Math.floor(v/g.bucketSize),P=v%g.bucketSize;return{curNodeBucketIndex:k,curNodePointerIndex:P}};this.getElementByPos=function(u){var i=y(u),v=i.curNodeBucketIndex,E=i.curNodePointerIndex;return s[v][E]},this.eraseElementByPos=function(u){var i=this;if(u<0||u>o)throw new Error("pos should more than 0 and less than queue's size");if(u===0)this.popFront();else if(u===this.size())this.popBack();else{for(var v=[],E=u+1;E<o;++E)v.push(this.getElementByPos(E));this.cut(u),this.popBack(),v.forEach(function(k){return i.pushBack(k)})}},this.eraseElementByValue=function(u){if(!this.empty()){var i=[];this.forEach(function(k){k!==u&&i.push(k)});for(var v=i.length,E=0;E<v;++E)this.setElementByPos(E,i[E]);this.cut(v-1)}};var d=function(u){for(var i=[],v=u*g.sigma,E=Math.max(Math.ceil(v/g.bucketSize),2),k=0;k<E;++k)i.push(new Array(g.bucketSize));var P=Math.ceil(u/g.bucketSize),L=Math.floor(E/2)-Math.floor(P/2),R=L,q=0;if(this.size())for(var k=0;k<P;++k){for(var l=0;l<g.bucketSize;++l)if(i[L+k][l]=this.front(),this.popFront(),this.empty()){R=L+k,q=l;break}if(this.empty())break}s=i,t=L,r=0,e=R,n=q,f=E,o=u};this.pushBack=function(u){this.empty()||(e===f-1&&n===g.bucketSize-1&&d.call(this,this.size()),n<g.bucketSize-1?++n:e<f-1&&(++e,n=0)),++o,s[e][n]=u},this.popBack=function(){this.empty()||(this.size()!==1&&(n>0?--n:t<e&&(--e,n=g.bucketSize-1)),o>0&&--o)},this.setElementByPos=function(u,i){var v=y(u),E=v.curNodeBucketIndex,k=v.curNodePointerIndex;s[E][k]=i},this.insert=function(u,i,v){var E=this;if(v===void 0&&(v=1),u===0)for(;v--;)this.pushFront(i);else if(u===this.size())for(;v--;)this.pushBack(i);else{for(var k=[],P=u;P<o;++P)k.push(this.getElementByPos(P));this.cut(u-1);for(var P=0;P<v;++P)this.pushBack(i);k.forEach(function(L){return E.pushBack(L)})}},this.find=function(u){if(t===e){for(var i=r;i<=n;++i)if(s[t][i]===u)return!0;return!1}for(var i=r;i<g.bucketSize;++i)if(s[t][i]===u)return!0;for(var i=t+1;i<e;++i)for(var v=0;v<g.bucketSize;++v)if(s[i][v]===u)return!0;for(var i=0;i<=n;++i)if(s[e][i]===u)return!0;return!1},this.reverse=function(){for(var u=0,i=o-1;u<i;){var v=this.getElementByPos(u);this.setElementByPos(u,this.getElementByPos(i)),this.setElementByPos(i,v),++u,--i}},this.unique=function(){if(!this.empty()){var u=[],i=this.front();this.forEach(function(E,k){(k===0||E!==i)&&(u.push(E),i=E)});for(var v=0;v<o;++v)this.setElementByPos(v,u[v]);this.cut(u.length-1)}},this.sort=function(u){var i=[];this.forEach(function(E){i.push(E)}),i.sort(u);for(var v=0;v<o;++v)this.setElementByPos(v,i[v])},this.pushFront=function(u){this.empty()||(t===0&&r===0&&d.call(this,this.size()),r>0?--r:t>0&&(--t,r=g.bucketSize-1)),++o,s[t][r]=u},this.popFront=function(){this.empty()||(this.size()!==1&&(r<g.bucketSize-1?++r:t<e&&(++t,r=0)),o>0&&--o)},this.shrinkToFit=function(){var u=this,i=[];this.forEach(function(P){i.push(P)});var v=i.length;s=[];for(var E=Math.ceil(v/g.bucketSize),k=0;k<E;++k)s.push(new Array(g.bucketSize));this.clear(),i.forEach(function(P){return u.pushBack(P)})},this.cut=function(u){if(u<0){this.clear();return}var i=y(u),v=i.curNodeBucketIndex,E=i.curNodePointerIndex;e=v,n=E,o=u+1},this[Symbol.iterator]=function(){return function(){var i,i,i,u,i;return w(this,function(v){switch(v.label){case 0:if(o===0)return[2];if(t!==e)return[3,5];i=r,v.label=1;case 1:return i<=n?[4,s[t][i]]:[3,4];case 2:v.sent(),v.label=3;case 3:return++i,[3,1];case 4:return[2];case 5:i=r,v.label=6;case 6:return i<g.bucketSize?[4,s[t][i]]:[3,9];case 7:v.sent(),v.label=8;case 8:return++i,[3,6];case 9:i=t+1,v.label=10;case 10:if(!(i<e))return[3,15];u=0,v.label=11;case 11:return u<g.bucketSize?[4,s[i][u]]:[3,14];case 12:v.sent(),v.label=13;case 13:return++u,[3,11];case 14:return++i,[3,10];case 15:i=0,v.label=16;case 16:return i<=n?[4,s[e][i]]:[3,19];case 17:v.sent(),v.label=18;case 18:return++i,[3,16];case 19:return[2]}})}()},function(){var u=g.bucketSize;p.size?u=p.size():p.length&&(u=p.length);var i=u*g.sigma;f=Math.ceil(i/g.bucketSize),f=Math.max(f,3);for(var v=0;v<f;++v)s.push(new Array(g.bucketSize));var E=Math.ceil(u/g.bucketSize);t=Math.floor(f/2)-Math.floor(E/2),e=t,p.forEach(function(k){return h.pushBack(k)})}(),Object.freeze(this)}Object.freeze(g),j.default=g},{}],27:[function(I,F,j){var w=this&&this.__generator||function(t,r){var e={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,f,o,y;return y={next:d(0),throw:d(1),return:d(2)},typeof Symbol=="function"&&(y[Symbol.iterator]=function(){return this}),y;function d(i){return function(v){return u([i,v])}}function u(i){if(n)throw new TypeError("Generator is already executing.");for(;e;)try{if(n=1,f&&(o=i[0]&2?f.return:i[0]?f.throw||((o=f.return)&&o.call(f),0):f.next)&&!(o=o.call(f,i[1])).done)return o;switch(f=0,o&&(i=[i[0]&2,o.value]),i[0]){case 0:case 1:o=i;break;case 4:return e.label++,{value:i[1],done:!1};case 5:e.label++,f=i[1],i=[0];continue;case 7:i=e.ops.pop(),e.trys.pop();continue;default:if(o=e.trys,!(o=o.length>0&&o[o.length-1])&&(i[0]===6||i[0]===2)){e=0;continue}if(i[0]===3&&(!o||i[1]>o[0]&&i[1]<o[3])){e.label=i[1];break}if(i[0]===6&&e.label<o[1]){e.label=o[1],o=i;break}if(o&&e.label<o[2]){e.label=o[2],e.ops.push(i);break}o[2]&&e.ops.pop(),e.trys.pop();continue}i=r.call(t,e)}catch(v){i=[6,v],f=0}finally{n=o=0}if(i[0]&5)throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}},g=this&&this.__values||function(t){var r=typeof Symbol=="function"&&Symbol.iterator,e=r&&t[r],n=0;if(e)return e.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(j,"__esModule",{value:!0});var p=I("../LinkList/LinkList"),h=I("../Map/Map");s.initSize=16,s.maxSize=1<<30,s.sigma=.75,s.treeifyThreshold=8,s.untreeifyThreshold=6,s.minTreeifySize=64;function s(t,r,e){var n=this;if(t===void 0&&(t=[]),r===void 0&&(r=s.initSize),e=e||function(u){var i,v,E=0,k="";if(typeof u=="number")E=Math.floor(u),E=(E<<5)-E,E=E&E;else{typeof u!="string"?k=JSON.stringify(u):k=u;try{for(var P=g(k),L=P.next();!L.done;L=P.next()){var R=L.value,q=R.charCodeAt(0);E=(E<<5)-E+q,E=E&E}}catch(l){i={error:l}}finally{try{L&&!L.done&&(v=P.return)&&v.call(P)}finally{if(i)throw i.error}}}return E^=E>>>16,E},r&r-1)throw new Error("initBucketNum must be 2 to the power of n");var f=0,o=[],y=Math.max(s.initSize,Math.min(s.maxSize,r));this.size=function(){return f},this.empty=function(){return f===0},this.clear=function(){f=0,y=r,o=[]},this.forEach=function(u){var i=0;o.forEach(function(v){v.forEach(function(E){u(E,i++)})})};var d=function(u){if(!(u>=s.maxSize)){y=u*2;var i=[];o.forEach(function(v,E){if(!v.empty()){if(v instanceof p.default&&v.size()===1){var k=v.front(),P=k.key,L=k.value;i[e(P)&y-1]=new p.default([{key:P,value:L}])}else if(v instanceof h.default){var R=new p.default,q=new p.default;v.forEach(function(b){var B=e(b.key);B&u?q.pushBack(b):R.pushBack(b)}),R.size()>s.untreeifyThreshold?i[E]=new h.default(R):R.size()&&(i[E]=R),q.size()>s.untreeifyThreshold?i[E+u]=new h.default(q):q.size()&&(i[E+u]=q)}else{var l=new p.default,_=new p.default;v.forEach(function(b){var B=e(b.key);B&u?_.pushBack(b):l.pushBack(b)}),l.size()&&(i[E]=l),_.size()&&(i[E+u]=_)}o[E].clear()}}),o=i}};this.setElement=function(u,i){var v,E;if(u==null)throw new Error("to avoid some unnecessary errors, we don't suggest you insert null or undefined here");if(i==null){this.eraseElementByKey(u);return}var k=e(u)&y-1;if(!o[k])++f,o[k]=new p.default([{key:u,value:i}]);else{var P=o[k].size();if(o[k]instanceof p.default){try{for(var L=g(o[k]),R=L.next();!R.done;R=L.next()){var q=R.value;if(q.key===u){q.value=i;return}}}catch(_){v={error:_}}finally{try{R&&!R.done&&(E=L.return)&&E.call(L)}finally{if(v)throw v.error}}o[k].pushBack({key:u,value:i}),o[k].size()>=s.treeifyThreshold&&(o[k]=new h.default(o[k]))}else o[k].setElement(u,i);var l=o[k].size();f+=l-P}f>y*s.sigma&&d.call(this,y)},this.getElementByKey=function(u){var i,v,E=e(u)&y-1;if(o[E]){if(o[E]instanceof h.default)return o[E].getElementByKey(u);try{for(var k=g(o[E]),P=k.next();!P.done;P=k.next()){var L=P.value;if(L.key===u)return L.value}}catch(R){i={error:R}}finally{try{P&&!P.done&&(v=k.return)&&v.call(k)}finally{if(i)throw i.error}}}},this.eraseElementByKey=function(u){var i,v,E=e(u)&y-1;if(o[E]){var k=o[E].size();if(o[E]instanceof h.default)o[E].eraseElementByKey(u),o[E].size()<=s.untreeifyThreshold&&(o[E]=new p.default(o[E]));else{var P=-1;try{for(var L=g(o[E]),R=L.next();!R.done;R=L.next()){var q=R.value;if(++P,q.key===u){o[E].eraseElementByPos(P);break}}}catch(_){i={error:_}}finally{try{R&&!R.done&&(v=L.return)&&v.call(L)}finally{if(i)throw i.error}}}var l=o[E].size();f+=l-k}},this.find=function(u){var i,v,E=e(u)&y-1;if(!o[E])return!1;if(o[E]instanceof h.default)return o[E].find(u);try{for(var k=g(o[E]),P=k.next();!P.done;P=k.next()){var L=P.value;if(L.key===u)return!0}}catch(R){i={error:R}}finally{try{P&&!P.done&&(v=k.return)&&v.call(k)}finally{if(i)throw i.error}}return!1},this[Symbol.iterator]=function(){return function(){var u,i,v,E,k,P,L;return w(this,function(R){switch(R.label){case 0:u=0,R.label=1;case 1:if(!(u<y))return[3,10];for(;u<y&&!o[u];)++u;if(u>=y)return[3,10];R.label=2;case 2:R.trys.push([2,7,8,9]),i=(P=void 0,g(o[u])),v=i.next(),R.label=3;case 3:return v.done?[3,6]:(E=v.value,[4,E]);case 4:R.sent(),R.label=5;case 5:return v=i.next(),[3,3];case 6:return[3,9];case 7:return k=R.sent(),P={error:k},[3,9];case 8:try{v&&!v.done&&(L=i.return)&&L.call(i)}finally{if(P)throw P.error}return[7];case 9:return++u,[3,1];case 10:return[2]}})}()},t.forEach(function(u){var i=u.key,v=u.value;return n.setElement(i,v)}),Object.freeze(this)}Object.freeze(s),j.default=s},{"../LinkList/LinkList":29,"../Map/Map":30}],28:[function(I,F,j){var w=this&&this.__generator||function(t,r){var e={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,f,o,y;return y={next:d(0),throw:d(1),return:d(2)},typeof Symbol=="function"&&(y[Symbol.iterator]=function(){return this}),y;function d(i){return function(v){return u([i,v])}}function u(i){if(n)throw new TypeError("Generator is already executing.");for(;e;)try{if(n=1,f&&(o=i[0]&2?f.return:i[0]?f.throw||((o=f.return)&&o.call(f),0):f.next)&&!(o=o.call(f,i[1])).done)return o;switch(f=0,o&&(i=[i[0]&2,o.value]),i[0]){case 0:case 1:o=i;break;case 4:return e.label++,{value:i[1],done:!1};case 5:e.label++,f=i[1],i=[0];continue;case 7:i=e.ops.pop(),e.trys.pop();continue;default:if(o=e.trys,!(o=o.length>0&&o[o.length-1])&&(i[0]===6||i[0]===2)){e=0;continue}if(i[0]===3&&(!o||i[1]>o[0]&&i[1]<o[3])){e.label=i[1];break}if(i[0]===6&&e.label<o[1]){e.label=o[1],o=i;break}if(o&&e.label<o[2]){e.label=o[2],e.ops.push(i);break}o[2]&&e.ops.pop(),e.trys.pop();continue}i=r.call(t,e)}catch(v){i=[6,v],f=0}finally{n=o=0}if(i[0]&5)throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}},g=this&&this.__values||function(t){var r=typeof Symbol=="function"&&Symbol.iterator,e=r&&t[r],n=0;if(e)return e.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(j,"__esModule",{value:!0});var p=I("../Set/Set"),h=I("../LinkList/LinkList");s.initSize=16,s.maxSize=1<<30,s.sigma=.75,s.treeifyThreshold=8,s.untreeifyThreshold=6,s.minTreeifySize=64;function s(t,r,e){var n=this;if(t===void 0&&(t=[]),r===void 0&&(r=s.initSize),e=e||function(u){var i=0,v="";if(typeof u=="number")i=Math.floor(u),i=(i<<5)-i,i=i&i;else{typeof u!="string"?v=JSON.stringify(u):v=u;for(var E=0;E<v.length;E++){var k=v.charCodeAt(E);i=(i<<5)-i+k,i=i&i}}return i^=i>>>16,i},r&r-1)throw new Error("initBucketNum must be 2 to the power of n");var f=0,o=[],y=Math.max(s.initSize,Math.min(s.maxSize,r));this.size=function(){return f},this.empty=function(){return f===0},this.clear=function(){f=0,y=r,o=[]},this.forEach=function(u){var i=0;o.forEach(function(v){v.forEach(function(E){u(E,i++)})})};var d=function(u){if(!(u>=s.maxSize)){y=u*2;var i=[];o.forEach(function(v,E){if(!v.empty()){if(v instanceof h.default&&v.size()===1){var k=v.front();if(k===void 0)throw new Error("unknown error");i[e(k)&y-1]=new h.default([k])}else if(v instanceof p.default){var P=new h.default,L=new h.default;v.forEach(function(l){var _=e(l);_&u?L.pushBack(l):P.pushBack(l)}),P.size()>s.untreeifyThreshold?i[E]=new p.default(P):P.size()&&(i[E]=P),L.size()>s.untreeifyThreshold?i[E+u]=new p.default(L):L.size()&&(i[E+u]=L)}else{var R=new h.default,q=new h.default;v.forEach(function(l){var _=e(l);_&u?q.pushBack(l):R.pushBack(l)}),R.size()&&(i[E]=R),q.size()&&(i[E+u]=q)}o[E].clear()}}),o=i}};this.insert=function(u){if(u==null)throw new Error("to avoid some unnecessary errors, we don't suggest you insert null or undefined here");var i=e(u)&y-1;if(!o[i])o[i]=new h.default([u]),++f;else{var v=o[i].size();if(o[i]instanceof h.default){if(o[i].find(u))return;o[i].pushBack(u),o[i].size()>=s.treeifyThreshold&&(o[i]=new p.default(o[i]))}else o[i].insert(u);var E=o[i].size();f+=E-v}f>y*s.sigma&&d.call(this,y)},this.eraseElementByValue=function(u){var i=e(u)&y-1;if(o[i]){var v=o[i].size();o[i].eraseElementByValue(u),o[i]instanceof p.default&&o[i].size()<=s.untreeifyThreshold&&(o[i]=new h.default(o[i]));var E=o[i].size();f+=E-v}},this.find=function(u){var i=e(u)&y-1;return o[i]?o[i].find(u):!1},this[Symbol.iterator]=function(){return function(){var u,i,v,E,k,P,L;return w(this,function(R){switch(R.label){case 0:u=0,R.label=1;case 1:if(!(u<y))return[3,10];for(;u<y&&!o[u];)++u;if(u>=y)return[3,10];R.label=2;case 2:R.trys.push([2,7,8,9]),i=(P=void 0,g(o[u])),v=i.next(),R.label=3;case 3:return v.done?[3,6]:(E=v.value,[4,E]);case 4:R.sent(),R.label=5;case 5:return v=i.next(),[3,3];case 6:return[3,9];case 7:return k=R.sent(),P={error:k},[3,9];case 8:try{v&&!v.done&&(L=i.return)&&L.call(i)}finally{if(P)throw P.error}return[7];case 9:return++u,[3,1];case 10:return[2]}})}()},t.forEach(function(u){return n.insert(u)}),Object.freeze(this)}Object.freeze(s),j.default=s},{"../LinkList/LinkList":29,"../Set/Set":33}],29:[function(I,F,j){var w=this&&this.__generator||function(h,s){var t={label:0,sent:function(){if(n[0]&1)throw n[1];return n[1]},trys:[],ops:[]},r,e,n,f;return f={next:o(0),throw:o(1),return:o(2)},typeof Symbol=="function"&&(f[Symbol.iterator]=function(){return this}),f;function o(d){return function(u){return y([d,u])}}function y(d){if(r)throw new TypeError("Generator is already executing.");for(;t;)try{if(r=1,e&&(n=d[0]&2?e.return:d[0]?e.throw||((n=e.return)&&n.call(e),0):e.next)&&!(n=n.call(e,d[1])).done)return n;switch(e=0,n&&(d=[d[0]&2,n.value]),d[0]){case 0:case 1:n=d;break;case 4:return t.label++,{value:d[1],done:!1};case 5:t.label++,e=d[1],d=[0];continue;case 7:d=t.ops.pop(),t.trys.pop();continue;default:if(n=t.trys,!(n=n.length>0&&n[n.length-1])&&(d[0]===6||d[0]===2)){t=0;continue}if(d[0]===3&&(!n||d[1]>n[0]&&d[1]<n[3])){t.label=d[1];break}if(d[0]===6&&t.label<n[1]){t.label=n[1],n=d;break}if(n&&t.label<n[2]){t.label=n[2],t.ops.push(d);break}n[2]&&t.ops.pop(),t.trys.pop();continue}d=s.call(h,t)}catch(u){d=[6,u],e=0}finally{r=n=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}};Object.defineProperty(j,"__esModule",{value:!0});var g=function(){function h(s){this.value=void 0,this.pre=void 0,this.next=void 0,this.value=s}return h}();function p(h){var s=this;h===void 0&&(h=[]);var t=0,r=void 0,e=void 0;this.size=function(){return t},this.empty=function(){return t===0},this.clear=function(){r=e=void 0,t=0},this.front=function(){return r==null?void 0:r.value},this.back=function(){return e==null?void 0:e.value},this.forEach=function(n){for(var f=r,o=0;f;){if(f.value===void 0)throw new Error("unknown error");n(f.value,o++),f=f.next}},this.getElementByPos=function(n){if(n<0||n>=t)throw new Error("pos must more then 0 and less then the list length");for(var f=r;n--&&f;)f=f.next;if(!f||f.value===void 0)throw new Error("unknown error");return f.value},this.eraseElementByPos=function(n){if(n<0||n>=t)throw new Error("erase pos must more then 0 and less then the list length");if(n===0)this.popFront();else if(n===t-1)this.popBack();else{for(var f=r;n--;){if(!(f!=null&&f.next))throw new Error("unknown error");f=f.next}if(!f||!f.pre||!f.next)throw new Error("unknown error");var o=f.pre,y=f.next;y.pre=o,o.next=y,t>0&&--t}},this.eraseElementByValue=function(n){for(;r&&r.value===n;)this.popFront();for(;e&&e.value===n;)this.popBack();if(r)for(var f=r;f;){if(f.value===n){var o=f.pre,y=f.next;y&&(y.pre=o),o&&(o.next=y),t>0&&--t}f=f.next}},this.pushBack=function(n){if(n==null)throw new Error("you can't push null or undefined here");++t;var f=new g(n);e?(e.next=f,f.pre=e,e=f):r=e=f},this.popBack=function(){e&&(t>0&&--t,e&&(r===e?r=e=void 0:(e=e.pre,e&&(e.next=void 0))))},this.setElementByPos=function(n,f){if(f==null)throw new Error("you can't set null or undefined here");if(n<0||n>=t)throw new Error("pos must more then 0 and less then the list length");for(var o=r;n--;){if(!o)throw new Error("unknown error");o=o.next}o&&(o.value=f)},this.insert=function(n,f,o){if(o===void 0&&(o=1),f==null)throw new Error("you can't insert null or undefined here");if(n<0||n>t)throw new Error("insert pos must more then 0 and less then or equal to the list length");if(o<0)throw new Error("insert size must more than 0");if(n===0)for(;o--;)this.pushFront(f);else if(n===t)for(;o--;)this.pushBack(f);else{for(var y=r,d=1;d<n;++d){if(!(y!=null&&y.next))throw new Error("unknown error");y=y==null?void 0:y.next}if(!y)throw new Error("unknown error");var u=y.next;for(t+=o;o--;)y.next=new g(f),y.next.pre=y,y=y.next;y.next=u,u&&(u.pre=y)}},this.find=function(n){for(var f=r;f;){if(f.value===n)return!0;f=f.next}return!1},this.reverse=function(){for(var n=r,f=e,o=0;n&&f&&o*2<t;){var y=n.value;n.value=f.value,f.value=y,n=n.next,f=f.pre,++o}},this.unique=function(){for(var n=r;n;){for(var f=n;f&&f.next&&f.value===f.next.value;)f=f.next,t>0&&--t;n.next=f.next,n.next&&(n.next.pre=n),n=n.next}},this.sort=function(n){var f=[];this.forEach(function(y){f.push(y)}),f.sort(n);var o=r;f.forEach(function(y){o&&(o.value=y,o=o.next)})},this.pushFront=function(n){if(n==null)throw new Error("you can't push null or undefined here");++t;var f=new g(n);r?(f.next=r,r.pre=f,r=f):r=e=f},this.popFront=function(){r&&(t>0&&--t,r&&(r===e?r=e=void 0:(r=r.next,r&&(r.pre=void 0))))},this.merge=function(n){var f=this,o=r;n.forEach(function(y){for(;o&&o.value!==void 0&&o.value<=y;)o=o.next;if(o===void 0)f.pushBack(y),o=e;else if(o===r)f.pushFront(y),o=r;else{++t;var d=o.pre;d&&(d.next=new g(y),d.next.pre=d,d.next.next=o,o&&(o.pre=d.next))}})},this[Symbol.iterator]=function(){return function(){var n;return w(this,function(f){switch(f.label){case 0:n=r,f.label=1;case 1:if(n===void 0)return[3,3];if(!n.value)throw new Error("unknown error");return[4,n.value];case 2:return f.sent(),n=n.next,[3,1];case 3:return[2]}})}()},h.forEach(function(n){return s.pushBack(n)}),Object.freeze(this)}Object.freeze(p),j.default=p},{}],30:[function(I,F,j){var w=this&&this.__generator||function(s,t){var r={label:0,sent:function(){if(f[0]&1)throw f[1];return f[1]},trys:[],ops:[]},e,n,f,o;return o={next:y(0),throw:y(1),return:y(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function y(u){return function(i){return d([u,i])}}function d(u){if(e)throw new TypeError("Generator is already executing.");for(;r;)try{if(e=1,n&&(f=u[0]&2?n.return:u[0]?n.throw||((f=n.return)&&f.call(n),0):n.next)&&!(f=f.call(n,u[1])).done)return f;switch(n=0,f&&(u=[u[0]&2,f.value]),u[0]){case 0:case 1:f=u;break;case 4:return r.label++,{value:u[1],done:!1};case 5:r.label++,n=u[1],u=[0];continue;case 7:u=r.ops.pop(),r.trys.pop();continue;default:if(f=r.trys,!(f=f.length>0&&f[f.length-1])&&(u[0]===6||u[0]===2)){r=0;continue}if(u[0]===3&&(!f||u[1]>f[0]&&u[1]<f[3])){r.label=u[1];break}if(u[0]===6&&r.label<f[1]){r.label=f[1],f=u;break}if(f&&r.label<f[2]){r.label=f[2],r.ops.push(u);break}f[2]&&r.ops.pop(),r.trys.pop();continue}u=t.call(s,r)}catch(i){u=[6,i],n=0}finally{e=f=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},g=this&&this.__values||function(s){var t=typeof Symbol=="function"&&Symbol.iterator,r=t&&s[t],e=0;if(r)return r.call(s);if(s&&typeof s.length=="number")return{next:function(){return s&&e>=s.length&&(s=void 0),{value:s&&s[e++],done:!s}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(j,"__esModule",{value:!0});var p=I("../Base/TreeNode");function h(s,t){var r=this;s===void 0&&(s=[]),t=t||function(l,_){return l<_?-1:l>_?1:0};var e=0,n=new p.default;n.color=p.default.TreeNodeColorType.black,this.size=function(){return e},this.empty=function(){return e===0},this.clear=function(){e=0,n.key=n.value=void 0,n.leftChild=n.rightChild=n.brother=void 0};var f=function(l){if(!l||l.key===void 0)throw new Error("unknown error");return l.leftChild?f(l.leftChild):l},o=function(l){if(!l||l.key===void 0)throw new Error("unknown error");return l.rightChild?o(l.rightChild):l};this.front=function(){if(!this.empty()){var l=f(n);if(l.key===void 0||l.value===void 0)throw new Error("unknown error");return{key:l.key,value:l.value}}},this.back=function(){if(!this.empty()){var l=o(n);if(l.key===void 0||l.value===void 0)throw new Error("unknown error");return{key:l.key,value:l.value}}},this.forEach=function(l){var _,b,B=0;try{for(var V=g(this),W=V.next();!W.done;W=V.next()){var Y=W.value;l(Y,B++)}}catch(T){_={error:T}}finally{try{W&&!W.done&&(b=V.return)&&b.call(V)}finally{if(_)throw _.error}}},this.getElementByPos=function(l){var _,b;if(l<0||l>=this.size())throw new Error("pos must more than 0 and less than set's size");var B=0;try{for(var V=g(this),W=V.next();!W.done;W=V.next()){var Y=W.value;if(B===l)return Y;++B}}catch(T){_={error:T}}finally{try{W&&!W.done&&(b=V.return)&&b.call(V)}finally{if(_)throw _.error}}throw new Error("unknown Error")};var y=function(l,_){if(!(!l||l.key===void 0||l.value===void 0)){var b=t(l.key,_);return b===0?{key:l.key,value:l.value}:b<0?y(l.rightChild,_):y(l.leftChild,_)||{key:l.key,value:l.value}}};this.lowerBound=function(l){return y(n,l)};var d=function(l,_){if(!(!l||l.key===void 0||l.value===void 0)){var b=t(l.key,_);return b<=0?d(l.rightChild,_):d(l.leftChild,_)||{key:l.key,value:l.value}}};this.upperBound=function(l){return d(n,l)};var u=function(l,_){if(!(!l||l.key===void 0||l.value===void 0)){var b=t(l.key,_);return b===0?{key:l.key,value:l.value}:b>0?u(l.leftChild,_):u(l.rightChild,_)||{key:l.key,value:l.value}}};this.reverseLowerBound=function(l){return u(n,l)};var i=function(l,_){if(!(!l||l.key===void 0||l.value===void 0)){var b=t(l.key,_);return b>=0?i(l.leftChild,_):i(l.rightChild,_)||{key:l.key,value:l.value}}};this.reverseUpperBound=function(l){return i(n,l)};var v=function(l){var _=l.parent;if(!_){if(l===n)return;throw new Error("unknown error")}if(l.color===p.default.TreeNodeColorType.red){l.color=p.default.TreeNodeColorType.black;return}var b=l.brother;if(!b)throw new Error("unknown error");if(l===_.leftChild){if(b.color===p.default.TreeNodeColorType.red){b.color=p.default.TreeNodeColorType.black,_.color=p.default.TreeNodeColorType.red;var B=_.rotateLeft();n===_&&(n=B),v(l)}else if(b.color===p.default.TreeNodeColorType.black)if(b.rightChild&&b.rightChild.color===p.default.TreeNodeColorType.red){b.color=_.color,_.color=p.default.TreeNodeColorType.black,b.rightChild&&(b.rightChild.color=p.default.TreeNodeColorType.black);var B=_.rotateLeft();n===_&&(n=B),l.color=p.default.TreeNodeColorType.black}else if((!b.rightChild||b.rightChild.color===p.default.TreeNodeColorType.black)&&b.leftChild&&b.leftChild.color===p.default.TreeNodeColorType.red){b.color=p.default.TreeNodeColorType.red,b.leftChild&&(b.leftChild.color=p.default.TreeNodeColorType.black);var B=b.rotateRight();n===b&&(n=B),v(l)}else(!b.leftChild||b.leftChild.color===p.default.TreeNodeColorType.black)&&(!b.rightChild||b.rightChild.color===p.default.TreeNodeColorType.black)&&(b.color=p.default.TreeNodeColorType.red,v(_))}else if(l===_.rightChild){if(b.color===p.default.TreeNodeColorType.red){b.color=p.default.TreeNodeColorType.black,_.color=p.default.TreeNodeColorType.red;var B=_.rotateRight();n===_&&(n=B),v(l)}else if(b.color===p.default.TreeNodeColorType.black)if(b.leftChild&&b.leftChild.color===p.default.TreeNodeColorType.red){b.color=_.color,_.color=p.default.TreeNodeColorType.black,b.leftChild&&(b.leftChild.color=p.default.TreeNodeColorType.black);var B=_.rotateRight();n===_&&(n=B),l.color=p.default.TreeNodeColorType.black}else if((!b.leftChild||b.leftChild.color===p.default.TreeNodeColorType.black)&&b.rightChild&&b.rightChild.color===p.default.TreeNodeColorType.red){b.color=p.default.TreeNodeColorType.red,b.rightChild&&(b.rightChild.color=p.default.TreeNodeColorType.black);var B=b.rotateLeft();n===b&&(n=B),v(l)}else(!b.leftChild||b.leftChild.color===p.default.TreeNodeColorType.black)&&(!b.rightChild||b.rightChild.color===p.default.TreeNodeColorType.black)&&(b.color=p.default.TreeNodeColorType.red,v(_))}},E=function(l){for(var _=l;_.leftChild||_.rightChild;){if(_.rightChild){_=f(_.rightChild);var b=l.key;l.key=_.key,_.key=b;var B=l.value;l.value=_.value,_.value=B,l=_}if(_.leftChild){_=o(_.leftChild);var b=l.key;l.key=_.key,_.key=b;var B=l.value;l.value=_.value,_.value=B,l=_}}v(_),_&&_.remove(),--e,n.color=p.default.TreeNodeColorType.black},k=function(l,_){if(!l||l.key===void 0)return!1;var b=k(l.leftChild,_);return b||_(l)?!0:k(l.rightChild,_)};this.eraseElementByPos=function(l){if(l<0||l>=e)throw new Error("pos must more than 0 and less than set's size");var _=0;k(n,function(b){return l===_?(E(b),!0):(++_,!1)})},this.eraseElementByKey=function(l){if(!this.empty()){var _=R(n,l);_===void 0||_.key===void 0||t(_.key,l)!==0||E(_)}};var P=function(l,_){if(!l||l.key===void 0)throw new Error("unknown error");var b=t(_,l.key);return b<0?l.leftChild?P(l.leftChild,_):(l.leftChild=new p.default,l.leftChild.parent=l,l.leftChild.brother=l.rightChild,l.rightChild&&(l.rightChild.brother=l.leftChild),l.leftChild):b>0?l.rightChild?P(l.rightChild,_):(l.rightChild=new p.default,l.rightChild.parent=l,l.rightChild.brother=l.leftChild,l.leftChild&&(l.leftChild.brother=l.rightChild),l.rightChild):l},L=function(l){var _=l.parent;if(!_){if(l===n)return;throw new Error("unknown error")}if(_.color!==p.default.TreeNodeColorType.black&&_.color===p.default.TreeNodeColorType.red){var b=_.brother,B=_.parent;if(!B)throw new Error("unknown error");if(b&&b.color===p.default.TreeNodeColorType.red)b.color=_.color=p.default.TreeNodeColorType.black,B.color=p.default.TreeNodeColorType.red,L(B);else if(!b||b.color===p.default.TreeNodeColorType.black){if(_===B.leftChild){if(l===_.leftChild){_.color=p.default.TreeNodeColorType.black,B.color=p.default.TreeNodeColorType.red;var V=B.rotateRight();B===n&&(n=V)}else if(l===_.rightChild){var V=_.rotateLeft();B===n&&(n=V),L(_)}}else if(_===B.rightChild){if(l===_.leftChild){var V=_.rotateRight();B===n&&(n=V),L(_)}else if(l===_.rightChild){_.color=p.default.TreeNodeColorType.black,B.color=p.default.TreeNodeColorType.red;var V=B.rotateLeft();B===n&&(n=V)}}}}};this.setElement=function(l,_){if(l==null)throw new Error("to avoid some unnecessary errors, we don't suggest you insert null or undefined here");if(_==null){this.eraseElementByKey(l);return}if(this.empty()){++e,n.key=l,n.value=_,n.color=p.default.TreeNodeColorType.black;return}var b=P(n,l);if(b.key!==void 0&&t(b.key,l)===0){b.value=_;return}++e,b.key=l,b.value=_,L(b),n.color=p.default.TreeNodeColorType.black};var R=function(l,_){if(!(!l||l.key===void 0)){var b=t(_,l.key);return b<0?R(l.leftChild,_):b>0?R(l.rightChild,_):l}};this.find=function(l){return!!R(n,l)},this.getElementByKey=function(l){var _=R(n,l);if((_==null?void 0:_.key)===void 0||(_==null?void 0:_.value)===void 0)throw new Error("unknown error");return _.value},this.union=function(l){var _=this;l.forEach(function(b){var B=b.key,V=b.value;return _.setElement(B,V)})},this.getHeight=function(){if(this.empty())return 0;var l=function(_){return _?Math.max(l(_.leftChild),l(_.rightChild))+1:1};return l(n)};var q=function(l){return w(this,function(_){switch(_.label){case 0:return!l||l.key===void 0||l.value===void 0?[2]:[5,g(q(l.leftChild))];case 1:return _.sent(),[4,{key:l.key,value:l.value}];case 2:return _.sent(),[5,g(q(l.rightChild))];case 3:return _.sent(),[2]}})};this[Symbol.iterator]=function(){return q(n)},s.forEach(function(l){var _=l.key,b=l.value;return r.setElement(_,b)}),Object.freeze(this)}Object.freeze(h),j.default=h},{"../Base/TreeNode":25}],31:[function(I,F,j){Object.defineProperty(j,"__esModule",{value:!0});function w(g,p){g===void 0&&(g=[]),p=p||function(e,n){return e>n?-1:e<n?1:0};var h=[];g.forEach(function(e){return h.push(e)});var s=h.length,t=function(e,n){if(e<0||e>=s)throw new Error("unknown error");if(n<0||n>=s)throw new Error("unknown error");var f=h[e];h[e]=h[n],h[n]=f},r=function(e){if(e<0||e>=s)throw new Error("unknown error");var n=e*2+1,f=e*2+2;n<s&&p(h[e],h[n])>0&&t(e,n),f<s&&p(h[e],h[f])>0&&t(e,f)};(function(){for(var e=Math.floor((s-1)/2);e>=0;--e)for(var n=e,f=n*2+1;f<s;){var o=f,y=o+1,d=o;if(y<s&&p(h[o],h[y])>0&&(d=y),p(h[n],h[d])<=0)break;t(n,d),n=d,f=n*2+1}})(),this.size=function(){return s},this.empty=function(){return s===0},this.clear=function(){s=0,h.length=0},this.push=function(e){if(h.push(e),++s,s!==1)for(var n=s-1;n>0;){var f=Math.floor((n-1)/2);if(p(h[f],e)<=0)break;r(f),n=f}},this.pop=function(){if(!this.empty()){if(this.size()===1){--s;return}var e=h[s-1];--s;for(var n=0;n<this.size();){var f=n*2+1,o=n*2+2;if(f>=this.size())break;var y=f;if(o<this.size()&&p(h[f],h[o])>0&&(y=o),p(h[y],e)>=0)break;h[n]=h[y],n=y}h[n]=e}},this.top=function(){return h[0]},Object.freeze(this)}Object.freeze(w),j.default=w},{}],32:[function(I,F,j){Object.defineProperty(j,"__esModule",{value:!0});var w=I("../LinkList/LinkList");function g(p){p===void 0&&(p=[]);var h=new w.default(p);this.size=function(){return h.size()},this.empty=function(){return h.empty()},this.clear=function(){h.clear()},this.push=function(s){h.pushBack(s)},this.pop=function(){h.popFront()},this.front=function(){return h.front()},Object.freeze(this)}Object.freeze(g),j.default=g},{"../LinkList/LinkList":29}],33:[function(I,F,j){var w=this&&this.__generator||function(s,t){var r={label:0,sent:function(){if(f[0]&1)throw f[1];return f[1]},trys:[],ops:[]},e,n,f,o;return o={next:y(0),throw:y(1),return:y(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function y(u){return function(i){return d([u,i])}}function d(u){if(e)throw new TypeError("Generator is already executing.");for(;r;)try{if(e=1,n&&(f=u[0]&2?n.return:u[0]?n.throw||((f=n.return)&&f.call(n),0):n.next)&&!(f=f.call(n,u[1])).done)return f;switch(n=0,f&&(u=[u[0]&2,f.value]),u[0]){case 0:case 1:f=u;break;case 4:return r.label++,{value:u[1],done:!1};case 5:r.label++,n=u[1],u=[0];continue;case 7:u=r.ops.pop(),r.trys.pop();continue;default:if(f=r.trys,!(f=f.length>0&&f[f.length-1])&&(u[0]===6||u[0]===2)){r=0;continue}if(u[0]===3&&(!f||u[1]>f[0]&&u[1]<f[3])){r.label=u[1];break}if(u[0]===6&&r.label<f[1]){r.label=f[1],f=u;break}if(f&&r.label<f[2]){r.label=f[2],r.ops.push(u);break}f[2]&&r.ops.pop(),r.trys.pop();continue}u=t.call(s,r)}catch(i){u=[6,i],n=0}finally{e=f=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},g=this&&this.__values||function(s){var t=typeof Symbol=="function"&&Symbol.iterator,r=t&&s[t],e=0;if(r)return r.call(s);if(s&&typeof s.length=="number")return{next:function(){return s&&e>=s.length&&(s=void 0),{value:s&&s[e++],done:!s}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(j,"__esModule",{value:!0});var p=I("../Base/TreeNode");function h(s,t){var r=this;s===void 0&&(s=[]),t=t||function(l,_){return l<_?-1:l>_?1:0};var e=0,n=new p.default;n.color=p.default.TreeNodeColorType.black,this.size=function(){return e},this.empty=function(){return e===0},this.clear=function(){e=0,n.key=void 0,n.leftChild=n.rightChild=n.brother=n.parent=void 0,n.color=p.default.TreeNodeColorType.black};var f=function(l){if(!l||l.key===void 0)throw new Error("unknown error");return l.leftChild?f(l.leftChild):l},o=function(l){if(!l||l.key===void 0)throw new Error("unknown error");return l.rightChild?o(l.rightChild):l};this.front=function(){if(!this.empty()){var l=f(n);return l.key}},this.back=function(){if(!this.empty()){var l=o(n);return l.key}},this.forEach=function(l){var _,b,B=0;try{for(var V=g(this),W=V.next();!W.done;W=V.next()){var Y=W.value;l(Y,B++)}}catch(T){_={error:T}}finally{try{W&&!W.done&&(b=V.return)&&b.call(V)}finally{if(_)throw _.error}}},this.getElementByPos=function(l){var _,b;if(l<0||l>=this.size())throw new Error("pos must more than 0 and less than set's size");var B=0;try{for(var V=g(this),W=V.next();!W.done;W=V.next()){var Y=W.value;if(B===l)return Y;++B}}catch(T){_={error:T}}finally{try{W&&!W.done&&(b=V.return)&&b.call(V)}finally{if(_)throw _.error}}throw new Error("unknown error")};var y=function(l){var _=l.parent;if(!_){if(l===n)return;throw new Error("unknown error")}if(l.color===p.default.TreeNodeColorType.red){l.color=p.default.TreeNodeColorType.black;return}var b=l.brother;if(!b)throw new Error("unknown error");if(l===_.leftChild){if(b.color===p.default.TreeNodeColorType.red){b.color=p.default.TreeNodeColorType.black,_.color=p.default.TreeNodeColorType.red;var B=_.rotateLeft();n===_&&(n=B),y(l)}else if(b.color===p.default.TreeNodeColorType.black)if(b.rightChild&&b.rightChild.color===p.default.TreeNodeColorType.red){b.color=_.color,_.color=p.default.TreeNodeColorType.black,b.rightChild&&(b.rightChild.color=p.default.TreeNodeColorType.black);var B=_.rotateLeft();n===_&&(n=B),l.color=p.default.TreeNodeColorType.black}else if((!b.rightChild||b.rightChild.color===p.default.TreeNodeColorType.black)&&b.leftChild&&b.leftChild.color===p.default.TreeNodeColorType.red){b.color=p.default.TreeNodeColorType.red,b.leftChild&&(b.leftChild.color=p.default.TreeNodeColorType.black);var B=b.rotateRight();n===b&&(n=B),y(l)}else(!b.leftChild||b.leftChild.color===p.default.TreeNodeColorType.black)&&(!b.rightChild||b.rightChild.color===p.default.TreeNodeColorType.black)&&(b.color=p.default.TreeNodeColorType.red,y(_))}else if(l===_.rightChild){if(b.color===p.default.TreeNodeColorType.red){b.color=p.default.TreeNodeColorType.black,_.color=p.default.TreeNodeColorType.red;var B=_.rotateRight();n===_&&(n=B),y(l)}else if(b.color===p.default.TreeNodeColorType.black)if(b.leftChild&&b.leftChild.color===p.default.TreeNodeColorType.red){b.color=_.color,_.color=p.default.TreeNodeColorType.black,b.leftChild&&(b.leftChild.color=p.default.TreeNodeColorType.black);var B=_.rotateRight();n===_&&(n=B),l.color=p.default.TreeNodeColorType.black}else if((!b.leftChild||b.leftChild.color===p.default.TreeNodeColorType.black)&&b.rightChild&&b.rightChild.color===p.default.TreeNodeColorType.red){b.color=p.default.TreeNodeColorType.red,b.rightChild&&(b.rightChild.color=p.default.TreeNodeColorType.black);var B=b.rotateLeft();n===b&&(n=B),y(l)}else(!b.leftChild||b.leftChild.color===p.default.TreeNodeColorType.black)&&(!b.rightChild||b.rightChild.color===p.default.TreeNodeColorType.black)&&(b.color=p.default.TreeNodeColorType.red,y(_))}},d=function(l){for(var _=l;_.leftChild||_.rightChild;){if(_.rightChild){_=f(_.rightChild);var b=l.key;l.key=_.key,_.key=b,l=_}if(_.leftChild){_=o(_.leftChild);var b=l.key;l.key=_.key,_.key=b,l=_}}y(_),_&&_.remove(),--e,n.color=p.default.TreeNodeColorType.black},u=function(l,_){if(!l||l.key===void 0)return!1;var b=u(l.leftChild,_);return b||_(l)?!0:u(l.rightChild,_)};this.eraseElementByPos=function(l){if(l<0||l>=e)throw new Error("pos must more than 0 and less than set's size");var _=0;u(n,function(b){return l===_?(d(b),!0):(++_,!1)})},this.eraseElementByValue=function(l){if(!this.empty()){var _=E(n,l);_===void 0||_.key===void 0||t(_.key,l)!==0||d(_)}};var i=function(l,_){if(!l||l.key===void 0)throw new Error("unknown error");var b=t(_,l.key);return b<0?l.leftChild?i(l.leftChild,_):(l.leftChild=new p.default,l.leftChild.parent=l,l.leftChild.brother=l.rightChild,l.rightChild&&(l.rightChild.brother=l.leftChild),l.leftChild):b>0?l.rightChild?i(l.rightChild,_):(l.rightChild=new p.default,l.rightChild.parent=l,l.rightChild.brother=l.leftChild,l.leftChild&&(l.leftChild.brother=l.rightChild),l.rightChild):l},v=function(l){var _=l.parent;if(!_){if(l===n)return;throw new Error("unknown error")}if(_.color!==p.default.TreeNodeColorType.black&&_.color===p.default.TreeNodeColorType.red){var b=_.brother,B=_.parent;if(!B)throw new Error("unknown error");if(b&&b.color===p.default.TreeNodeColorType.red)b.color=_.color=p.default.TreeNodeColorType.black,B.color=p.default.TreeNodeColorType.red,v(B);else if(!b||b.color===p.default.TreeNodeColorType.black){if(_===B.leftChild){if(l===_.leftChild){_.color=p.default.TreeNodeColorType.black,B.color=p.default.TreeNodeColorType.red;var V=B.rotateRight();B===n&&(n=V)}else if(l===_.rightChild){var V=_.rotateLeft();B===n&&(n=V),v(_)}}else if(_===B.rightChild){if(l===_.leftChild){var V=_.rotateRight();B===n&&(n=V),v(_)}else if(l===_.rightChild){_.color=p.default.TreeNodeColorType.black,B.color=p.default.TreeNodeColorType.red;var V=B.rotateLeft();B===n&&(n=V)}}}}};this.insert=function(l){if(l==null)throw new Error("to avoid some unnecessary errors, we don't suggest you insert null or undefined here");if(this.empty()){++e,n.key=l,n.color=p.default.TreeNodeColorType.black;return}var _=i(n,l);_.key!==void 0&&t(_.key,l)===0||(++e,_.key=l,v(_),n.color=p.default.TreeNodeColorType.black)};var E=function(l,_){if(!(!l||l.key===void 0)){var b=t(_,l.key);return b<0?E(l.leftChild,_):b>0?E(l.rightChild,_):l}};this.find=function(l){var _=E(n,l);return _!==void 0&&_.key!==void 0&&t(_.key,l)===0};var k=function(l,_){if(!(!l||l.key===void 0)){var b=t(l.key,_);if(b===0)return l.key;if(b<0)return k(l.rightChild,_);var B=k(l.leftChild,_);return B!==void 0?B:l.key}};this.lowerBound=function(l){return k(n,l)};var P=function(l,_){if(!(!l||l.key===void 0)){var b=t(l.key,_);if(b<=0)return P(l.rightChild,_);var B=P(l.leftChild,_);return B!==void 0?B:l.key}};this.upperBound=function(l){return P(n,l)};var L=function(l,_){if(!(!l||l.key===void 0)){var b=t(l.key,_);if(b===0)return l.key;if(b>0)return L(l.leftChild,_);var B=L(l.rightChild,_);return B!==void 0?B:l.key}};this.reverseLowerBound=function(l){return L(n,l)};var R=function(l,_){if(!(!l||l.key===void 0)){var b=t(l.key,_);if(b>=0)return R(l.leftChild,_);var B=R(l.rightChild,_);return B!==void 0?B:l.key}};this.reverseUpperBound=function(l){return R(n,l)},this.union=function(l){var _=this;l.forEach(function(b){return _.insert(b)})},this.getHeight=function(){if(this.empty())return 0;var l=function(_){return _?Math.max(l(_.leftChild),l(_.rightChild))+1:1};return l(n)};var q=function(l){return w(this,function(_){switch(_.label){case 0:return!l||l.key===void 0?[2]:[5,g(q(l.leftChild))];case 1:return _.sent(),[4,l.key];case 2:return _.sent(),[5,g(q(l.rightChild))];case 3:return _.sent(),[2]}})};this[Symbol.iterator]=function(){return q(n)},s.forEach(function(l){return r.insert(l)}),Object.freeze(this)}Object.freeze(h),j.default=h},{"../Base/TreeNode":25}],34:[function(I,F,j){Object.defineProperty(j,"__esModule",{value:!0});function w(g){var p=this;g===void 0&&(g=[]);var h=0,s=[];this.size=function(){return h},this.empty=function(){return h===0},this.clear=function(){h=0,s.length=0},this.push=function(t){s.push(t),++h},this.pop=function(){s.pop(),h>0&&--h},this.top=function(){return s[h-1]},g.forEach(function(t){return p.push(t)}),Object.freeze(this)}Object.freeze(w),j.default=w},{}],35:[function(I,F,j){var w=this&&this.__generator||function(t,r){var e={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,f,o,y;return y={next:d(0),throw:d(1),return:d(2)},typeof Symbol=="function"&&(y[Symbol.iterator]=function(){return this}),y;function d(i){return function(v){return u([i,v])}}function u(i){if(n)throw new TypeError("Generator is already executing.");for(;e;)try{if(n=1,f&&(o=i[0]&2?f.return:i[0]?f.throw||((o=f.return)&&o.call(f),0):f.next)&&!(o=o.call(f,i[1])).done)return o;switch(f=0,o&&(i=[i[0]&2,o.value]),i[0]){case 0:case 1:o=i;break;case 4:return e.label++,{value:i[1],done:!1};case 5:e.label++,f=i[1],i=[0];continue;case 7:i=e.ops.pop(),e.trys.pop();continue;default:if(o=e.trys,!(o=o.length>0&&o[o.length-1])&&(i[0]===6||i[0]===2)){e=0;continue}if(i[0]===3&&(!o||i[1]>o[0]&&i[1]<o[3])){e.label=i[1];break}if(i[0]===6&&e.label<o[1]){e.label=o[1],o=i;break}if(o&&e.label<o[2]){e.label=o[2],e.ops.push(i);break}o[2]&&e.ops.pop(),e.trys.pop();continue}i=r.call(t,e)}catch(v){i=[6,v],f=0}finally{n=o=0}if(i[0]&5)throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}},g=this&&this.__read||function(t,r){var e=typeof Symbol=="function"&&t[Symbol.iterator];if(!e)return t;var n=e.call(t),f,o=[],y;try{for(;(r===void 0||r-- >0)&&!(f=n.next()).done;)o.push(f.value)}catch(d){y={error:d}}finally{try{f&&!f.done&&(e=n.return)&&e.call(n)}finally{if(y)throw y.error}}return o},p=this&&this.__spreadArray||function(t,r,e){if(e||arguments.length===2)for(var n=0,f=r.length,o;n<f;n++)(o||!(n in r))&&(o||(o=Array.prototype.slice.call(r,0,n)),o[n]=r[n]);return t.concat(o||Array.prototype.slice.call(r))},h=this&&this.__values||function(t){var r=typeof Symbol=="function"&&Symbol.iterator,e=r&&t[r],n=0;if(e)return e.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(j,"__esModule",{value:!0});function s(t){var r=this;t===void 0&&(t=[]);var e=0,n=[];this.size=function(){return e},this.empty=function(){return e===0},this.clear=function(){e=0,n.length=0},this.front=function(){if(!this.empty())return n[0]},this.back=function(){if(!this.empty())return n[e-1]},this.forEach=function(f){n.forEach(f)},this.getElementByPos=function(f){if(f<0||f>=e)throw new Error("pos must more than 0 and less than vector's size");return n[f]},this.eraseElementByPos=function(f){if(f<0||f>=e)throw new Error("pos must more than 0 and less than vector's size");for(var o=f;o<e-1;++o)n[o]=n[o+1];this.popBack()},this.eraseElementByValue=function(f){var o=[];this.forEach(function(d){d!==f&&o.push(d)}),o.forEach(function(d,u){n[u]=d});for(var y=o.length;e>y;)this.popBack()},this.pushBack=function(f){n.push(f),++e},this.popBack=function(){n.pop(),e>0&&--e},this.setElementByPos=function(f,o){if(f<0||f>=e)throw new Error("pos must more than 0 and less than vector's size");n[f]=o},this.insert=function(f,o,y){if(y===void 0&&(y=1),f<0||f>e)throw new Error("pos must more than 0 and less than or equal to vector's size");n.splice.apply(n,p([f,0],g(new Array(y).fill(o)),!1)),e+=y},this.find=function(f){return n.includes(f)},this.reverse=function(){n.reverse()},this.unique=function(){var f,o=[];this.forEach(function(d,u){(u===0||d!==f)&&(o.push(d),f=d)}),o.forEach(function(d,u){n[u]=d});for(var y=o.length;e>y;)this.popBack()},this.sort=function(f){n.sort(f)},this[Symbol.iterator]=function(){return function(){return w(this,function(f){switch(f.label){case 0:return[5,h(n)];case 1:return[2,f.sent()]}})}()},t.forEach(function(f){return r.pushBack(f)}),Object.freeze(this)}Object.freeze(s),j.default=s},{}],36:[function(I,F,j){Object.defineProperty(j,"__esModule",{value:!0}),j.HashMap=j.HashSet=j.Map=j.Set=j.PriorityQueue=j.Deque=j.LinkList=j.Queue=j.Stack=j.Vector=void 0;var w=I("./Vector/Vector");j.Vector=w.default;var g=I("./Stack/Stack");j.Stack=g.default;var p=I("./Queue/Queue");j.Queue=p.default;var h=I("./LinkList/LinkList");j.LinkList=h.default;var s=I("./Deque/Deque");j.Deque=s.default;var t=I("./PriorityQueue/PriorityQueue");j.PriorityQueue=t.default;var r=I("./Set/Set");j.Set=r.default;var e=I("./Map/Map");j.Map=e.default;var n=I("./HashSet/HashSet");j.HashSet=n.default;var f=I("./HashMap/HashMap");j.HashMap=f.default},{"./Deque/Deque":26,"./HashMap/HashMap":27,"./HashSet/HashSet":28,"./LinkList/LinkList":29,"./Map/Map":30,"./PriorityQueue/PriorityQueue":31,"./Queue/Queue":32,"./Set/Set":33,"./Stack/Stack":34,"./Vector/Vector":35}],37:[function(I,F,j){const w=I("yallist"),g=Symbol("max"),p=Symbol("length"),h=Symbol("lengthCalculator"),s=Symbol("allowStale"),t=Symbol("maxAge"),r=Symbol("dispose"),e=Symbol("noDisposeOnSet"),n=Symbol("lruList"),f=Symbol("cache"),o=Symbol("updateAgeOnGet"),y=()=>1;class d{constructor(R){if(typeof R=="number"&&(R={max:R}),R||(R={}),R.max&&(typeof R.max!="number"||R.max<0))throw new TypeError("max must be a non-negative number");this[g]=R.max||1/0;const q=R.length||y;if(this[h]=typeof q!="function"?y:q,this[s]=R.stale||!1,R.maxAge&&typeof R.maxAge!="number")throw new TypeError("maxAge must be a number");this[t]=R.maxAge||0,this[r]=R.dispose,this[e]=R.noDisposeOnSet||!1,this[o]=R.updateAgeOnGet||!1,this.reset()}set max(R){if(typeof R!="number"||R<0)throw new TypeError("max must be a non-negative number");this[g]=R||1/0,v(this)}get max(){return this[g]}set allowStale(R){this[s]=!!R}get allowStale(){return this[s]}set maxAge(R){if(typeof R!="number")throw new TypeError("maxAge must be a non-negative number");this[t]=R,v(this)}get maxAge(){return this[t]}set lengthCalculator(R){typeof R!="function"&&(R=y),R!==this[h]&&(this[h]=R,this[p]=0,this[n].forEach(q=>{q.length=this[h](q.value,q.key),this[p]+=q.length})),v(this)}get lengthCalculator(){return this[h]}get length(){return this[p]}get itemCount(){return this[n].length}rforEach(R,q){q=q||this;for(let l=this[n].tail;l!==null;){const _=l.prev;P(this,R,l,q),l=_}}forEach(R,q){q=q||this;for(let l=this[n].head;l!==null;){const _=l.next;P(this,R,l,q),l=_}}keys(){return this[n].toArray().map(R=>R.key)}values(){return this[n].toArray().map(R=>R.value)}reset(){this[r]&&this[n]&&this[n].length&&this[n].forEach(R=>this[r](R.key,R.value)),this[f]=new Map,this[n]=new w,this[p]=0}dump(){return this[n].map(R=>i(this,R)?!1:{k:R.key,v:R.value,e:R.now+(R.maxAge||0)}).toArray().filter(R=>R)}dumpLru(){return this[n]}set(R,q,l){if(l=l||this[t],l&&typeof l!="number")throw new TypeError("maxAge must be a number");const _=l?Date.now():0,b=this[h](q,R);if(this[f].has(R)){if(b>this[g])return E(this,this[f].get(R)),!1;const W=this[f].get(R).value;return this[r]&&(this[e]||this[r](R,W.value)),W.now=_,W.maxAge=l,W.value=q,this[p]+=b-W.length,W.length=b,this.get(R),v(this),!0}const B=new k(R,q,b,_,l);return B.length>this[g]?(this[r]&&this[r](R,q),!1):(this[p]+=B.length,this[n].unshift(B),this[f].set(R,this[n].head),v(this),!0)}has(R){if(!this[f].has(R))return!1;const q=this[f].get(R).value;return!i(this,q)}get(R){return u(this,R,!0)}peek(R){return u(this,R,!1)}pop(){const R=this[n].tail;return R?(E(this,R),R.value):null}del(R){E(this,this[f].get(R))}load(R){this.reset();const q=Date.now();for(let l=R.length-1;l>=0;l--){const _=R[l],b=_.e||0;if(b===0)this.set(_.k,_.v);else{const B=b-q;B>0&&this.set(_.k,_.v,B)}}}prune(){this[f].forEach((R,q)=>u(this,q,!1))}}const u=(L,R,q)=>{const l=L[f].get(R);if(l){const _=l.value;if(i(L,_)){if(E(L,l),!L[s])return}else q&&(L[o]&&(l.value.now=Date.now()),L[n].unshiftNode(l));return _.value}},i=(L,R)=>{if(!R||!R.maxAge&&!L[t])return!1;const q=Date.now()-R.now;return R.maxAge?q>R.maxAge:L[t]&&q>L[t]},v=L=>{if(L[p]>L[g])for(let R=L[n].tail;L[p]>L[g]&&R!==null;){const q=R.prev;E(L,R),R=q}},E=(L,R)=>{if(R){const q=R.value;L[r]&&L[r](q.key,q.value),L[p]-=q.length,L[f].delete(q.key),L[n].removeNode(R)}};class k{constructor(R,q,l,_,b){this.key=R,this.value=q,this.length=l,this.now=_,this.maxAge=b||0}}const P=(L,R,q,l)=>{let _=q.value;i(L,_)&&(E(L,q),L[s]||(_=void 0)),_&&R.call(l,_.value,_.key,L)};F.exports=d},{yallist:83}],38:[function(I,F,j){(function(w){(function(){const g=F.exports;g.types={0:"reserved",1:"connect",2:"connack",3:"publish",4:"puback",5:"pubrec",6:"pubrel",7:"pubcomp",8:"subscribe",9:"suback",10:"unsubscribe",11:"unsuback",12:"pingreq",13:"pingresp",14:"disconnect",15:"auth"},g.codes={};for(const h in g.types){const s=g.types[h];g.codes[s]=h}g.CMD_SHIFT=4,g.CMD_MASK=240,g.DUP_MASK=8,g.QOS_MASK=3,g.QOS_SHIFT=1,g.RETAIN_MASK=1,g.VARBYTEINT_MASK=127,g.VARBYTEINT_FIN_MASK=128,g.VARBYTEINT_MAX=268435455,g.SESSIONPRESENT_MASK=1,g.SESSIONPRESENT_HEADER=w.from([g.SESSIONPRESENT_MASK]),g.CONNACK_HEADER=w.from([g.codes.connack<<g.CMD_SHIFT]),g.USERNAME_MASK=128,g.PASSWORD_MASK=64,g.WILL_RETAIN_MASK=32,g.WILL_QOS_MASK=24,g.WILL_QOS_SHIFT=3,g.WILL_FLAG_MASK=4,g.CLEAN_SESSION_MASK=2,g.CONNECT_HEADER=w.from([g.codes.connect<<g.CMD_SHIFT]),g.properties={sessionExpiryInterval:17,willDelayInterval:24,receiveMaximum:33,maximumPacketSize:39,topicAliasMaximum:34,requestResponseInformation:25,requestProblemInformation:23,userProperties:38,authenticationMethod:21,authenticationData:22,payloadFormatIndicator:1,messageExpiryInterval:2,contentType:3,responseTopic:8,correlationData:9,maximumQoS:36,retainAvailable:37,assignedClientIdentifier:18,reasonString:31,wildcardSubscriptionAvailable:40,subscriptionIdentifiersAvailable:41,sharedSubscriptionAvailable:42,serverKeepAlive:19,responseInformation:26,serverReference:28,topicAlias:35,subscriptionIdentifier:11},g.propertiesCodes={};for(const h in g.properties){const s=g.properties[h];g.propertiesCodes[s]=h}g.propertiesTypes={sessionExpiryInterval:"int32",willDelayInterval:"int32",receiveMaximum:"int16",maximumPacketSize:"int32",topicAliasMaximum:"int16",requestResponseInformation:"byte",requestProblemInformation:"byte",userProperties:"pair",authenticationMethod:"string",authenticationData:"binary",payloadFormatIndicator:"byte",messageExpiryInterval:"int32",contentType:"string",responseTopic:"string",correlationData:"binary",maximumQoS:"int8",retainAvailable:"byte",assignedClientIdentifier:"string",reasonString:"string",wildcardSubscriptionAvailable:"byte",subscriptionIdentifiersAvailable:"byte",sharedSubscriptionAvailable:"byte",serverKeepAlive:"int16",responseInformation:"string",serverReference:"string",topicAlias:"int16",subscriptionIdentifier:"var"};function p(h){return[0,1,2].map(s=>[0,1].map(t=>[0,1].map(r=>{const e=w.alloc(1);return e.writeUInt8(g.codes[h]<<g.CMD_SHIFT|(t?g.DUP_MASK:0)|s<<g.QOS_SHIFT|r,0,!0),e})))}g.PUBLISH_HEADER=p("publish"),g.SUBSCRIBE_HEADER=p("subscribe"),g.SUBSCRIBE_OPTIONS_QOS_MASK=3,g.SUBSCRIBE_OPTIONS_NL_MASK=1,g.SUBSCRIBE_OPTIONS_NL_SHIFT=2,g.SUBSCRIBE_OPTIONS_RAP_MASK=1,g.SUBSCRIBE_OPTIONS_RAP_SHIFT=3,g.SUBSCRIBE_OPTIONS_RH_MASK=3,g.SUBSCRIBE_OPTIONS_RH_SHIFT=4,g.SUBSCRIBE_OPTIONS_RH=[0,16,32],g.SUBSCRIBE_OPTIONS_NL=4,g.SUBSCRIBE_OPTIONS_RAP=8,g.SUBSCRIBE_OPTIONS_QOS=[0,1,2],g.UNSUBSCRIBE_HEADER=p("unsubscribe"),g.ACKS={unsuback:p("unsuback"),puback:p("puback"),pubcomp:p("pubcomp"),pubrel:p("pubrel"),pubrec:p("pubrec")},g.SUBACK_HEADER=w.from([g.codes.suback<<g.CMD_SHIFT]),g.VERSION3=w.from([3]),g.VERSION4=w.from([4]),g.VERSION5=w.from([5]),g.VERSION131=w.from([131]),g.VERSION132=w.from([132]),g.QOS=[0,1,2].map(h=>w.from([h])),g.EMPTY={pingreq:w.from([g.codes.pingreq<<4,0]),pingresp:w.from([g.codes.pingresp<<4,0]),disconnect:w.from([g.codes.disconnect<<4,0])}}).call(this)}).call(this,I("buffer").Buffer)},{buffer:17}],39:[function(I,F,j){(function(w){(function(){const g=I("./writeToStream"),p=I("events");function h(t,r){const e=new s;return g(t,e,r),e.concat()}class s extends p{constructor(){super(),this._array=new Array(20),this._i=0}write(r){return this._array[this._i++]=r,!0}concat(){let r=0;const e=new Array(this._array.length),n=this._array;let f=0,o;for(o=0;o<n.length&&n[o]!==void 0;o++)typeof n[o]!="string"?e[o]=n[o].length:e[o]=w.byteLength(n[o]),r+=e[o];const y=w.allocUnsafe(r);for(o=0;o<n.length&&n[o]!==void 0;o++)typeof n[o]!="string"?(n[o].copy(y,f),f+=e[o]):(y.write(n[o],f),f+=e[o]);return y}}F.exports=h}).call(this)}).call(this,I("buffer").Buffer)},{"./writeToStream":44,buffer:17,events:22}],40:[function(I,F,j){j.parser=I("./parser").parser,j.generate=I("./generate"),j.writeToStream=I("./writeToStream")},{"./generate":39,"./parser":43,"./writeToStream":44}],41:[function(I,F,j){(function(w){(function(){const p={},h=w.isBuffer(w.from([1,2]).subarray(0,1));function s(n){const f=w.allocUnsafe(2);return f.writeUInt8(n>>8,0),f.writeUInt8(n&255,1),f}function t(){for(let n=0;n<65536;n++)p[n]=s(n)}function r(n){let o=0,y=0;const d=w.allocUnsafe(4);do o=n%128|0,n=n/128|0,n>0&&(o=o|128),d.writeUInt8(o,y++);while(n>0&&y<4);return n>0&&(y=0),h?d.subarray(0,y):d.slice(0,y)}function e(n){const f=w.allocUnsafe(4);return f.writeUInt32BE(n,0),f}F.exports={cache:p,generateCache:t,generateNumber:s,genBufVariableByteInt:r,generate4ByteBuffer:e}}).call(this)}).call(this,I("buffer").Buffer)},{buffer:17}],42:[function(I,F,j){class w{constructor(){this.cmd=null,this.retain=!1,this.qos=0,this.dup=!1,this.length=-1,this.topic=null,this.payload=null}}F.exports=w},{}],43:[function(I,F,j){const w=I("bl"),g=I("events"),p=I("./packet"),h=I("./constants"),s=I("debug")("mqtt-packet:parser");class t extends g{constructor(){super(),this.parser=this.constructor.parser}static parser(e){return this instanceof t?(this.settings=e||{},this._states=["_parseHeader","_parseLength","_parsePayload","_newPacket"],this._resetState(),this):new t().parser(e)}_resetState(){s("_resetState: resetting packet, error, _list, and _stateCounter"),this.packet=new p,this.error=null,this._list=w(),this._stateCounter=0}parse(e){for(this.error&&this._resetState(),this._list.append(e),s("parse: current state: %s",this._states[this._stateCounter]);(this.packet.length!==-1||this._list.length>0)&&this[this._states[this._stateCounter]]()&&!this.error;)this._stateCounter++,s("parse: state complete. _stateCounter is now: %d",this._stateCounter),s("parse: packet.length: %d, buffer list length: %d",this.packet.length,this._list.length),this._stateCounter>=this._states.length&&(this._stateCounter=0);return s("parse: exited while loop. packet: %d, buffer list length: %d",this.packet.length,this._list.length),this._list.length}_parseHeader(){const e=this._list.readUInt8(0);return this.packet.cmd=h.types[e>>h.CMD_SHIFT],this.packet.retain=(e&h.RETAIN_MASK)!==0,this.packet.qos=e>>h.QOS_SHIFT&h.QOS_MASK,this.packet.dup=(e&h.DUP_MASK)!==0,s("_parseHeader: packet: %o",this.packet),this._list.consume(1),!0}_parseLength(){const e=this._parseVarByteNum(!0);return e&&(this.packet.length=e.value,this._list.consume(e.bytes)),s("_parseLength %d",e.value),!!e}_parsePayload(){s("_parsePayload: payload %O",this._list);let e=!1;if(this.packet.length===0||this._list.length>=this.packet.length){switch(this._pos=0,this.packet.cmd){case"connect":this._parseConnect();break;case"connack":this._parseConnack();break;case"publish":this._parsePublish();break;case"puback":case"pubrec":case"pubrel":case"pubcomp":this._parseConfirmation();break;case"subscribe":this._parseSubscribe();break;case"suback":this._parseSuback();break;case"unsubscribe":this._parseUnsubscribe();break;case"unsuback":this._parseUnsuback();break;case"pingreq":case"pingresp":break;case"disconnect":this._parseDisconnect();break;case"auth":this._parseAuth();break;default:this._emitError(new Error("Not supported"))}e=!0}return s("_parsePayload complete result: %s",e),e}_parseConnect(){s("_parseConnect");let e,n,f,o;const y={},d=this.packet,u=this._parseString();if(u===null)return this._emitError(new Error("Cannot parse protocolId"));if(u!=="MQTT"&&u!=="MQIsdp")return this._emitError(new Error("Invalid protocolId"));if(d.protocolId=u,this._pos>=this._list.length)return this._emitError(new Error("Packet too short"));if(d.protocolVersion=this._list.readUInt8(this._pos),d.protocolVersion>=128&&(d.bridgeMode=!0,d.protocolVersion=d.protocolVersion-128),d.protocolVersion!==3&&d.protocolVersion!==4&&d.protocolVersion!==5)return this._emitError(new Error("Invalid protocol version"));if(this._pos++,this._pos>=this._list.length)return this._emitError(new Error("Packet too short"));if(y.username=this._list.readUInt8(this._pos)&h.USERNAME_MASK,y.password=this._list.readUInt8(this._pos)&h.PASSWORD_MASK,y.will=this._list.readUInt8(this._pos)&h.WILL_FLAG_MASK,y.will&&(d.will={},d.will.retain=(this._list.readUInt8(this._pos)&h.WILL_RETAIN_MASK)!==0,d.will.qos=(this._list.readUInt8(this._pos)&h.WILL_QOS_MASK)>>h.WILL_QOS_SHIFT),d.clean=(this._list.readUInt8(this._pos)&h.CLEAN_SESSION_MASK)!==0,this._pos++,d.keepalive=this._parseNum(),d.keepalive===-1)return this._emitError(new Error("Packet too short"));if(d.protocolVersion===5){const v=this._parseProperties();Object.getOwnPropertyNames(v).length&&(d.properties=v)}const i=this._parseString();if(i===null)return this._emitError(new Error("Packet too short"));if(d.clientId=i,s("_parseConnect: packet.clientId: %s",d.clientId),y.will){if(d.protocolVersion===5){const v=this._parseProperties();Object.getOwnPropertyNames(v).length&&(d.will.properties=v)}if(e=this._parseString(),e===null)return this._emitError(new Error("Cannot parse will topic"));if(d.will.topic=e,s("_parseConnect: packet.will.topic: %s",d.will.topic),n=this._parseBuffer(),n===null)return this._emitError(new Error("Cannot parse will payload"));d.will.payload=n,s("_parseConnect: packet.will.paylaod: %s",d.will.payload)}if(y.username){if(o=this._parseString(),o===null)return this._emitError(new Error("Cannot parse username"));d.username=o,s("_parseConnect: packet.username: %s",d.username)}if(y.password){if(f=this._parseBuffer(),f===null)return this._emitError(new Error("Cannot parse password"));d.password=f}return this.settings=d,s("_parseConnect: complete"),d}_parseConnack(){s("_parseConnack");const e=this.packet;if(this._list.length<1)return null;if(e.sessionPresent=!!(this._list.readUInt8(this._pos++)&h.SESSIONPRESENT_MASK),this.settings.protocolVersion===5)this._list.length>=2?e.reasonCode=this._list.readUInt8(this._pos++):e.reasonCode=0;else{if(this._list.length<2)return null;e.returnCode=this._list.readUInt8(this._pos++)}if(e.returnCode===-1||e.reasonCode===-1)return this._emitError(new Error("Cannot parse return code"));if(this.settings.protocolVersion===5){const n=this._parseProperties();Object.getOwnPropertyNames(n).length&&(e.properties=n)}s("_parseConnack: complete")}_parsePublish(){s("_parsePublish");const e=this.packet;if(e.topic=this._parseString(),e.topic===null)return this._emitError(new Error("Cannot parse topic"));if(!(e.qos>0&&!this._parseMessageId())){if(this.settings.protocolVersion===5){const n=this._parseProperties();Object.getOwnPropertyNames(n).length&&(e.properties=n)}e.payload=this._list.slice(this._pos,e.length),s("_parsePublish: payload from buffer list: %o",e.payload)}}_parseSubscribe(){s("_parseSubscribe");const e=this.packet;let n,f,o,y,d,u,i;if(e.qos!==1)return this._emitError(new Error("Wrong subscribe header"));if(e.subscriptions=[],!!this._parseMessageId()){if(this.settings.protocolVersion===5){const v=this._parseProperties();Object.getOwnPropertyNames(v).length&&(e.properties=v)}for(;this._pos<e.length;){if(n=this._parseString(),n===null)return this._emitError(new Error("Cannot parse topic"));if(this._pos>=e.length)return this._emitError(new Error("Malformed Subscribe Payload"));f=this._parseByte(),o=f&h.SUBSCRIBE_OPTIONS_QOS_MASK,u=(f>>h.SUBSCRIBE_OPTIONS_NL_SHIFT&h.SUBSCRIBE_OPTIONS_NL_MASK)!==0,d=(f>>h.SUBSCRIBE_OPTIONS_RAP_SHIFT&h.SUBSCRIBE_OPTIONS_RAP_MASK)!==0,y=f>>h.SUBSCRIBE_OPTIONS_RH_SHIFT&h.SUBSCRIBE_OPTIONS_RH_MASK,i={topic:n,qos:o},this.settings.protocolVersion===5?(i.nl=u,i.rap=d,i.rh=y):this.settings.bridgeMode&&(i.rh=0,i.rap=!0,i.nl=!0),s("_parseSubscribe: push subscription `%s` to subscription",i),e.subscriptions.push(i)}}}_parseSuback(){s("_parseSuback");const e=this.packet;if(this.packet.granted=[],!!this._parseMessageId()){if(this.settings.protocolVersion===5){const n=this._parseProperties();Object.getOwnPropertyNames(n).length&&(e.properties=n)}for(;this._pos<this.packet.length;)this.packet.granted.push(this._list.readUInt8(this._pos++))}}_parseUnsubscribe(){s("_parseUnsubscribe");const e=this.packet;if(e.unsubscriptions=[],!!this._parseMessageId()){if(this.settings.protocolVersion===5){const n=this._parseProperties();Object.getOwnPropertyNames(n).length&&(e.properties=n)}for(;this._pos<e.length;){const n=this._parseString();if(n===null)return this._emitError(new Error("Cannot parse topic"));s("_parseUnsubscribe: push topic `%s` to unsubscriptions",n),e.unsubscriptions.push(n)}}}_parseUnsuback(){s("_parseUnsuback");const e=this.packet;if(!this._parseMessageId())return this._emitError(new Error("Cannot parse messageId"));if(this.settings.protocolVersion===5){const n=this._parseProperties();for(Object.getOwnPropertyNames(n).length&&(e.properties=n),e.granted=[];this._pos<this.packet.length;)this.packet.granted.push(this._list.readUInt8(this._pos++))}}_parseConfirmation(){s("_parseConfirmation: packet.cmd: `%s`",this.packet.cmd);const e=this.packet;if(this._parseMessageId(),this.settings.protocolVersion===5&&(e.length>2?(e.reasonCode=this._parseByte(),s("_parseConfirmation: packet.reasonCode `%d`",e.reasonCode)):e.reasonCode=0,e.length>3)){const n=this._parseProperties();Object.getOwnPropertyNames(n).length&&(e.properties=n)}return!0}_parseDisconnect(){const e=this.packet;if(s("_parseDisconnect"),this.settings.protocolVersion===5){this._list.length>0?e.reasonCode=this._parseByte():e.reasonCode=0;const n=this._parseProperties();Object.getOwnPropertyNames(n).length&&(e.properties=n)}return s("_parseDisconnect result: true"),!0}_parseAuth(){s("_parseAuth");const e=this.packet;if(this.settings.protocolVersion!==5)return this._emitError(new Error("Not supported auth packet for this version MQTT"));e.reasonCode=this._parseByte();const n=this._parseProperties();return Object.getOwnPropertyNames(n).length&&(e.properties=n),s("_parseAuth: result: true"),!0}_parseMessageId(){const e=this.packet;return e.messageId=this._parseNum(),e.messageId===null?(this._emitError(new Error("Cannot parse messageId")),!1):(s("_parseMessageId: packet.messageId %d",e.messageId),!0)}_parseString(e){const n=this._parseNum(),f=n+this._pos;if(n===-1||f>this._list.length||f>this.packet.length)return null;const o=this._list.toString("utf8",this._pos,f);return this._pos+=n,s("_parseString: result: %s",o),o}_parseStringPair(){return s("_parseStringPair"),{name:this._parseString(),value:this._parseString()}}_parseBuffer(){const e=this._parseNum(),n=e+this._pos;if(e===-1||n>this._list.length||n>this.packet.length)return null;const f=this._list.slice(this._pos,n);return this._pos+=e,s("_parseBuffer: result: %o",f),f}_parseNum(){if(this._list.length-this._pos<2)return-1;const e=this._list.readUInt16BE(this._pos);return this._pos+=2,s("_parseNum: result: %s",e),e}_parse4ByteNum(){if(this._list.length-this._pos<4)return-1;const e=this._list.readUInt32BE(this._pos);return this._pos+=4,s("_parse4ByteNum: result: %s",e),e}_parseVarByteNum(e){s("_parseVarByteNum");const n=4;let f=0,o=1,y=0,d=!1,u;const i=this._pos?this._pos:0;for(;f<n&&i+f<this._list.length;){if(u=this._list.readUInt8(i+f++),y+=o*(u&h.VARBYTEINT_MASK),o*=128,!(u&h.VARBYTEINT_FIN_MASK)){d=!0;break}if(this._list.length<=f)break}return!d&&f===n&&this._list.length>=f&&this._emitError(new Error("Invalid variable byte integer")),i&&(this._pos+=f),d=d?e?{bytes:f,value:y}:y:!1,s("_parseVarByteNum: result: %o",d),d}_parseByte(){let e;return this._pos<this._list.length&&(e=this._list.readUInt8(this._pos),this._pos++),s("_parseByte: result: %o",e),e}_parseByType(e){switch(s("_parseByType: type: %s",e),e){case"byte":return this._parseByte()!==0;case"int8":return this._parseByte();case"int16":return this._parseNum();case"int32":return this._parse4ByteNum();case"var":return this._parseVarByteNum();case"string":return this._parseString();case"pair":return this._parseStringPair();case"binary":return this._parseBuffer()}}_parseProperties(){s("_parseProperties");const e=this._parseVarByteNum(),f=this._pos+e,o={};for(;this._pos<f;){const y=this._parseByte();if(!y)return this._emitError(new Error("Cannot parse property code type")),!1;const d=h.propertiesCodes[y];if(!d)return this._emitError(new Error("Unknown property")),!1;if(d==="userProperties"){o[d]||(o[d]=Object.create(null));const u=this._parseByType(h.propertiesTypes[d]);if(o[d][u.name])if(Array.isArray(o[d][u.name]))o[d][u.name].push(u.value);else{const i=o[d][u.name];o[d][u.name]=[i],o[d][u.name].push(u.value)}else o[d][u.name]=u.value;continue}o[d]?Array.isArray(o[d])?o[d].push(this._parseByType(h.propertiesTypes[d])):(o[d]=[o[d]],o[d].push(this._parseByType(h.propertiesTypes[d]))):o[d]=this._parseByType(h.propertiesTypes[d])}return o}_newPacket(){return s("_newPacket"),this.packet&&(this._list.consume(this.packet.length),s("_newPacket: parser emit packet: packet.cmd: %s, packet.payload: %s, packet.length: %d",this.packet.cmd,this.packet.payload,this.packet.length),this.emit("packet",this.packet)),s("_newPacket: new packet"),this.packet=new p,this._pos=0,!0}_emitError(e){s("_emitError"),this.error=e,this.emit("error",e)}}F.exports=t},{"./constants":38,"./packet":42,bl:15,debug:18,events:22}],44:[function(I,F,j){(function(w){(function(){const g=I("./constants"),p=w.allocUnsafe(0),h=w.from([0]),s=I("./numbers"),t=I("process-nextick-args").nextTick,r=I("debug")("mqtt-packet:writeToStream"),e=s.cache,n=s.generateNumber,f=s.generateCache,o=s.genBufVariableByteInt,y=s.generate4ByteBuffer;let d=D,u=!0;function i(H,U,Z){switch(r("generate called"),U.cork&&(U.cork(),t(v,U)),u&&(u=!1,f()),r("generate: packet.cmd: %s",H.cmd),H.cmd){case"connect":return E(H,U);case"connack":return k(H,U,Z);case"publish":return P(H,U,Z);case"puback":case"pubrec":case"pubrel":case"pubcomp":return L(H,U,Z);case"subscribe":return R(H,U,Z);case"suback":return q(H,U,Z);case"unsubscribe":return l(H,U,Z);case"unsuback":return _(H,U,Z);case"pingreq":case"pingresp":return b(H,U);case"disconnect":return B(H,U,Z);case"auth":return V(H,U,Z);default:return U.emit("error",new Error("Unknown command")),!1}}Object.defineProperty(i,"cacheNumbers",{get(){return d===D},set(H){H?((!e||Object.keys(e).length===0)&&(u=!0),d=D):(u=!1,d=G)}});function v(H){H.uncork()}function E(H,U,Z){const O=H||{},M=O.protocolId||"MQTT";let z=O.protocolVersion||4;const $=O.will;let X=O.clean;const S=O.keepalive||0,A=O.clientId||"",m=O.username,a=O.password,c=O.properties;X===void 0&&(X=!0);let C=0;if(!M||typeof M!="string"&&!w.isBuffer(M))return U.emit("error",new Error("Invalid protocolId")),!1;if(C+=M.length+2,z!==3&&z!==4&&z!==5)return U.emit("error",new Error("Invalid protocol version")),!1;if(C+=1,(typeof A=="string"||w.isBuffer(A))&&(A||z>=4)&&(A||X))C+=w.byteLength(A)+2;else{if(z<4)return U.emit("error",new Error("clientId must be supplied before 3.1.1")),!1;if(X*1===0)return U.emit("error",new Error("clientId must be given if cleanSession set to 0")),!1}if(typeof S!="number"||S<0||S>65535||S%1!==0)return U.emit("error",new Error("Invalid keepalive")),!1;if(C+=2,C+=1,z===5){var N=K(U,c);if(!N)return!1;C+=N.length}if($){if(typeof $!="object")return U.emit("error",new Error("Invalid will")),!1;if(!$.topic||typeof $.topic!="string")return U.emit("error",new Error("Invalid will topic")),!1;if(C+=w.byteLength($.topic)+2,C+=2,$.payload)if($.payload.length>=0)typeof $.payload=="string"?C+=w.byteLength($.payload):C+=$.payload.length;else return U.emit("error",new Error("Invalid will payload")),!1;var J={};if(z===5){if(J=K(U,$.properties),!J)return!1;C+=J.length}}let te=!1;if(m!=null)if(ie(m))te=!0,C+=w.byteLength(m)+2;else return U.emit("error",new Error("Invalid username")),!1;if(a!=null){if(!te)return U.emit("error",new Error("Username is required to use password")),!1;if(ie(a))C+=se(a)+2;else return U.emit("error",new Error("Invalid password")),!1}U.write(g.CONNECT_HEADER),Y(U,C),ne(U,M),O.bridgeMode&&(z+=128),U.write(z===131?g.VERSION131:z===132?g.VERSION132:z===4?g.VERSION4:z===5?g.VERSION5:g.VERSION3);let ae=0;return ae|=m!=null?g.USERNAME_MASK:0,ae|=a!=null?g.PASSWORD_MASK:0,ae|=$&&$.retain?g.WILL_RETAIN_MASK:0,ae|=$&&$.qos?$.qos<<g.WILL_QOS_SHIFT:0,ae|=$?g.WILL_FLAG_MASK:0,ae|=X?g.CLEAN_SESSION_MASK:0,U.write(w.from([ae])),d(U,S),z===5&&N.write(),ne(U,A),$&&(z===5&&J.write(),T(U,$.topic),ne(U,$.payload)),m!=null&&ne(U,m),a!=null&&ne(U,a),!0}function k(H,U,Z){const O=Z?Z.protocolVersion:4,M=H||{},z=O===5?M.reasonCode:M.returnCode,$=M.properties;let X=2;if(typeof z!="number")return U.emit("error",new Error("Invalid return code")),!1;let S=null;if(O===5){if(S=K(U,$),!S)return!1;X+=S.length}return U.write(g.CONNACK_HEADER),Y(U,X),U.write(M.sessionPresent?g.SESSIONPRESENT_HEADER:h),U.write(w.from([z])),S!=null&&S.write(),!0}function P(H,U,Z){r("publish: packet: %o",H);const O=Z?Z.protocolVersion:4,M=H||{},z=M.qos||0,$=M.retain?g.RETAIN_MASK:0,X=M.topic,S=M.payload||p,A=M.messageId,m=M.properties;let a=0;if(typeof X=="string")a+=w.byteLength(X)+2;else if(w.isBuffer(X))a+=X.length+2;else return U.emit("error",new Error("Invalid topic")),!1;if(w.isBuffer(S)?a+=S.length:a+=w.byteLength(S),z&&typeof A!="number")return U.emit("error",new Error("Invalid messageId")),!1;z&&(a+=2);let c=null;if(O===5){if(c=K(U,m),!c)return!1;a+=c.length}return U.write(g.PUBLISH_HEADER[z][M.dup?1:0][$?1:0]),Y(U,a),d(U,se(X)),U.write(X),z>0&&d(U,A),c!=null&&c.write(),r("publish: payload: %o",S),U.write(S)}function L(H,U,Z){const O=Z?Z.protocolVersion:4,M=H||{},z=M.cmd||"puback",$=M.messageId,X=M.dup&&z==="pubrel"?g.DUP_MASK:0;let S=0;const A=M.reasonCode,m=M.properties;let a=O===5?3:2;if(z==="pubrel"&&(S=1),typeof $!="number")return U.emit("error",new Error("Invalid messageId")),!1;let c=null;if(O===5&&typeof m=="object"){if(c=Q(U,m,Z,a),!c)return!1;a+=c.length}return U.write(g.ACKS[z][S][X][0]),Y(U,a),d(U,$),O===5&&U.write(w.from([A])),c!==null&&c.write(),!0}function R(H,U,Z){r("subscribe: packet: ");const O=Z?Z.protocolVersion:4,M=H||{},z=M.dup?g.DUP_MASK:0,$=M.messageId,X=M.subscriptions,S=M.properties;let A=0;if(typeof $!="number")return U.emit("error",new Error("Invalid messageId")),!1;A+=2;let m=null;if(O===5){if(m=K(U,S),!m)return!1;A+=m.length}if(typeof X=="object"&&X.length)for(let c=0;c<X.length;c+=1){const C=X[c].topic,N=X[c].qos;if(typeof C!="string")return U.emit("error",new Error("Invalid subscriptions - invalid topic")),!1;if(typeof N!="number")return U.emit("error",new Error("Invalid subscriptions - invalid qos")),!1;if(O===5){if(typeof(X[c].nl||!1)!="boolean")return U.emit("error",new Error("Invalid subscriptions - invalid No Local")),!1;if(typeof(X[c].rap||!1)!="boolean")return U.emit("error",new Error("Invalid subscriptions - invalid Retain as Published")),!1;const ae=X[c].rh||0;if(typeof ae!="number"||ae>2)return U.emit("error",new Error("Invalid subscriptions - invalid Retain Handling")),!1}A+=w.byteLength(C)+2+1}else return U.emit("error",new Error("Invalid subscriptions")),!1;r("subscribe: writing to stream: %o",g.SUBSCRIBE_HEADER),U.write(g.SUBSCRIBE_HEADER[1][z?1:0][0]),Y(U,A),d(U,$),m!==null&&m.write();let a=!0;for(const c of X){const C=c.topic,N=c.qos,J=+c.nl,te=+c.rap,ae=c.rh;let fe;T(U,C),fe=g.SUBSCRIBE_OPTIONS_QOS[N],O===5&&(fe|=J?g.SUBSCRIBE_OPTIONS_NL:0,fe|=te?g.SUBSCRIBE_OPTIONS_RAP:0,fe|=ae?g.SUBSCRIBE_OPTIONS_RH[ae]:0),a=U.write(w.from([fe]))}return a}function q(H,U,Z){const O=Z?Z.protocolVersion:4,M=H||{},z=M.messageId,$=M.granted,X=M.properties;let S=0;if(typeof z!="number")return U.emit("error",new Error("Invalid messageId")),!1;if(S+=2,typeof $=="object"&&$.length)for(let m=0;m<$.length;m+=1){if(typeof $[m]!="number")return U.emit("error",new Error("Invalid qos vector")),!1;S+=1}else return U.emit("error",new Error("Invalid qos vector")),!1;let A=null;if(O===5){if(A=Q(U,X,Z,S),!A)return!1;S+=A.length}return U.write(g.SUBACK_HEADER),Y(U,S),d(U,z),A!==null&&A.write(),U.write(w.from($))}function l(H,U,Z){const O=Z?Z.protocolVersion:4,M=H||{},z=M.messageId,$=M.dup?g.DUP_MASK:0,X=M.unsubscriptions,S=M.properties;let A=0;if(typeof z!="number")return U.emit("error",new Error("Invalid messageId")),!1;if(A+=2,typeof X=="object"&&X.length)for(let c=0;c<X.length;c+=1){if(typeof X[c]!="string")return U.emit("error",new Error("Invalid unsubscriptions")),!1;A+=w.byteLength(X[c])+2}else return U.emit("error",new Error("Invalid unsubscriptions")),!1;let m=null;if(O===5){if(m=K(U,S),!m)return!1;A+=m.length}U.write(g.UNSUBSCRIBE_HEADER[1][$?1:0][0]),Y(U,A),d(U,z),m!==null&&m.write();let a=!0;for(let c=0;c<X.length;c++)a=T(U,X[c]);return a}function _(H,U,Z){const O=Z?Z.protocolVersion:4,M=H||{},z=M.messageId,$=M.dup?g.DUP_MASK:0,X=M.granted,S=M.properties,A=M.cmd,m=0;let a=2;if(typeof z!="number")return U.emit("error",new Error("Invalid messageId")),!1;if(O===5)if(typeof X=="object"&&X.length)for(let C=0;C<X.length;C+=1){if(typeof X[C]!="number")return U.emit("error",new Error("Invalid qos vector")),!1;a+=1}else return U.emit("error",new Error("Invalid qos vector")),!1;let c=null;if(O===5){if(c=Q(U,S,Z,a),!c)return!1;a+=c.length}return U.write(g.ACKS[A][m][$][0]),Y(U,a),d(U,z),c!==null&&c.write(),O===5&&U.write(w.from(X)),!0}function b(H,U,Z){return U.write(g.EMPTY[H.cmd])}function B(H,U,Z){const O=Z?Z.protocolVersion:4,M=H||{},z=M.reasonCode,$=M.properties;let X=O===5?1:0,S=null;if(O===5){if(S=Q(U,$,Z,X),!S)return!1;X+=S.length}return U.write(w.from([g.codes.disconnect<<4])),Y(U,X),O===5&&U.write(w.from([z])),S!==null&&S.write(),!0}function V(H,U,Z){const O=Z?Z.protocolVersion:4,M=H||{},z=M.reasonCode,$=M.properties;let X=O===5?1:0;O!==5&&U.emit("error",new Error("Invalid mqtt version for auth packet"));const S=Q(U,$,Z,X);return S?(X+=S.length,U.write(w.from([g.codes.auth<<4])),Y(U,X),U.write(w.from([z])),S!==null&&S.write(),!0):!1}const W={};function Y(H,U){if(U>g.VARBYTEINT_MAX)return H.emit("error",new Error(`Invalid variable byte integer: ${U}`)),!1;let Z=W[U];return Z||(Z=o(U),U<16384&&(W[U]=Z)),r("writeVarByteInt: writing to stream: %o",Z),H.write(Z)}function T(H,U){const Z=w.byteLength(U);return d(H,Z),r("writeString: %s",U),H.write(U,"utf8")}function x(H,U,Z){T(H,U),T(H,Z)}function D(H,U){return r("writeNumberCached: number: %d",U),r("writeNumberCached: %o",e[U]),H.write(e[U])}function G(H,U){const Z=n(U);return r("writeNumberGenerated: %o",Z),H.write(Z)}function oe(H,U){const Z=y(U);return r("write4ByteNumber: %o",Z),H.write(Z)}function ne(H,U){typeof U=="string"?T(H,U):U?(d(H,U.length),H.write(U)):d(H,0)}function K(H,U){if(typeof U!="object"||U.length!=null)return{length:1,write(){ee(H,{},0)}};let Z=0;function O(z,$){const X=g.propertiesTypes[z];let S=0;switch(X){case"byte":{if(typeof $!="boolean")return H.emit("error",new Error(`Invalid ${z}: ${$}`)),!1;S+=2;break}case"int8":{if(typeof $!="number"||$<0||$>255)return H.emit("error",new Error(`Invalid ${z}: ${$}`)),!1;S+=2;break}case"binary":{if($&&$===null)return H.emit("error",new Error(`Invalid ${z}: ${$}`)),!1;S+=1+w.byteLength($)+2;break}case"int16":{if(typeof $!="number"||$<0||$>65535)return H.emit("error",new Error(`Invalid ${z}: ${$}`)),!1;S+=3;break}case"int32":{if(typeof $!="number"||$<0||$>4294967295)return H.emit("error",new Error(`Invalid ${z}: ${$}`)),!1;S+=5;break}case"var":{if(typeof $!="number"||$<0||$>268435455)return H.emit("error",new Error(`Invalid ${z}: ${$}`)),!1;S+=1+w.byteLength(o($));break}case"string":{if(typeof $!="string")return H.emit("error",new Error(`Invalid ${z}: ${$}`)),!1;S+=3+w.byteLength($.toString());break}case"pair":{if(typeof $!="object")return H.emit("error",new Error(`Invalid ${z}: ${$}`)),!1;S+=Object.getOwnPropertyNames($).reduce((A,m)=>{const a=$[m];return Array.isArray(a)?A+=a.reduce((c,C)=>(c+=3+w.byteLength(m.toString())+2+w.byteLength(C.toString()),c),0):A+=3+w.byteLength(m.toString())+2+w.byteLength($[m].toString()),A},0);break}default:return H.emit("error",new Error(`Invalid property ${z}: ${$}`)),!1}return S}if(U)for(const z in U){let $=0,X=0;const S=U[z];if(Array.isArray(S))for(let A=0;A<S.length;A++){if(X=O(z,S[A]),!X)return!1;$+=X}else{if(X=O(z,S),!X)return!1;$=X}if(!$)return!1;Z+=$}return{length:w.byteLength(o(Z))+Z,write(){ee(H,U,Z)}}}function Q(H,U,Z,O){const M=["reasonString","userProperties"],z=Z&&Z.properties&&Z.properties.maximumPacketSize?Z.properties.maximumPacketSize:0;let $=K(H,U);if(z)for(;O+$.length>z;){const X=M.shift();if(X&&U[X])delete U[X],$=K(H,U);else return!1}return $}function re(H,U,Z){switch(g.propertiesTypes[U]){case"byte":{H.write(w.from([g.properties[U]])),H.write(w.from([+Z]));break}case"int8":{H.write(w.from([g.properties[U]])),H.write(w.from([Z]));break}case"binary":{H.write(w.from([g.properties[U]])),ne(H,Z);break}case"int16":{H.write(w.from([g.properties[U]])),d(H,Z);break}case"int32":{H.write(w.from([g.properties[U]])),oe(H,Z);break}case"var":{H.write(w.from([g.properties[U]])),Y(H,Z);break}case"string":{H.write(w.from([g.properties[U]])),T(H,Z);break}case"pair":{Object.getOwnPropertyNames(Z).forEach(M=>{const z=Z[M];Array.isArray(z)?z.forEach($=>{H.write(w.from([g.properties[U]])),x(H,M.toString(),$.toString())}):(H.write(w.from([g.properties[U]])),x(H,M.toString(),z.toString()))});break}default:return H.emit("error",new Error(`Invalid property ${U} value: ${Z}`)),!1}}function ee(H,U,Z){Y(H,Z);for(const O in U)if(Object.prototype.hasOwnProperty.call(U,O)&&U[O]!==null){const M=U[O];if(Array.isArray(M))for(let z=0;z<M.length;z++)re(H,O,M[z]);else re(H,O,M)}}function se(H){return H?H instanceof w?H.length:w.byteLength(H):0}function ie(H){return typeof H=="string"||H instanceof w}F.exports=i}).call(this)}).call(this,I("buffer").Buffer)},{"./constants":38,"./numbers":41,buffer:17,debug:18,"process-nextick-args":49}],45:[function(I,F,j){var w=1e3,g=w*60,p=g*60,h=p*24,s=h*7,t=h*365.25;F.exports=function(o,y){y=y||{};var d=typeof o;if(d==="string"&&o.length>0)return r(o);if(d==="number"&&isFinite(o))return y.long?n(o):e(o);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(o))};function r(o){if(o=String(o),!(o.length>100)){var y=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(o);if(y){var d=parseFloat(y[1]),u=(y[2]||"ms").toLowerCase();switch(u){case"years":case"year":case"yrs":case"yr":case"y":return d*t;case"weeks":case"week":case"w":return d*s;case"days":case"day":case"d":return d*h;case"hours":case"hour":case"hrs":case"hr":case"h":return d*p;case"minutes":case"minute":case"mins":case"min":case"m":return d*g;case"seconds":case"second":case"secs":case"sec":case"s":return d*w;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return d;default:return}}}}function e(o){var y=Math.abs(o);return y>=h?Math.round(o/h)+"d":y>=p?Math.round(o/p)+"h":y>=g?Math.round(o/g)+"m":y>=w?Math.round(o/w)+"s":o+"ms"}function n(o){var y=Math.abs(o);return y>=h?f(o,y,h,"day"):y>=p?f(o,y,p,"hour"):y>=g?f(o,y,g,"minute"):y>=w?f(o,y,w,"second"):o+" ms"}function f(o,y,d,u){var i=y>=d*1.5;return Math.round(o/d)+" "+u+(i?"s":"")}},{}],46:[function(I,F,j){const w=I("./lib/number-allocator.js");F.exports.NumberAllocator=w},{"./lib/number-allocator.js":47}],47:[function(I,F,j){const w=I("js-sdsl").Set,g=I("debug")("number-allocator:trace"),p=I("debug")("number-allocator:error");function h(t,r){this.low=t,this.high=r}h.prototype.equals=function(t){return this.low===t.low&&this.high===t.high},h.prototype.compare=function(t){return this.low<t.low&&this.high<t.low?-1:t.low<this.low&&t.high<this.low?1:0};function s(t,r){if(!(this instanceof s))return new s(t,r);this.min=t,this.max=r,this.ss=new w([],(e,n)=>e.compare(n)),g("Create"),this.clear()}s.prototype.firstVacant=function(){return this.ss.size()===0?null:this.ss.front().low},s.prototype.alloc=function(){if(this.ss.size()===0)return g("alloc():empty"),null;const t=this.ss.front(),r=t.low;return r+1<=t.high?++t.low:this.ss.eraseElementByPos(0),g("alloc():"+r),r},s.prototype.use=function(t){const r=new h(t,t),e=this.ss.lowerBound(r);if(e){if(e.equals(r))return this.ss.eraseElementByValue(e),g("use():"+t),!0;if(e.low>t)return!1;if(e.low===t)return++e.low,g("use():"+t),!0;if(e.high===t)return--e.high,g("use():"+t),!0;const n=e.low;return e.low=t+1,this.ss.insert(new h(n,t-1)),g("use():"+t),!0}return g("use():failed"),!1},s.prototype.free=function(t){if(t<this.min||t>this.max){p("free():"+t+" is out of range");return}const r=new h(t,t),e=this.ss.lowerBound(r);if(e){if(e.low<=t&&t<=e.high){p("free():"+t+" has already been vacant");return}if(e===this.ss.front())t+1===e.low?--e.low:this.ss.insert(r);else{const n=this.ss.reverseLowerBound(r);n.high+1===t?t+1===e.low?(this.ss.eraseElementByValue(n),e.low=n.low):n.high=t:t+1===e.low?e.low=t:this.ss.insert(r)}}else{if(e===this.ss.front()){this.ss.insert(r);return}const n=this.ss.reverseLowerBound(r);n.high+1===t?n.high=t:this.ss.insert(r)}g("free():"+t)},s.prototype.clear=function(){g("clear()"),this.ss.clear(),this.ss.insert(new h(this.min,this.max))},s.prototype.intervalCount=function(){return this.ss.size()},s.prototype.dump=function(){console.log("length:"+this.ss.size());for(const t of this.ss)console.log(t)},F.exports=s},{debug:18,"js-sdsl":36}],48:[function(I,F,j){var w=I("wrappy");F.exports=w(g),F.exports.strict=w(p),g.proto=g(function(){Object.defineProperty(Function.prototype,"once",{value:function(){return g(this)},configurable:!0}),Object.defineProperty(Function.prototype,"onceStrict",{value:function(){return p(this)},configurable:!0})});function g(h){var s=function(){return s.called?s.value:(s.called=!0,s.value=h.apply(this,arguments))};return s.called=!1,s}function p(h){var s=function(){if(s.called)throw new Error(s.onceError);return s.called=!0,s.value=h.apply(this,arguments)},t=h.name||"Function wrapped with `once`";return s.onceError=t+" shouldn't be called more than once",s.called=!1,s}},{wrappy:79}],49:[function(I,F,j){(function(w){(function(){typeof w>"u"||!w.version||w.version.indexOf("v0.")===0||w.version.indexOf("v1.")===0&&w.version.indexOf("v1.8.")!==0?F.exports={nextTick:g}:F.exports=w;function g(p,h,s,t){if(typeof p!="function")throw new TypeError('"callback" argument must be a function');var r=arguments.length,e,n;switch(r){case 0:case 1:return w.nextTick(p);case 2:return w.nextTick(function(){p.call(null,h)});case 3:return w.nextTick(function(){p.call(null,h,s)});case 4:return w.nextTick(function(){p.call(null,h,s,t)});default:for(e=new Array(r-1),n=0;n<e.length;)e[n++]=arguments[n];return w.nextTick(function(){p.apply(null,e)})}}}).call(this)}).call(this,I("_process"))},{_process:50}],50:[function(I,F,j){var w=F.exports={},g,p;function h(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?g=setTimeout:g=h}catch{g=h}try{typeof clearTimeout=="function"?p=clearTimeout:p=s}catch{p=s}})();function t(v){if(g===setTimeout)return setTimeout(v,0);if((g===h||!g)&&setTimeout)return g=setTimeout,setTimeout(v,0);try{return g(v,0)}catch{try{return g.call(null,v,0)}catch{return g.call(this,v,0)}}}function r(v){if(p===clearTimeout)return clearTimeout(v);if((p===s||!p)&&clearTimeout)return p=clearTimeout,clearTimeout(v);try{return p(v)}catch{try{return p.call(null,v)}catch{return p.call(this,v)}}}var e=[],n=!1,f,o=-1;function y(){!n||!f||(n=!1,f.length?e=f.concat(e):o=-1,e.length&&d())}function d(){if(!n){var v=t(y);n=!0;for(var E=e.length;E;){for(f=e,e=[];++o<E;)f&&f[o].run();o=-1,E=e.length}f=null,n=!1,r(v)}}w.nextTick=function(v){var E=new Array(arguments.length-1);if(arguments.length>1)for(var k=1;k<arguments.length;k++)E[k-1]=arguments[k];e.push(new u(v,E)),e.length===1&&!n&&t(d)};function u(v,E){this.fun=v,this.array=E}u.prototype.run=function(){this.fun.apply(null,this.array)},w.title="browser",w.browser=!0,w.env={},w.argv=[],w.version="",w.versions={};function i(){}w.on=i,w.addListener=i,w.once=i,w.off=i,w.removeListener=i,w.removeAllListeners=i,w.emit=i,w.prependListener=i,w.prependOnceListener=i,w.listeners=function(v){return[]},w.binding=function(v){throw new Error("process.binding is not supported")},w.cwd=function(){return"/"},w.chdir=function(v){throw new Error("process.chdir is not supported")},w.umask=function(){return 0}},{}],51:[function(I,F,j){(function(w){(function(){(function(g){var p=typeof j=="object"&&j&&!j.nodeType&&j,h=typeof F=="object"&&F&&!F.nodeType&&F,s=typeof w=="object"&&w;(s.global===s||s.window===s||s.self===s)&&(g=s);var t,r=2147483647,e=36,n=1,f=26,o=38,y=700,d=72,u=128,i="-",v=/^xn--/,E=/[^\x20-\x7E]/,k=/[\x2E\u3002\uFF0E\uFF61]/g,P={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},L=e-n,R=Math.floor,q=String.fromCharCode,l;function _(K){throw new RangeError(P[K])}function b(K,Q){for(var re=K.length,ee=[];re--;)ee[re]=Q(K[re]);return ee}function B(K,Q){var re=K.split("@"),ee="";re.length>1&&(ee=re[0]+"@",K=re[1]),K=K.replace(k,".");var se=K.split("."),ie=b(se,Q).join(".");return ee+ie}function V(K){for(var Q=[],re=0,ee=K.length,se,ie;re<ee;)se=K.charCodeAt(re++),se>=55296&&se<=56319&&re<ee?(ie=K.charCodeAt(re++),(ie&64512)==56320?Q.push(((se&1023)<<10)+(ie&1023)+65536):(Q.push(se),re--)):Q.push(se);return Q}function W(K){return b(K,function(Q){var re="";return Q>65535&&(Q-=65536,re+=q(Q>>>10&1023|55296),Q=56320|Q&1023),re+=q(Q),re}).join("")}function Y(K){return K-48<10?K-22:K-65<26?K-65:K-97<26?K-97:e}function T(K,Q){return K+22+75*(K<26)-((Q!=0)<<5)}function x(K,Q,re){var ee=0;for(K=re?R(K/y):K>>1,K+=R(K/Q);K>L*f>>1;ee+=e)K=R(K/L);return R(ee+(L+1)*K/(K+o))}function D(K){var Q=[],re=K.length,ee,se=0,ie=u,H=d,U,Z,O,M,z,$,X,S,A;for(U=K.lastIndexOf(i),U<0&&(U=0),Z=0;Z<U;++Z)K.charCodeAt(Z)>=128&&_("not-basic"),Q.push(K.charCodeAt(Z));for(O=U>0?U+1:0;O<re;){for(M=se,z=1,$=e;O>=re&&_("invalid-input"),X=Y(K.charCodeAt(O++)),(X>=e||X>R((r-se)/z))&&_("overflow"),se+=X*z,S=$<=H?n:$>=H+f?f:$-H,!(X<S);$+=e)A=e-S,z>R(r/A)&&_("overflow"),z*=A;ee=Q.length+1,H=x(se-M,ee,M==0),R(se/ee)>r-ie&&_("overflow"),ie+=R(se/ee),se%=ee,Q.splice(se++,0,ie)}return W(Q)}function G(K){var Q,re,ee,se,ie,H,U,Z,O,M,z,$=[],X,S,A,m;for(K=V(K),X=K.length,Q=u,re=0,ie=d,H=0;H<X;++H)z=K[H],z<128&&$.push(q(z));for(ee=se=$.length,se&&$.push(i);ee<X;){for(U=r,H=0;H<X;++H)z=K[H],z>=Q&&z<U&&(U=z);for(S=ee+1,U-Q>R((r-re)/S)&&_("overflow"),re+=(U-Q)*S,Q=U,H=0;H<X;++H)if(z=K[H],z<Q&&++re>r&&_("overflow"),z==Q){for(Z=re,O=e;M=O<=ie?n:O>=ie+f?f:O-ie,!(Z<M);O+=e)m=Z-M,A=e-M,$.push(q(T(M+m%A,0))),Z=R(m/A);$.push(q(T(Z,0))),ie=x(re,S,ee==se),re=0,++ee}++re,++Q}return $.join("")}function oe(K){return B(K,function(Q){return v.test(Q)?D(Q.slice(4).toLowerCase()):Q})}function ne(K){return B(K,function(Q){return E.test(Q)?"xn--"+G(Q):Q})}if(t={version:"1.4.1",ucs2:{decode:V,encode:W},decode:D,encode:G,toASCII:ne,toUnicode:oe},p&&h)if(F.exports==p)h.exports=t;else for(l in t)t.hasOwnProperty(l)&&(p[l]=t[l]);else g.punycode=t})(this)}).call(this)}).call(this,typeof de<"u"?de:typeof self<"u"?self:typeof window<"u"?window:{})},{}],52:[function(I,F,j){function w(p,h){return Object.prototype.hasOwnProperty.call(p,h)}F.exports=function(p,h,s,t){h=h||"&",s=s||"=";var r={};if(typeof p!="string"||p.length===0)return r;var e=/\+/g;p=p.split(h);var n=1e3;t&&typeof t.maxKeys=="number"&&(n=t.maxKeys);var f=p.length;n>0&&f>n&&(f=n);for(var o=0;o<f;++o){var y=p[o].replace(e,"%20"),d=y.indexOf(s),u,i,v,E;d>=0?(u=y.substr(0,d),i=y.substr(d+1)):(u=y,i=""),v=decodeURIComponent(u),E=decodeURIComponent(i),w(r,v)?g(r[v])?r[v].push(E):r[v]=[r[v],E]:r[v]=E}return r};var g=Array.isArray||function(p){return Object.prototype.toString.call(p)==="[object Array]"}},{}],53:[function(I,F,j){var w=function(s){switch(typeof s){case"string":return s;case"boolean":return s?"true":"false";case"number":return isFinite(s)?s:"";default:return""}};F.exports=function(s,t,r,e){return t=t||"&",r=r||"=",s===null&&(s=void 0),typeof s=="object"?p(h(s),function(n){var f=encodeURIComponent(w(n))+r;return g(s[n])?p(s[n],function(o){return f+encodeURIComponent(w(o))}).join(t):f+encodeURIComponent(w(s[n]))}).join(t):e?encodeURIComponent(w(e))+r+encodeURIComponent(w(s)):""};var g=Array.isArray||function(s){return Object.prototype.toString.call(s)==="[object Array]"};function p(s,t){if(s.map)return s.map(t);for(var r=[],e=0;e<s.length;e++)r.push(t(s[e],e));return r}var h=Object.keys||function(s){var t=[];for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&t.push(r);return t}},{}],54:[function(I,F,j){j.decode=j.parse=I("./decode"),j.encode=j.stringify=I("./encode")},{"./decode":52,"./encode":53}],55:[function(I,F,j){function w(e,n){e.prototype=Object.create(n.prototype),e.prototype.constructor=e,e.__proto__=n}var g={};function p(e,n,f){f||(f=Error);function o(d,u,i){return typeof n=="string"?n:n(d,u,i)}var y=function(d){w(u,d);function u(i,v,E){return d.call(this,o(i,v,E))||this}return u}(f);y.prototype.name=f.name,y.prototype.code=e,g[e]=y}function h(e,n){if(Array.isArray(e)){var f=e.length;return e=e.map(function(o){return String(o)}),f>2?"one of ".concat(n," ").concat(e.slice(0,f-1).join(", "),", or ")+e[f-1]:f===2?"one of ".concat(n," ").concat(e[0]," or ").concat(e[1]):"of ".concat(n," ").concat(e[0])}else return"of ".concat(n," ").concat(String(e))}function s(e,n,f){return e.substr(!f||f<0?0:+f,n.length)===n}function t(e,n,f){return(f===void 0||f>e.length)&&(f=e.length),e.substring(f-n.length,f)===n}function r(e,n,f){return typeof f!="number"&&(f=0),f+n.length>e.length?!1:e.indexOf(n,f)!==-1}p("ERR_INVALID_OPT_VALUE",function(e,n){return'The value "'+n+'" is invalid for option "'+e+'"'},TypeError),p("ERR_INVALID_ARG_TYPE",function(e,n,f){var o;typeof n=="string"&&s(n,"not ")?(o="must not be",n=n.replace(/^not /,"")):o="must be";var y;if(t(e," argument"))y="The ".concat(e," ").concat(o," ").concat(h(n,"type"));else{var d=r(e,".")?"property":"argument";y='The "'.concat(e,'" ').concat(d," ").concat(o," ").concat(h(n,"type"))}return y+=". Received type ".concat(typeof f),y},TypeError),p("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),p("ERR_METHOD_NOT_IMPLEMENTED",function(e){return"The "+e+" method is not implemented"}),p("ERR_STREAM_PREMATURE_CLOSE","Premature close"),p("ERR_STREAM_DESTROYED",function(e){return"Cannot call "+e+" after a stream was destroyed"}),p("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),p("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),p("ERR_STREAM_WRITE_AFTER_END","write after end"),p("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),p("ERR_UNKNOWN_ENCODING",function(e){return"Unknown encoding: "+e},TypeError),p("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),F.exports.codes=g},{}],56:[function(I,F,j){(function(w){(function(){var g=Object.keys||function(o){var y=[];for(var d in o)y.push(d);return y};F.exports=e;var p=I("./_stream_readable"),h=I("./_stream_writable");I("inherits")(e,p);for(var s=g(h.prototype),t=0;t<s.length;t++){var r=s[t];e.prototype[r]||(e.prototype[r]=h.prototype[r])}function e(o){if(!(this instanceof e))return new e(o);p.call(this,o),h.call(this,o),this.allowHalfOpen=!0,o&&(o.readable===!1&&(this.readable=!1),o.writable===!1&&(this.writable=!1),o.allowHalfOpen===!1&&(this.allowHalfOpen=!1,this.once("end",n)))}Object.defineProperty(e.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(e.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(e.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function n(){this._writableState.ended||w.nextTick(f,this)}function f(o){o.end()}Object.defineProperty(e.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set:function(y){this._readableState===void 0||this._writableState===void 0||(this._readableState.destroyed=y,this._writableState.destroyed=y)}})}).call(this)}).call(this,I("_process"))},{"./_stream_readable":58,"./_stream_writable":60,_process:50,inherits:24}],57:[function(I,F,j){F.exports=g;var w=I("./_stream_transform");I("inherits")(g,w);function g(p){if(!(this instanceof g))return new g(p);w.call(this,p)}g.prototype._transform=function(p,h,s){s(null,p)}},{"./_stream_transform":59,inherits:24}],58:[function(I,F,j){(function(w,g){(function(){F.exports=W;var p;W.ReadableState=V,I("events").EventEmitter;var h=function(A,m){return A.listeners(m).length},s=I("./internal/streams/stream"),t=I("buffer").Buffer,r=g.Uint8Array||function(){};function e(S){return t.from(S)}function n(S){return t.isBuffer(S)||S instanceof r}var f=I("util"),o;f&&f.debuglog?o=f.debuglog("stream"):o=function(){};var y=I("./internal/streams/buffer_list"),d=I("./internal/streams/destroy"),u=I("./internal/streams/state"),i=u.getHighWaterMark,v=I("../errors").codes,E=v.ERR_INVALID_ARG_TYPE,k=v.ERR_STREAM_PUSH_AFTER_EOF,P=v.ERR_METHOD_NOT_IMPLEMENTED,L=v.ERR_STREAM_UNSHIFT_AFTER_END_EVENT,R,q,l;I("inherits")(W,s);var _=d.errorOrDestroy,b=["error","close","destroy","pause","resume"];function B(S,A,m){if(typeof S.prependListener=="function")return S.prependListener(A,m);!S._events||!S._events[A]?S.on(A,m):Array.isArray(S._events[A])?S._events[A].unshift(m):S._events[A]=[m,S._events[A]]}function V(S,A,m){p=p||I("./_stream_duplex"),S=S||{},typeof m!="boolean"&&(m=A instanceof p),this.objectMode=!!S.objectMode,m&&(this.objectMode=this.objectMode||!!S.readableObjectMode),this.highWaterMark=i(this,S,"readableHighWaterMark",m),this.buffer=new y,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=S.emitClose!==!1,this.autoDestroy=!!S.autoDestroy,this.destroyed=!1,this.defaultEncoding=S.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,S.encoding&&(R||(R=I("string_decoder/").StringDecoder),this.decoder=new R(S.encoding),this.encoding=S.encoding)}function W(S){if(p=p||I("./_stream_duplex"),!(this instanceof W))return new W(S);var A=this instanceof p;this._readableState=new V(S,this,A),this.readable=!0,S&&(typeof S.read=="function"&&(this._read=S.read),typeof S.destroy=="function"&&(this._destroy=S.destroy)),s.call(this)}Object.defineProperty(W.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0?!1:this._readableState.destroyed},set:function(A){this._readableState&&(this._readableState.destroyed=A)}}),W.prototype.destroy=d.destroy,W.prototype._undestroy=d.undestroy,W.prototype._destroy=function(S,A){A(S)},W.prototype.push=function(S,A){var m=this._readableState,a;return m.objectMode?a=!0:typeof S=="string"&&(A=A||m.defaultEncoding,A!==m.encoding&&(S=t.from(S,A),A=""),a=!0),Y(this,S,A,!1,a)},W.prototype.unshift=function(S){return Y(this,S,null,!0,!1)};function Y(S,A,m,a,c){o("readableAddChunk",A);var C=S._readableState;if(A===null)C.reading=!1,ne(S,C);else{var N;if(c||(N=x(C,A)),N)_(S,N);else if(C.objectMode||A&&A.length>0)if(typeof A!="string"&&!C.objectMode&&Object.getPrototypeOf(A)!==t.prototype&&(A=e(A)),a)C.endEmitted?_(S,new L):T(S,C,A,!0);else if(C.ended)_(S,new k);else{if(C.destroyed)return!1;C.reading=!1,C.decoder&&!m?(A=C.decoder.write(A),C.objectMode||A.length!==0?T(S,C,A,!1):re(S,C)):T(S,C,A,!1)}else a||(C.reading=!1,re(S,C))}return!C.ended&&(C.length<C.highWaterMark||C.length===0)}function T(S,A,m,a){A.flowing&&A.length===0&&!A.sync?(A.awaitDrain=0,S.emit("data",m)):(A.length+=A.objectMode?1:m.length,a?A.buffer.unshift(m):A.buffer.push(m),A.needReadable&&K(S)),re(S,A)}function x(S,A){var m;return!n(A)&&typeof A!="string"&&A!==void 0&&!S.objectMode&&(m=new E("chunk",["string","Buffer","Uint8Array"],A)),m}W.prototype.isPaused=function(){return this._readableState.flowing===!1},W.prototype.setEncoding=function(S){R||(R=I("string_decoder/").StringDecoder);var A=new R(S);this._readableState.decoder=A,this._readableState.encoding=this._readableState.decoder.encoding;for(var m=this._readableState.buffer.head,a="";m!==null;)a+=A.write(m.data),m=m.next;return this._readableState.buffer.clear(),a!==""&&this._readableState.buffer.push(a),this._readableState.length=a.length,this};var D=1073741824;function G(S){return S>=D?S=D:(S--,S|=S>>>1,S|=S>>>2,S|=S>>>4,S|=S>>>8,S|=S>>>16,S++),S}function oe(S,A){return S<=0||A.length===0&&A.ended?0:A.objectMode?1:S!==S?A.flowing&&A.length?A.buffer.head.data.length:A.length:(S>A.highWaterMark&&(A.highWaterMark=G(S)),S<=A.length?S:A.ended?A.length:(A.needReadable=!0,0))}W.prototype.read=function(S){o("read",S),S=parseInt(S,10);var A=this._readableState,m=S;if(S!==0&&(A.emittedReadable=!1),S===0&&A.needReadable&&((A.highWaterMark!==0?A.length>=A.highWaterMark:A.length>0)||A.ended))return o("read: emitReadable",A.length,A.ended),A.length===0&&A.ended?z(this):K(this),null;if(S=oe(S,A),S===0&&A.ended)return A.length===0&&z(this),null;var a=A.needReadable;o("need readable",a),(A.length===0||A.length-S<A.highWaterMark)&&(a=!0,o("length less than watermark",a)),A.ended||A.reading?(a=!1,o("reading or ended",a)):a&&(o("do read"),A.reading=!0,A.sync=!0,A.length===0&&(A.needReadable=!0),this._read(A.highWaterMark),A.sync=!1,A.reading||(S=oe(m,A)));var c;return S>0?c=M(S,A):c=null,c===null?(A.needReadable=A.length<=A.highWaterMark,S=0):(A.length-=S,A.awaitDrain=0),A.length===0&&(A.ended||(A.needReadable=!0),m!==S&&A.ended&&z(this)),c!==null&&this.emit("data",c),c};function ne(S,A){if(o("onEofChunk"),!A.ended){if(A.decoder){var m=A.decoder.end();m&&m.length&&(A.buffer.push(m),A.length+=A.objectMode?1:m.length)}A.ended=!0,A.sync?K(S):(A.needReadable=!1,A.emittedReadable||(A.emittedReadable=!0,Q(S)))}}function K(S){var A=S._readableState;o("emitReadable",A.needReadable,A.emittedReadable),A.needReadable=!1,A.emittedReadable||(o("emitReadable",A.flowing),A.emittedReadable=!0,w.nextTick(Q,S))}function Q(S){var A=S._readableState;o("emitReadable_",A.destroyed,A.length,A.ended),!A.destroyed&&(A.length||A.ended)&&(S.emit("readable"),A.emittedReadable=!1),A.needReadable=!A.flowing&&!A.ended&&A.length<=A.highWaterMark,O(S)}function re(S,A){A.readingMore||(A.readingMore=!0,w.nextTick(ee,S,A))}function ee(S,A){for(;!A.reading&&!A.ended&&(A.length<A.highWaterMark||A.flowing&&A.length===0);){var m=A.length;if(o("maybeReadMore read 0"),S.read(0),m===A.length)break}A.readingMore=!1}W.prototype._read=function(S){_(this,new P("_read()"))},W.prototype.pipe=function(S,A){var m=this,a=this._readableState;switch(a.pipesCount){case 0:a.pipes=S;break;case 1:a.pipes=[a.pipes,S];break;default:a.pipes.push(S);break}a.pipesCount+=1,o("pipe count=%d opts=%j",a.pipesCount,A);var c=(!A||A.end!==!1)&&S!==w.stdout&&S!==w.stderr,C=c?J:ve;a.endEmitted?w.nextTick(C):m.once("end",C),S.on("unpipe",N);function N(ye,be){o("onunpipe"),ye===m&&be&&be.hasUnpiped===!1&&(be.hasUnpiped=!0,fe())}function J(){o("onend"),S.end()}var te=se(m);S.on("drain",te);var ae=!1;function fe(){o("cleanup"),S.removeListener("close",he),S.removeListener("finish",ge),S.removeListener("drain",te),S.removeListener("error",pe),S.removeListener("unpipe",N),m.removeListener("end",J),m.removeListener("end",ve),m.removeListener("data",ce),ae=!0,a.awaitDrain&&(!S._writableState||S._writableState.needDrain)&&te()}m.on("data",ce);function ce(ye){o("ondata");var be=S.write(ye);o("dest.write",be),be===!1&&((a.pipesCount===1&&a.pipes===S||a.pipesCount>1&&X(a.pipes,S)!==-1)&&!ae&&(o("false write response, pause",a.awaitDrain),a.awaitDrain++),m.pause())}function pe(ye){o("onerror",ye),ve(),S.removeListener("error",pe),h(S,"error")===0&&_(S,ye)}B(S,"error",pe);function he(){S.removeListener("finish",ge),ve()}S.once("close",he);function ge(){o("onfinish"),S.removeListener("close",he),ve()}S.once("finish",ge);function ve(){o("unpipe"),m.unpipe(S)}return S.emit("pipe",m),a.flowing||(o("pipe resume"),m.resume()),S};function se(S){return function(){var m=S._readableState;o("pipeOnDrain",m.awaitDrain),m.awaitDrain&&m.awaitDrain--,m.awaitDrain===0&&h(S,"data")&&(m.flowing=!0,O(S))}}W.prototype.unpipe=function(S){var A=this._readableState,m={hasUnpiped:!1};if(A.pipesCount===0)return this;if(A.pipesCount===1)return S&&S!==A.pipes?this:(S||(S=A.pipes),A.pipes=null,A.pipesCount=0,A.flowing=!1,S&&S.emit("unpipe",this,m),this);if(!S){var a=A.pipes,c=A.pipesCount;A.pipes=null,A.pipesCount=0,A.flowing=!1;for(var C=0;C<c;C++)a[C].emit("unpipe",this,{hasUnpiped:!1});return this}var N=X(A.pipes,S);return N===-1?this:(A.pipes.splice(N,1),A.pipesCount-=1,A.pipesCount===1&&(A.pipes=A.pipes[0]),S.emit("unpipe",this,m),this)},W.prototype.on=function(S,A){var m=s.prototype.on.call(this,S,A),a=this._readableState;return S==="data"?(a.readableListening=this.listenerCount("readable")>0,a.flowing!==!1&&this.resume()):S==="readable"&&!a.endEmitted&&!a.readableListening&&(a.readableListening=a.needReadable=!0,a.flowing=!1,a.emittedReadable=!1,o("on readable",a.length,a.reading),a.length?K(this):a.reading||w.nextTick(H,this)),m},W.prototype.addListener=W.prototype.on,W.prototype.removeListener=function(S,A){var m=s.prototype.removeListener.call(this,S,A);return S==="readable"&&w.nextTick(ie,this),m},W.prototype.removeAllListeners=function(S){var A=s.prototype.removeAllListeners.apply(this,arguments);return(S==="readable"||S===void 0)&&w.nextTick(ie,this),A};function ie(S){var A=S._readableState;A.readableListening=S.listenerCount("readable")>0,A.resumeScheduled&&!A.paused?A.flowing=!0:S.listenerCount("data")>0&&S.resume()}function H(S){o("readable nexttick read 0"),S.read(0)}W.prototype.resume=function(){var S=this._readableState;return S.flowing||(o("resume"),S.flowing=!S.readableListening,U(this,S)),S.paused=!1,this};function U(S,A){A.resumeScheduled||(A.resumeScheduled=!0,w.nextTick(Z,S,A))}function Z(S,A){o("resume",A.reading),A.reading||S.read(0),A.resumeScheduled=!1,S.emit("resume"),O(S),A.flowing&&!A.reading&&S.read(0)}W.prototype.pause=function(){return o("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(o("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this};function O(S){var A=S._readableState;for(o("flow",A.flowing);A.flowing&&S.read()!==null;);}W.prototype.wrap=function(S){var A=this,m=this._readableState,a=!1;S.on("end",function(){if(o("wrapped end"),m.decoder&&!m.ended){var N=m.decoder.end();N&&N.length&&A.push(N)}A.push(null)}),S.on("data",function(N){if(o("wrapped data"),m.decoder&&(N=m.decoder.write(N)),!(m.objectMode&&N==null)&&!(!m.objectMode&&(!N||!N.length))){var J=A.push(N);J||(a=!0,S.pause())}});for(var c in S)this[c]===void 0&&typeof S[c]=="function"&&(this[c]=function(J){return function(){return S[J].apply(S,arguments)}}(c));for(var C=0;C<b.length;C++)S.on(b[C],this.emit.bind(this,b[C]));return this._read=function(N){o("wrapped _read",N),a&&(a=!1,S.resume())},this},typeof Symbol=="function"&&(W.prototype[Symbol.asyncIterator]=function(){return q===void 0&&(q=I("./internal/streams/async_iterator")),q(this)}),Object.defineProperty(W.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(W.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(W.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(A){this._readableState&&(this._readableState.flowing=A)}}),W._fromList=M,Object.defineProperty(W.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}});function M(S,A){if(A.length===0)return null;var m;return A.objectMode?m=A.buffer.shift():!S||S>=A.length?(A.decoder?m=A.buffer.join(""):A.buffer.length===1?m=A.buffer.first():m=A.buffer.concat(A.length),A.buffer.clear()):m=A.buffer.consume(S,A.decoder),m}function z(S){var A=S._readableState;o("endReadable",A.endEmitted),A.endEmitted||(A.ended=!0,w.nextTick($,A,S))}function $(S,A){if(o("endReadableNT",S.endEmitted,S.length),!S.endEmitted&&S.length===0&&(S.endEmitted=!0,A.readable=!1,A.emit("end"),S.autoDestroy)){var m=A._writableState;(!m||m.autoDestroy&&m.finished)&&A.destroy()}}typeof Symbol=="function"&&(W.from=function(S,A){return l===void 0&&(l=I("./internal/streams/from")),l(W,S,A)});function X(S,A){for(var m=0,a=S.length;m<a;m++)if(S[m]===A)return m;return-1}}).call(this)}).call(this,I("_process"),typeof de<"u"?de:typeof self<"u"?self:typeof window<"u"?window:{})},{"../errors":55,"./_stream_duplex":56,"./internal/streams/async_iterator":61,"./internal/streams/buffer_list":62,"./internal/streams/destroy":63,"./internal/streams/from":65,"./internal/streams/state":67,"./internal/streams/stream":68,_process:50,buffer:17,events:22,inherits:24,"string_decoder/":75,util:16}],59:[function(I,F,j){F.exports=e;var w=I("../errors").codes,g=w.ERR_METHOD_NOT_IMPLEMENTED,p=w.ERR_MULTIPLE_CALLBACK,h=w.ERR_TRANSFORM_ALREADY_TRANSFORMING,s=w.ERR_TRANSFORM_WITH_LENGTH_0,t=I("./_stream_duplex");I("inherits")(e,t);function r(o,y){var d=this._transformState;d.transforming=!1;var u=d.writecb;if(u===null)return this.emit("error",new p);d.writechunk=null,d.writecb=null,y!=null&&this.push(y),u(o);var i=this._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}function e(o){if(!(this instanceof e))return new e(o);t.call(this,o),this._transformState={afterTransform:r.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,o&&(typeof o.transform=="function"&&(this._transform=o.transform),typeof o.flush=="function"&&(this._flush=o.flush)),this.on("prefinish",n)}function n(){var o=this;typeof this._flush=="function"&&!this._readableState.destroyed?this._flush(function(y,d){f(o,y,d)}):f(this,null,null)}e.prototype.push=function(o,y){return this._transformState.needTransform=!1,t.prototype.push.call(this,o,y)},e.prototype._transform=function(o,y,d){d(new g("_transform()"))},e.prototype._write=function(o,y,d){var u=this._transformState;if(u.writecb=d,u.writechunk=o,u.writeencoding=y,!u.transforming){var i=this._readableState;(u.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},e.prototype._read=function(o){var y=this._transformState;y.writechunk!==null&&!y.transforming?(y.transforming=!0,this._transform(y.writechunk,y.writeencoding,y.afterTransform)):y.needTransform=!0},e.prototype._destroy=function(o,y){t.prototype._destroy.call(this,o,function(d){y(d)})};function f(o,y,d){if(y)return o.emit("error",y);if(d!=null&&o.push(d),o._writableState.length)throw new s;if(o._transformState.transforming)throw new h;return o.push(null)}},{"../errors":55,"./_stream_duplex":56,inherits:24}],60:[function(I,F,j){(function(w,g){(function(){F.exports=V;function p(O){var M=this;this.next=null,this.entry=null,this.finish=function(){Z(M,O)}}var h;V.WritableState=b;var s={deprecate:I("util-deprecate")},t=I("./internal/streams/stream"),r=I("buffer").Buffer,e=g.Uint8Array||function(){};function n(O){return r.from(O)}function f(O){return r.isBuffer(O)||O instanceof e}var o=I("./internal/streams/destroy"),y=I("./internal/streams/state"),d=y.getHighWaterMark,u=I("../errors").codes,i=u.ERR_INVALID_ARG_TYPE,v=u.ERR_METHOD_NOT_IMPLEMENTED,E=u.ERR_MULTIPLE_CALLBACK,k=u.ERR_STREAM_CANNOT_PIPE,P=u.ERR_STREAM_DESTROYED,L=u.ERR_STREAM_NULL_VALUES,R=u.ERR_STREAM_WRITE_AFTER_END,q=u.ERR_UNKNOWN_ENCODING,l=o.errorOrDestroy;I("inherits")(V,t);function _(){}function b(O,M,z){h=h||I("./_stream_duplex"),O=O||{},typeof z!="boolean"&&(z=M instanceof h),this.objectMode=!!O.objectMode,z&&(this.objectMode=this.objectMode||!!O.writableObjectMode),this.highWaterMark=d(this,O,"writableHighWaterMark",z),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var $=O.decodeStrings===!1;this.decodeStrings=!$,this.defaultEncoding=O.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(X){ne(M,X)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=O.emitClose!==!1,this.autoDestroy=!!O.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new p(this)}b.prototype.getBuffer=function(){for(var M=this.bufferedRequest,z=[];M;)z.push(M),M=M.next;return z},function(){try{Object.defineProperty(b.prototype,"buffer",{get:s.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}}();var B;typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(B=Function.prototype[Symbol.hasInstance],Object.defineProperty(V,Symbol.hasInstance,{value:function(M){return B.call(this,M)?!0:this!==V?!1:M&&M._writableState instanceof b}})):B=function(M){return M instanceof this};function V(O){h=h||I("./_stream_duplex");var M=this instanceof h;if(!M&&!B.call(V,this))return new V(O);this._writableState=new b(O,this,M),this.writable=!0,O&&(typeof O.write=="function"&&(this._write=O.write),typeof O.writev=="function"&&(this._writev=O.writev),typeof O.destroy=="function"&&(this._destroy=O.destroy),typeof O.final=="function"&&(this._final=O.final)),t.call(this)}V.prototype.pipe=function(){l(this,new k)};function W(O,M){var z=new R;l(O,z),w.nextTick(M,z)}function Y(O,M,z,$){var X;return z===null?X=new L:typeof z!="string"&&!M.objectMode&&(X=new i("chunk",["string","Buffer"],z)),X?(l(O,X),w.nextTick($,X),!1):!0}V.prototype.write=function(O,M,z){var $=this._writableState,X=!1,S=!$.objectMode&&f(O);return S&&!r.isBuffer(O)&&(O=n(O)),typeof M=="function"&&(z=M,M=null),S?M="buffer":M||(M=$.defaultEncoding),typeof z!="function"&&(z=_),$.ending?W(this,z):(S||Y(this,$,O,z))&&($.pendingcb++,X=x(this,$,S,O,M,z)),X},V.prototype.cork=function(){this._writableState.corked++},V.prototype.uncork=function(){var O=this._writableState;O.corked&&(O.corked--,!O.writing&&!O.corked&&!O.bufferProcessing&&O.bufferedRequest&&re(this,O))},V.prototype.setDefaultEncoding=function(M){if(typeof M=="string"&&(M=M.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((M+"").toLowerCase())>-1))throw new q(M);return this._writableState.defaultEncoding=M,this},Object.defineProperty(V.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}});function T(O,M,z){return!O.objectMode&&O.decodeStrings!==!1&&typeof M=="string"&&(M=r.from(M,z)),M}Object.defineProperty(V.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function x(O,M,z,$,X,S){if(!z){var A=T(M,$,X);$!==A&&(z=!0,X="buffer",$=A)}var m=M.objectMode?1:$.length;M.length+=m;var a=M.length<M.highWaterMark;if(a||(M.needDrain=!0),M.writing||M.corked){var c=M.lastBufferedRequest;M.lastBufferedRequest={chunk:$,encoding:X,isBuf:z,callback:S,next:null},c?c.next=M.lastBufferedRequest:M.bufferedRequest=M.lastBufferedRequest,M.bufferedRequestCount+=1}else D(O,M,!1,m,$,X,S);return a}function D(O,M,z,$,X,S,A){M.writelen=$,M.writecb=A,M.writing=!0,M.sync=!0,M.destroyed?M.onwrite(new P("write")):z?O._writev(X,M.onwrite):O._write(X,S,M.onwrite),M.sync=!1}function G(O,M,z,$,X){--M.pendingcb,z?(w.nextTick(X,$),w.nextTick(H,O,M),O._writableState.errorEmitted=!0,l(O,$)):(X($),O._writableState.errorEmitted=!0,l(O,$),H(O,M))}function oe(O){O.writing=!1,O.writecb=null,O.length-=O.writelen,O.writelen=0}function ne(O,M){var z=O._writableState,$=z.sync,X=z.writecb;if(typeof X!="function")throw new E;if(oe(z),M)G(O,z,$,M,X);else{var S=ee(z)||O.destroyed;!S&&!z.corked&&!z.bufferProcessing&&z.bufferedRequest&&re(O,z),$?w.nextTick(K,O,z,S,X):K(O,z,S,X)}}function K(O,M,z,$){z||Q(O,M),M.pendingcb--,$(),H(O,M)}function Q(O,M){M.length===0&&M.needDrain&&(M.needDrain=!1,O.emit("drain"))}function re(O,M){M.bufferProcessing=!0;var z=M.bufferedRequest;if(O._writev&&z&&z.next){var $=M.bufferedRequestCount,X=new Array($),S=M.corkedRequestsFree;S.entry=z;for(var A=0,m=!0;z;)X[A]=z,z.isBuf||(m=!1),z=z.next,A+=1;X.allBuffers=m,D(O,M,!0,M.length,X,"",S.finish),M.pendingcb++,M.lastBufferedRequest=null,S.next?(M.corkedRequestsFree=S.next,S.next=null):M.corkedRequestsFree=new p(M),M.bufferedRequestCount=0}else{for(;z;){var a=z.chunk,c=z.encoding,C=z.callback,N=M.objectMode?1:a.length;if(D(O,M,!1,N,a,c,C),z=z.next,M.bufferedRequestCount--,M.writing)break}z===null&&(M.lastBufferedRequest=null)}M.bufferedRequest=z,M.bufferProcessing=!1}V.prototype._write=function(O,M,z){z(new v("_write()"))},V.prototype._writev=null,V.prototype.end=function(O,M,z){var $=this._writableState;return typeof O=="function"?(z=O,O=null,M=null):typeof M=="function"&&(z=M,M=null),O!=null&&this.write(O,M),$.corked&&($.corked=1,this.uncork()),$.ending||U(this,$,z),this},Object.defineProperty(V.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function ee(O){return O.ending&&O.length===0&&O.bufferedRequest===null&&!O.finished&&!O.writing}function se(O,M){O._final(function(z){M.pendingcb--,z&&l(O,z),M.prefinished=!0,O.emit("prefinish"),H(O,M)})}function ie(O,M){!M.prefinished&&!M.finalCalled&&(typeof O._final=="function"&&!M.destroyed?(M.pendingcb++,M.finalCalled=!0,w.nextTick(se,O,M)):(M.prefinished=!0,O.emit("prefinish")))}function H(O,M){var z=ee(M);if(z&&(ie(O,M),M.pendingcb===0&&(M.finished=!0,O.emit("finish"),M.autoDestroy))){var $=O._readableState;(!$||$.autoDestroy&&$.endEmitted)&&O.destroy()}return z}function U(O,M,z){M.ending=!0,H(O,M),z&&(M.finished?w.nextTick(z):O.once("finish",z)),M.ended=!0,O.writable=!1}function Z(O,M,z){var $=O.entry;for(O.entry=null;$;){var X=$.callback;M.pendingcb--,X(z),$=$.next}M.corkedRequestsFree.next=O}Object.defineProperty(V.prototype,"destroyed",{enumerable:!1,get:function(){return this._writableState===void 0?!1:this._writableState.destroyed},set:function(M){this._writableState&&(this._writableState.destroyed=M)}}),V.prototype.destroy=o.destroy,V.prototype._undestroy=o.undestroy,V.prototype._destroy=function(O,M){M(O)}}).call(this)}).call(this,I("_process"),typeof de<"u"?de:typeof self<"u"?self:typeof window<"u"?window:{})},{"../errors":55,"./_stream_duplex":56,"./internal/streams/destroy":63,"./internal/streams/state":67,"./internal/streams/stream":68,_process:50,buffer:17,inherits:24,"util-deprecate":78}],61:[function(I,F,j){(function(w){(function(){var g;function p(P,L,R){return L in P?Object.defineProperty(P,L,{value:R,enumerable:!0,configurable:!0,writable:!0}):P[L]=R,P}var h=I("./end-of-stream"),s=Symbol("lastResolve"),t=Symbol("lastReject"),r=Symbol("error"),e=Symbol("ended"),n=Symbol("lastPromise"),f=Symbol("handlePromise"),o=Symbol("stream");function y(P,L){return{value:P,done:L}}function d(P){var L=P[s];if(L!==null){var R=P[o].read();R!==null&&(P[n]=null,P[s]=null,P[t]=null,L(y(R,!1)))}}function u(P){w.nextTick(d,P)}function i(P,L){return function(R,q){P.then(function(){if(L[e]){R(y(void 0,!0));return}L[f](R,q)},q)}}var v=Object.getPrototypeOf(function(){}),E=Object.setPrototypeOf((g={get stream(){return this[o]},next:function(){var L=this,R=this[r];if(R!==null)return Promise.reject(R);if(this[e])return Promise.resolve(y(void 0,!0));if(this[o].destroyed)return new Promise(function(b,B){w.nextTick(function(){L[r]?B(L[r]):b(y(void 0,!0))})});var q=this[n],l;if(q)l=new Promise(i(q,this));else{var _=this[o].read();if(_!==null)return Promise.resolve(y(_,!1));l=new Promise(this[f])}return this[n]=l,l}},p(g,Symbol.asyncIterator,function(){return this}),p(g,"return",function(){var L=this;return new Promise(function(R,q){L[o].destroy(null,function(l){if(l){q(l);return}R(y(void 0,!0))})})}),g),v),k=function(L){var R,q=Object.create(E,(R={},p(R,o,{value:L,writable:!0}),p(R,s,{value:null,writable:!0}),p(R,t,{value:null,writable:!0}),p(R,r,{value:null,writable:!0}),p(R,e,{value:L._readableState.endEmitted,writable:!0}),p(R,f,{value:function(_,b){var B=q[o].read();B?(q[n]=null,q[s]=null,q[t]=null,_(y(B,!1))):(q[s]=_,q[t]=b)},writable:!0}),R));return q[n]=null,h(L,function(l){if(l&&l.code!=="ERR_STREAM_PREMATURE_CLOSE"){var _=q[t];_!==null&&(q[n]=null,q[s]=null,q[t]=null,_(l)),q[r]=l;return}var b=q[s];b!==null&&(q[n]=null,q[s]=null,q[t]=null,b(y(void 0,!0))),q[e]=!0}),L.on("readable",u.bind(null,q)),q};F.exports=k}).call(this)}).call(this,I("_process"))},{"./end-of-stream":64,_process:50}],62:[function(I,F,j){function w(d,u){var i=Object.keys(d);if(Object.getOwnPropertySymbols){var v=Object.getOwnPropertySymbols(d);u&&(v=v.filter(function(E){return Object.getOwnPropertyDescriptor(d,E).enumerable})),i.push.apply(i,v)}return i}function g(d){for(var u=1;u<arguments.length;u++){var i=arguments[u]!=null?arguments[u]:{};u%2?w(Object(i),!0).forEach(function(v){p(d,v,i[v])}):Object.getOwnPropertyDescriptors?Object.defineProperties(d,Object.getOwnPropertyDescriptors(i)):w(Object(i)).forEach(function(v){Object.defineProperty(d,v,Object.getOwnPropertyDescriptor(i,v))})}return d}function p(d,u,i){return u in d?Object.defineProperty(d,u,{value:i,enumerable:!0,configurable:!0,writable:!0}):d[u]=i,d}function h(d,u){if(!(d instanceof u))throw new TypeError("Cannot call a class as a function")}function s(d,u){for(var i=0;i<u.length;i++){var v=u[i];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(d,v.key,v)}}function t(d,u,i){return u&&s(d.prototype,u),i&&s(d,i),d}var r=I("buffer"),e=r.Buffer,n=I("util"),f=n.inspect,o=f&&f.custom||"inspect";function y(d,u,i){e.prototype.copy.call(d,u,i)}F.exports=function(){function d(){h(this,d),this.head=null,this.tail=null,this.length=0}return t(d,[{key:"push",value:function(i){var v={data:i,next:null};this.length>0?this.tail.next=v:this.head=v,this.tail=v,++this.length}},{key:"unshift",value:function(i){var v={data:i,next:this.head};this.length===0&&(this.tail=v),this.head=v,++this.length}},{key:"shift",value:function(){if(this.length!==0){var i=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,i}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(i){if(this.length===0)return"";for(var v=this.head,E=""+v.data;v=v.next;)E+=i+v.data;return E}},{key:"concat",value:function(i){if(this.length===0)return e.alloc(0);for(var v=e.allocUnsafe(i>>>0),E=this.head,k=0;E;)y(E.data,v,k),k+=E.data.length,E=E.next;return v}},{key:"consume",value:function(i,v){var E;return i<this.head.data.length?(E=this.head.data.slice(0,i),this.head.data=this.head.data.slice(i)):i===this.head.data.length?E=this.shift():E=v?this._getString(i):this._getBuffer(i),E}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(i){var v=this.head,E=1,k=v.data;for(i-=k.length;v=v.next;){var P=v.data,L=i>P.length?P.length:i;if(L===P.length?k+=P:k+=P.slice(0,i),i-=L,i===0){L===P.length?(++E,v.next?this.head=v.next:this.head=this.tail=null):(this.head=v,v.data=P.slice(L));break}++E}return this.length-=E,k}},{key:"_getBuffer",value:function(i){var v=e.allocUnsafe(i),E=this.head,k=1;for(E.data.copy(v),i-=E.data.length;E=E.next;){var P=E.data,L=i>P.length?P.length:i;if(P.copy(v,v.length-i,0,L),i-=L,i===0){L===P.length?(++k,E.next?this.head=E.next:this.head=this.tail=null):(this.head=E,E.data=P.slice(L));break}++k}return this.length-=k,v}},{key:o,value:function(i,v){return f(this,g({},v,{depth:0,customInspect:!1}))}}]),d}()},{buffer:17,util:16}],63:[function(I,F,j){(function(w){(function(){function g(e,n){var f=this,o=this._readableState&&this._readableState.destroyed,y=this._writableState&&this._writableState.destroyed;return o||y?(n?n(e):e&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,w.nextTick(t,this,e)):w.nextTick(t,this,e)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(e||null,function(d){!n&&d?f._writableState?f._writableState.errorEmitted?w.nextTick(h,f):(f._writableState.errorEmitted=!0,w.nextTick(p,f,d)):w.nextTick(p,f,d):n?(w.nextTick(h,f),n(d)):w.nextTick(h,f)}),this)}function p(e,n){t(e,n),h(e)}function h(e){e._writableState&&!e._writableState.emitClose||e._readableState&&!e._readableState.emitClose||e.emit("close")}function s(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function t(e,n){e.emit("error",n)}function r(e,n){var f=e._readableState,o=e._writableState;f&&f.autoDestroy||o&&o.autoDestroy?e.destroy(n):e.emit("error",n)}F.exports={destroy:g,undestroy:s,errorOrDestroy:r}}).call(this)}).call(this,I("_process"))},{_process:50}],64:[function(I,F,j){var w=I("../../../errors").codes.ERR_STREAM_PREMATURE_CLOSE;function g(t){var r=!1;return function(){if(!r){r=!0;for(var e=arguments.length,n=new Array(e),f=0;f<e;f++)n[f]=arguments[f];t.apply(this,n)}}}function p(){}function h(t){return t.setHeader&&typeof t.abort=="function"}function s(t,r,e){if(typeof r=="function")return s(t,null,r);r||(r={}),e=g(e||p);var n=r.readable||r.readable!==!1&&t.readable,f=r.writable||r.writable!==!1&&t.writable,o=function(){t.writable||d()},y=t._writableState&&t._writableState.finished,d=function(){f=!1,y=!0,n||e.call(t)},u=t._readableState&&t._readableState.endEmitted,i=function(){n=!1,u=!0,f||e.call(t)},v=function(L){e.call(t,L)},E=function(){var L;if(n&&!u)return(!t._readableState||!t._readableState.ended)&&(L=new w),e.call(t,L);if(f&&!y)return(!t._writableState||!t._writableState.ended)&&(L=new w),e.call(t,L)},k=function(){t.req.on("finish",d)};return h(t)?(t.on("complete",d),t.on("abort",E),t.req?k():t.on("request",k)):f&&!t._writableState&&(t.on("end",o),t.on("close",o)),t.on("end",i),t.on("finish",d),r.error!==!1&&t.on("error",v),t.on("close",E),function(){t.removeListener("complete",d),t.removeListener("abort",E),t.removeListener("request",k),t.req&&t.req.removeListener("finish",d),t.removeListener("end",o),t.removeListener("close",o),t.removeListener("finish",d),t.removeListener("end",i),t.removeListener("error",v),t.removeListener("close",E)}}F.exports=s},{"../../../errors":55}],65:[function(I,F,j){F.exports=function(){throw new Error("Readable.from is not available in the browser")}},{}],66:[function(I,F,j){var w;function g(d){var u=!1;return function(){u||(u=!0,d.apply(void 0,arguments))}}var p=I("../../../errors").codes,h=p.ERR_MISSING_ARGS,s=p.ERR_STREAM_DESTROYED;function t(d){if(d)throw d}function r(d){return d.setHeader&&typeof d.abort=="function"}function e(d,u,i,v){v=g(v);var E=!1;d.on("close",function(){E=!0}),w===void 0&&(w=I("./end-of-stream")),w(d,{readable:u,writable:i},function(P){if(P)return v(P);E=!0,v()});var k=!1;return function(P){if(!E&&!k){if(k=!0,r(d))return d.abort();if(typeof d.destroy=="function")return d.destroy();v(P||new s("pipe"))}}}function n(d){d()}function f(d,u){return d.pipe(u)}function o(d){return!d.length||typeof d[d.length-1]!="function"?t:d.pop()}function y(){for(var d=arguments.length,u=new Array(d),i=0;i<d;i++)u[i]=arguments[i];var v=o(u);if(Array.isArray(u[0])&&(u=u[0]),u.length<2)throw new h("streams");var E,k=u.map(function(P,L){var R=L<u.length-1,q=L>0;return e(P,R,q,function(l){E||(E=l),l&&k.forEach(n),!R&&(k.forEach(n),v(E))})});return u.reduce(f)}F.exports=y},{"../../../errors":55,"./end-of-stream":64}],67:[function(I,F,j){var w=I("../../../errors").codes.ERR_INVALID_OPT_VALUE;function g(h,s,t){return h.highWaterMark!=null?h.highWaterMark:s?h[t]:null}function p(h,s,t,r){var e=g(s,r,t);if(e!=null){if(!(isFinite(e)&&Math.floor(e)===e)||e<0){var n=r?t:"highWaterMark";throw new w(n,e)}return Math.floor(e)}return h.objectMode?16:16*1024}F.exports={getHighWaterMark:p}},{"../../../errors":55}],68:[function(I,F,j){F.exports=I("events").EventEmitter},{events:22}],69:[function(I,F,j){j=F.exports=I("./lib/_stream_readable.js"),j.Stream=j,j.Readable=j,j.Writable=I("./lib/_stream_writable.js"),j.Duplex=I("./lib/_stream_duplex.js"),j.Transform=I("./lib/_stream_transform.js"),j.PassThrough=I("./lib/_stream_passthrough.js"),j.finished=I("./lib/internal/streams/end-of-stream.js"),j.pipeline=I("./lib/internal/streams/pipeline.js")},{"./lib/_stream_duplex.js":56,"./lib/_stream_passthrough.js":57,"./lib/_stream_readable.js":58,"./lib/_stream_transform.js":59,"./lib/_stream_writable.js":60,"./lib/internal/streams/end-of-stream.js":64,"./lib/internal/streams/pipeline.js":66}],70:[function(I,F,j){function w(p,h,s){var t=this;this._callback=p,this._args=s,this._interval=setInterval(p,h,this._args),this.reschedule=function(r){r||(r=t._interval),t._interval&&clearInterval(t._interval),t._interval=setInterval(t._callback,r,t._args)},this.clear=function(){t._interval&&(clearInterval(t._interval),t._interval=void 0)},this.destroy=function(){t._interval&&clearInterval(t._interval),t._callback=void 0,t._interval=void 0,t._args=void 0}}function g(){if(typeof arguments[0]!="function")throw new Error("callback needed");if(typeof arguments[1]!="number")throw new Error("interval needed");var p;if(arguments.length>0){p=new Array(arguments.length-2);for(var h=0;h<p.length;h++)p[h]=arguments[h+2]}return new w(arguments[0],arguments[1],p)}F.exports=g},{}],71:[function(I,F,j){F.exports=I("./index.js")()},{"./index.js":72}],72:[function(I,F,j){(function(w){(function(){F.exports=p;function g(s){return s instanceof w?w.from(s):new s.constructor(s.buffer.slice(),s.byteOffset,s.length)}function p(s){if(s=s||{},s.circles)return h(s);return s.proto?e:r;function t(n,f){for(var o=Object.keys(n),y=new Array(o.length),d=0;d<o.length;d++){var u=o[d],i=n[u];typeof i!="object"||i===null?y[u]=i:i instanceof Date?y[u]=new Date(i):ArrayBuffer.isView(i)?y[u]=g(i):y[u]=f(i)}return y}function r(n){if(typeof n!="object"||n===null)return n;if(n instanceof Date)return new Date(n);if(Array.isArray(n))return t(n,r);if(n instanceof Map)return new Map(t(Array.from(n),r));if(n instanceof Set)return new Set(t(Array.from(n),r));var f={};for(var o in n)if(Object.hasOwnProperty.call(n,o)!==!1){var y=n[o];typeof y!="object"||y===null?f[o]=y:y instanceof Date?f[o]=new Date(y):y instanceof Map?f[o]=new Map(t(Array.from(y),r)):y instanceof Set?f[o]=new Set(t(Array.from(y),r)):ArrayBuffer.isView(y)?f[o]=g(y):f[o]=r(y)}return f}function e(n){if(typeof n!="object"||n===null)return n;if(n instanceof Date)return new Date(n);if(Array.isArray(n))return t(n,e);if(n instanceof Map)return new Map(t(Array.from(n),e));if(n instanceof Set)return new Set(t(Array.from(n),e));var f={};for(var o in n){var y=n[o];typeof y!="object"||y===null?f[o]=y:y instanceof Date?f[o]=new Date(y):y instanceof Map?f[o]=new Map(t(Array.from(y),e)):y instanceof Set?f[o]=new Set(t(Array.from(y),e)):ArrayBuffer.isView(y)?f[o]=g(y):f[o]=e(y)}return f}}function h(s){var t=[],r=[];return s.proto?f:n;function e(o,y){for(var d=Object.keys(o),u=new Array(d.length),i=0;i<d.length;i++){var v=d[i],E=o[v];if(typeof E!="object"||E===null)u[v]=E;else if(E instanceof Date)u[v]=new Date(E);else if(ArrayBuffer.isView(E))u[v]=g(E);else{var k=t.indexOf(E);k!==-1?u[v]=r[k]:u[v]=y(E)}}return u}function n(o){if(typeof o!="object"||o===null)return o;if(o instanceof Date)return new Date(o);if(Array.isArray(o))return e(o,n);if(o instanceof Map)return new Map(e(Array.from(o),n));if(o instanceof Set)return new Set(e(Array.from(o),n));var y={};t.push(o),r.push(y);for(var d in o)if(Object.hasOwnProperty.call(o,d)!==!1){var u=o[d];if(typeof u!="object"||u===null)y[d]=u;else if(u instanceof Date)y[d]=new Date(u);else if(u instanceof Map)y[d]=new Map(e(Array.from(u),n));else if(u instanceof Set)y[d]=new Set(e(Array.from(u),n));else if(ArrayBuffer.isView(u))y[d]=g(u);else{var i=t.indexOf(u);i!==-1?y[d]=r[i]:y[d]=n(u)}}return t.pop(),r.pop(),y}function f(o){if(typeof o!="object"||o===null)return o;if(o instanceof Date)return new Date(o);if(Array.isArray(o))return e(o,f);if(o instanceof Map)return new Map(e(Array.from(o),f));if(o instanceof Set)return new Set(e(Array.from(o),f));var y={};t.push(o),r.push(y);for(var d in o){var u=o[d];if(typeof u!="object"||u===null)y[d]=u;else if(u instanceof Date)y[d]=new Date(u);else if(u instanceof Map)y[d]=new Map(e(Array.from(u),f));else if(u instanceof Set)y[d]=new Set(e(Array.from(u),f));else if(ArrayBuffer.isView(u))y[d]=g(u);else{var i=t.indexOf(u);i!==-1?y[d]=r[i]:y[d]=f(u)}}return t.pop(),r.pop(),y}}}).call(this)}).call(this,I("buffer").Buffer)},{buffer:17}],73:[function(I,F,j){/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */var w=I("buffer"),g=w.Buffer;function p(s,t){for(var r in s)t[r]=s[r]}g.from&&g.alloc&&g.allocUnsafe&&g.allocUnsafeSlow?F.exports=w:(p(w,j),j.Buffer=h);function h(s,t,r){return g(s,t,r)}h.prototype=Object.create(g.prototype),p(g,h),h.from=function(s,t,r){if(typeof s=="number")throw new TypeError("Argument must not be a number");return g(s,t,r)},h.alloc=function(s,t,r){if(typeof s!="number")throw new TypeError("Argument must be a number");var e=g(s);return t!==void 0?typeof r=="string"?e.fill(t,r):e.fill(t):e.fill(0),e},h.allocUnsafe=function(s){if(typeof s!="number")throw new TypeError("Argument must be a number");return g(s)},h.allocUnsafeSlow=function(s){if(typeof s!="number")throw new TypeError("Argument must be a number");return w.SlowBuffer(s)}},{buffer:17}],74:[function(I,F,j){F.exports=w;function w(p){var h=p._readableState;return h?h.objectMode||typeof p._duplexState=="number"?p.read():p.read(g(h)):null}function g(p){return p.buffer.length?p.buffer.head?p.buffer.head.data.length:p.buffer[0].length:p.length}},{}],75:[function(I,F,j){var w=I("safe-buffer").Buffer,g=w.isEncoding||function(k){switch(k=""+k,k&&k.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function p(k){if(!k)return"utf8";for(var P;;)switch(k){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return k;default:if(P)return;k=(""+k).toLowerCase(),P=!0}}function h(k){var P=p(k);if(typeof P!="string"&&(w.isEncoding===g||!g(k)))throw new Error("Unknown encoding: "+k);return P||k}j.StringDecoder=s;function s(k){this.encoding=h(k);var P;switch(this.encoding){case"utf16le":this.text=y,this.end=d,P=4;break;case"utf8":this.fillLast=n,P=4;break;case"base64":this.text=u,this.end=i,P=3;break;default:this.write=v,this.end=E;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=w.allocUnsafe(P)}s.prototype.write=function(k){if(k.length===0)return"";var P,L;if(this.lastNeed){if(P=this.fillLast(k),P===void 0)return"";L=this.lastNeed,this.lastNeed=0}else L=0;return L<k.length?P?P+this.text(k,L):this.text(k,L):P||""},s.prototype.end=o,s.prototype.text=f,s.prototype.fillLast=function(k){if(this.lastNeed<=k.length)return k.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);k.copy(this.lastChar,this.lastTotal-this.lastNeed,0,k.length),this.lastNeed-=k.length};function t(k){return k<=127?0:k>>5===6?2:k>>4===14?3:k>>3===30?4:k>>6===2?-1:-2}function r(k,P,L){var R=P.length-1;if(R<L)return 0;var q=t(P[R]);return q>=0?(q>0&&(k.lastNeed=q-1),q):--R<L||q===-2?0:(q=t(P[R]),q>=0?(q>0&&(k.lastNeed=q-2),q):--R<L||q===-2?0:(q=t(P[R]),q>=0?(q>0&&(q===2?q=0:k.lastNeed=q-3),q):0))}function e(k,P,L){if((P[0]&192)!==128)return k.lastNeed=0,"";if(k.lastNeed>1&&P.length>1){if((P[1]&192)!==128)return k.lastNeed=1,"";if(k.lastNeed>2&&P.length>2&&(P[2]&192)!==128)return k.lastNeed=2,""}}function n(k){var P=this.lastTotal-this.lastNeed,L=e(this,k);if(L!==void 0)return L;if(this.lastNeed<=k.length)return k.copy(this.lastChar,P,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);k.copy(this.lastChar,P,0,k.length),this.lastNeed-=k.length}function f(k,P){var L=r(this,k,P);if(!this.lastNeed)return k.toString("utf8",P);this.lastTotal=L;var R=k.length-(L-this.lastNeed);return k.copy(this.lastChar,0,R),k.toString("utf8",P,R)}function o(k){var P=k&&k.length?this.write(k):"";return this.lastNeed?P+"":P}function y(k,P){if((k.length-P)%2===0){var L=k.toString("utf16le",P);if(L){var R=L.charCodeAt(L.length-1);if(R>=55296&&R<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=k[k.length-2],this.lastChar[1]=k[k.length-1],L.slice(0,-1)}return L}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=k[k.length-1],k.toString("utf16le",P,k.length-1)}function d(k){var P=k&&k.length?this.write(k):"";if(this.lastNeed){var L=this.lastTotal-this.lastNeed;return P+this.lastChar.toString("utf16le",0,L)}return P}function u(k,P){var L=(k.length-P)%3;return L===0?k.toString("base64",P):(this.lastNeed=3-L,this.lastTotal=3,L===1?this.lastChar[0]=k[k.length-1]:(this.lastChar[0]=k[k.length-2],this.lastChar[1]=k[k.length-1]),k.toString("base64",P,k.length-L))}function i(k){var P=k&&k.length?this.write(k):"";return this.lastNeed?P+this.lastChar.toString("base64",0,3-this.lastNeed):P}function v(k){return k.toString(this.encoding)}function E(k){return k&&k.length?this.write(k):""}},{"safe-buffer":73}],76:[function(I,F,j){var w=I("punycode"),g=I("./util");j.parse=P,j.resolve=R,j.resolveObject=q,j.format=L,j.Url=p;function p(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}var h=/^([a-z0-9.+-]+:)/i,s=/:[0-9]*$/,t=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,r=["<",">",'"',"`"," ","\r",`
`,"	"],e=["{","}","|","\\","^","`"].concat(r),n=["'"].concat(e),f=["%","/","?",";","#"].concat(n),o=["/","?","#"],y=255,d=/^[+a-z0-9A-Z_-]{0,63}$/,u=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,i={javascript:!0,"javascript:":!0},v={javascript:!0,"javascript:":!0},E={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},k=I("querystring");function P(l,_,b){if(l&&g.isObject(l)&&l instanceof p)return l;var B=new p;return B.parse(l,_,b),B}p.prototype.parse=function(l,_,b){if(!g.isString(l))throw new TypeError("Parameter 'url' must be a string, not "+typeof l);var B=l.indexOf("?"),V=B!==-1&&B<l.indexOf("#")?"?":"#",W=l.split(V),Y=/\\/g;W[0]=W[0].replace(Y,"/"),l=W.join(V);var T=l;if(T=T.trim(),!b&&l.split("#").length===1){var x=t.exec(T);if(x)return this.path=T,this.href=T,this.pathname=x[1],x[2]?(this.search=x[2],_?this.query=k.parse(this.search.substr(1)):this.query=this.search.substr(1)):_&&(this.search="",this.query={}),this}var D=h.exec(T);if(D){D=D[0];var G=D.toLowerCase();this.protocol=G,T=T.substr(D.length)}if(b||D||T.match(/^\/\/[^@\/]+@[^@\/]+/)){var oe=T.substr(0,2)==="//";oe&&!(D&&v[D])&&(T=T.substr(2),this.slashes=!0)}if(!v[D]&&(oe||D&&!E[D])){for(var ne=-1,K=0;K<o.length;K++){var Q=T.indexOf(o[K]);Q!==-1&&(ne===-1||Q<ne)&&(ne=Q)}var re,ee;ne===-1?ee=T.lastIndexOf("@"):ee=T.lastIndexOf("@",ne),ee!==-1&&(re=T.slice(0,ee),T=T.slice(ee+1),this.auth=decodeURIComponent(re)),ne=-1;for(var K=0;K<f.length;K++){var Q=T.indexOf(f[K]);Q!==-1&&(ne===-1||Q<ne)&&(ne=Q)}ne===-1&&(ne=T.length),this.host=T.slice(0,ne),T=T.slice(ne),this.parseHost(),this.hostname=this.hostname||"";var se=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!se)for(var ie=this.hostname.split(/\./),K=0,H=ie.length;K<H;K++){var U=ie[K];if(U&&!U.match(d)){for(var Z="",O=0,M=U.length;O<M;O++)U.charCodeAt(O)>127?Z+="x":Z+=U[O];if(!Z.match(d)){var z=ie.slice(0,K),$=ie.slice(K+1),X=U.match(u);X&&(z.push(X[1]),$.unshift(X[2])),$.length&&(T="/"+$.join(".")+T),this.hostname=z.join(".");break}}}this.hostname.length>y?this.hostname="":this.hostname=this.hostname.toLowerCase(),se||(this.hostname=w.toASCII(this.hostname));var S=this.port?":"+this.port:"",A=this.hostname||"";this.host=A+S,this.href+=this.host,se&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),T[0]!=="/"&&(T="/"+T))}if(!i[G])for(var K=0,H=n.length;K<H;K++){var m=n[K];if(T.indexOf(m)!==-1){var a=encodeURIComponent(m);a===m&&(a=escape(m)),T=T.split(m).join(a)}}var c=T.indexOf("#");c!==-1&&(this.hash=T.substr(c),T=T.slice(0,c));var C=T.indexOf("?");if(C!==-1?(this.search=T.substr(C),this.query=T.substr(C+1),_&&(this.query=k.parse(this.query)),T=T.slice(0,C)):_&&(this.search="",this.query={}),T&&(this.pathname=T),E[G]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var S=this.pathname||"",N=this.search||"";this.path=S+N}return this.href=this.format(),this};function L(l){return g.isString(l)&&(l=P(l)),l instanceof p?l.format():p.prototype.format.call(l)}p.prototype.format=function(){var l=this.auth||"";l&&(l=encodeURIComponent(l),l=l.replace(/%3A/i,":"),l+="@");var _=this.protocol||"",b=this.pathname||"",B=this.hash||"",V=!1,W="";this.host?V=l+this.host:this.hostname&&(V=l+(this.hostname.indexOf(":")===-1?this.hostname:"["+this.hostname+"]"),this.port&&(V+=":"+this.port)),this.query&&g.isObject(this.query)&&Object.keys(this.query).length&&(W=k.stringify(this.query));var Y=this.search||W&&"?"+W||"";return _&&_.substr(-1)!==":"&&(_+=":"),this.slashes||(!_||E[_])&&V!==!1?(V="//"+(V||""),b&&b.charAt(0)!=="/"&&(b="/"+b)):V||(V=""),B&&B.charAt(0)!=="#"&&(B="#"+B),Y&&Y.charAt(0)!=="?"&&(Y="?"+Y),b=b.replace(/[?#]/g,function(T){return encodeURIComponent(T)}),Y=Y.replace("#","%23"),_+V+b+Y+B};function R(l,_){return P(l,!1,!0).resolve(_)}p.prototype.resolve=function(l){return this.resolveObject(P(l,!1,!0)).format()};function q(l,_){return l?P(l,!1,!0).resolveObject(_):_}p.prototype.resolveObject=function(l){if(g.isString(l)){var _=new p;_.parse(l,!1,!0),l=_}for(var b=new p,B=Object.keys(this),V=0;V<B.length;V++){var W=B[V];b[W]=this[W]}if(b.hash=l.hash,l.href==="")return b.href=b.format(),b;if(l.slashes&&!l.protocol){for(var Y=Object.keys(l),T=0;T<Y.length;T++){var x=Y[T];x!=="protocol"&&(b[x]=l[x])}return E[b.protocol]&&b.hostname&&!b.pathname&&(b.path=b.pathname="/"),b.href=b.format(),b}if(l.protocol&&l.protocol!==b.protocol){if(!E[l.protocol]){for(var D=Object.keys(l),G=0;G<D.length;G++){var oe=D[G];b[oe]=l[oe]}return b.href=b.format(),b}if(b.protocol=l.protocol,!l.host&&!v[l.protocol]){for(var H=(l.pathname||"").split("/");H.length&&!(l.host=H.shift()););l.host||(l.host=""),l.hostname||(l.hostname=""),H[0]!==""&&H.unshift(""),H.length<2&&H.unshift(""),b.pathname=H.join("/")}else b.pathname=l.pathname;if(b.search=l.search,b.query=l.query,b.host=l.host||"",b.auth=l.auth,b.hostname=l.hostname||l.host,b.port=l.port,b.pathname||b.search){var ne=b.pathname||"",K=b.search||"";b.path=ne+K}return b.slashes=b.slashes||l.slashes,b.href=b.format(),b}var Q=b.pathname&&b.pathname.charAt(0)==="/",re=l.host||l.pathname&&l.pathname.charAt(0)==="/",ee=re||Q||b.host&&l.pathname,se=ee,ie=b.pathname&&b.pathname.split("/")||[],H=l.pathname&&l.pathname.split("/")||[],U=b.protocol&&!E[b.protocol];if(U&&(b.hostname="",b.port=null,b.host&&(ie[0]===""?ie[0]=b.host:ie.unshift(b.host)),b.host="",l.protocol&&(l.hostname=null,l.port=null,l.host&&(H[0]===""?H[0]=l.host:H.unshift(l.host)),l.host=null),ee=ee&&(H[0]===""||ie[0]==="")),re)b.host=l.host||l.host===""?l.host:b.host,b.hostname=l.hostname||l.hostname===""?l.hostname:b.hostname,b.search=l.search,b.query=l.query,ie=H;else if(H.length)ie||(ie=[]),ie.pop(),ie=ie.concat(H),b.search=l.search,b.query=l.query;else if(!g.isNullOrUndefined(l.search)){if(U){b.hostname=b.host=ie.shift();var Z=b.host&&b.host.indexOf("@")>0?b.host.split("@"):!1;Z&&(b.auth=Z.shift(),b.host=b.hostname=Z.shift())}return b.search=l.search,b.query=l.query,(!g.isNull(b.pathname)||!g.isNull(b.search))&&(b.path=(b.pathname?b.pathname:"")+(b.search?b.search:"")),b.href=b.format(),b}if(!ie.length)return b.pathname=null,b.search?b.path="/"+b.search:b.path=null,b.href=b.format(),b;for(var O=ie.slice(-1)[0],M=(b.host||l.host||ie.length>1)&&(O==="."||O==="..")||O==="",z=0,$=ie.length;$>=0;$--)O=ie[$],O==="."?ie.splice($,1):O===".."?(ie.splice($,1),z++):z&&(ie.splice($,1),z--);if(!ee&&!se)for(;z--;z)ie.unshift("..");ee&&ie[0]!==""&&(!ie[0]||ie[0].charAt(0)!=="/")&&ie.unshift(""),M&&ie.join("/").substr(-1)!=="/"&&ie.push("");var X=ie[0]===""||ie[0]&&ie[0].charAt(0)==="/";if(U){b.hostname=b.host=X?"":ie.length?ie.shift():"";var Z=b.host&&b.host.indexOf("@")>0?b.host.split("@"):!1;Z&&(b.auth=Z.shift(),b.host=b.hostname=Z.shift())}return ee=ee||b.host&&ie.length,ee&&!X&&ie.unshift(""),ie.length?b.pathname=ie.join("/"):(b.pathname=null,b.path=null),(!g.isNull(b.pathname)||!g.isNull(b.search))&&(b.path=(b.pathname?b.pathname:"")+(b.search?b.search:"")),b.auth=l.auth||b.auth,b.slashes=b.slashes||l.slashes,b.href=b.format(),b},p.prototype.parseHost=function(){var l=this.host,_=s.exec(l);_&&(_=_[0],_!==":"&&(this.port=_.substr(1)),l=l.substr(0,l.length-_.length)),l&&(this.hostname=l)}},{"./util":77,punycode:51,querystring:54}],77:[function(I,F,j){F.exports={isString:function(w){return typeof w=="string"},isObject:function(w){return typeof w=="object"&&w!==null},isNull:function(w){return w===null},isNullOrUndefined:function(w){return w==null}}},{}],78:[function(I,F,j){(function(w){(function(){F.exports=g;function g(h,s){if(p("noDeprecation"))return h;var t=!1;function r(){if(!t){if(p("throwDeprecation"))throw new Error(s);p("traceDeprecation")?console.trace(s):console.warn(s),t=!0}return h.apply(this,arguments)}return r}function p(h){try{if(!w.localStorage)return!1}catch{return!1}var s=w.localStorage[h];return s==null?!1:String(s).toLowerCase()==="true"}}).call(this)}).call(this,typeof de<"u"?de:typeof self<"u"?self:typeof window<"u"?window:{})},{}],79:[function(I,F,j){F.exports=w;function w(g,p){if(g&&p)return w(g)(p);if(typeof g!="function")throw new TypeError("need wrapper function");return Object.keys(g).forEach(function(s){h[s]=g[s]}),h;function h(){for(var s=new Array(arguments.length),t=0;t<s.length;t++)s[t]=arguments[t];var r=g.apply(this,s),e=s[s.length-1];return typeof r=="function"&&r!==e&&Object.keys(e).forEach(function(n){r[n]=e[n]}),r}}},{}],80:[function(I,F,j){F.exports=function(){throw new Error("ws does not work in the browser. Browser clients must use the native WebSocket object")}},{}],81:[function(I,F,j){F.exports=g;var w=Object.prototype.hasOwnProperty;function g(){for(var p={},h=0;h<arguments.length;h++){var s=arguments[h];for(var t in s)w.call(s,t)&&(p[t]=s[t])}return p}},{}],82:[function(I,F,j){F.exports=function(w){w.prototype[Symbol.iterator]=function*(){for(let g=this.head;g;g=g.next)yield g.value}}},{}],83:[function(I,F,j){F.exports=w,w.Node=s,w.create=w;function w(t){var r=this;if(r instanceof w||(r=new w),r.tail=null,r.head=null,r.length=0,t&&typeof t.forEach=="function")t.forEach(function(f){r.push(f)});else if(arguments.length>0)for(var e=0,n=arguments.length;e<n;e++)r.push(arguments[e]);return r}w.prototype.removeNode=function(t){if(t.list!==this)throw new Error("removing node which does not belong to this list");var r=t.next,e=t.prev;return r&&(r.prev=e),e&&(e.next=r),t===this.head&&(this.head=r),t===this.tail&&(this.tail=e),t.list.length--,t.next=null,t.prev=null,t.list=null,r},w.prototype.unshiftNode=function(t){if(t!==this.head){t.list&&t.list.removeNode(t);var r=this.head;t.list=this,t.next=r,r&&(r.prev=t),this.head=t,this.tail||(this.tail=t),this.length++}},w.prototype.pushNode=function(t){if(t!==this.tail){t.list&&t.list.removeNode(t);var r=this.tail;t.list=this,t.prev=r,r&&(r.next=t),this.tail=t,this.head||(this.head=t),this.length++}},w.prototype.push=function(){for(var t=0,r=arguments.length;t<r;t++)p(this,arguments[t]);return this.length},w.prototype.unshift=function(){for(var t=0,r=arguments.length;t<r;t++)h(this,arguments[t]);return this.length},w.prototype.pop=function(){if(this.tail){var t=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,t}},w.prototype.shift=function(){if(this.head){var t=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,t}},w.prototype.forEach=function(t,r){r=r||this;for(var e=this.head,n=0;e!==null;n++)t.call(r,e.value,n,this),e=e.next},w.prototype.forEachReverse=function(t,r){r=r||this;for(var e=this.tail,n=this.length-1;e!==null;n--)t.call(r,e.value,n,this),e=e.prev},w.prototype.get=function(t){for(var r=0,e=this.head;e!==null&&r<t;r++)e=e.next;if(r===t&&e!==null)return e.value},w.prototype.getReverse=function(t){for(var r=0,e=this.tail;e!==null&&r<t;r++)e=e.prev;if(r===t&&e!==null)return e.value},w.prototype.map=function(t,r){r=r||this;for(var e=new w,n=this.head;n!==null;)e.push(t.call(r,n.value,this)),n=n.next;return e},w.prototype.mapReverse=function(t,r){r=r||this;for(var e=new w,n=this.tail;n!==null;)e.push(t.call(r,n.value,this)),n=n.prev;return e},w.prototype.reduce=function(t,r){var e,n=this.head;if(arguments.length>1)e=r;else if(this.head)n=this.head.next,e=this.head.value;else throw new TypeError("Reduce of empty list with no initial value");for(var f=0;n!==null;f++)e=t(e,n.value,f),n=n.next;return e},w.prototype.reduceReverse=function(t,r){var e,n=this.tail;if(arguments.length>1)e=r;else if(this.tail)n=this.tail.prev,e=this.tail.value;else throw new TypeError("Reduce of empty list with no initial value");for(var f=this.length-1;n!==null;f--)e=t(e,n.value,f),n=n.prev;return e},w.prototype.toArray=function(){for(var t=new Array(this.length),r=0,e=this.head;e!==null;r++)t[r]=e.value,e=e.next;return t},w.prototype.toArrayReverse=function(){for(var t=new Array(this.length),r=0,e=this.tail;e!==null;r++)t[r]=e.value,e=e.prev;return t},w.prototype.slice=function(t,r){r=r||this.length,r<0&&(r+=this.length),t=t||0,t<0&&(t+=this.length);var e=new w;if(r<t||r<0)return e;t<0&&(t=0),r>this.length&&(r=this.length);for(var n=0,f=this.head;f!==null&&n<t;n++)f=f.next;for(;f!==null&&n<r;n++,f=f.next)e.push(f.value);return e},w.prototype.sliceReverse=function(t,r){r=r||this.length,r<0&&(r+=this.length),t=t||0,t<0&&(t+=this.length);var e=new w;if(r<t||r<0)return e;t<0&&(t=0),r>this.length&&(r=this.length);for(var n=this.length,f=this.tail;f!==null&&n>r;n--)f=f.prev;for(;f!==null&&n>t;n--,f=f.prev)e.push(f.value);return e},w.prototype.splice=function(t,r,...e){t>this.length&&(t=this.length-1),t<0&&(t=this.length+t);for(var n=0,f=this.head;f!==null&&n<t;n++)f=f.next;for(var o=[],n=0;f&&n<r;n++)o.push(f.value),f=this.removeNode(f);f===null&&(f=this.tail),f!==this.head&&f!==this.tail&&(f=f.prev);for(var n=0;n<e.length;n++)f=g(this,f,e[n]);return o},w.prototype.reverse=function(){for(var t=this.head,r=this.tail,e=t;e!==null;e=e.prev){var n=e.prev;e.prev=e.next,e.next=n}return this.head=r,this.tail=t,this};function g(t,r,e){var n=r===t.head?new s(e,null,r,t):new s(e,r,r.next,t);return n.next===null&&(t.tail=n),n.prev===null&&(t.head=n),t.length++,n}function p(t,r){t.tail=new s(r,t.tail,null,t),t.head||(t.head=t.tail),t.length++}function h(t,r){t.head=new s(r,null,t.head,t),t.tail||(t.tail=t.head),t.length++}function s(t,r,e,n){if(!(this instanceof s))return new s(t,r,e,n);this.list=n,this.value=t,r?(r.next=this,this.prev=r):this.prev=null,e?(e.prev=this,this.next=e):this.next=null}try{I("./iterator.js")(w)}catch{}},{"./iterator.js":82}]},{},[12])(12)})})(Te);var Pe=Te.exports;export{Ie as M,xe as a,Ee as b,de as c,Se as d,Re as g,Pe as m};
